"{\"content\":{\"body\":\"> 国内用户如需交流，可加微信：197626581\\n\\nAuthors: **Leeduckgo@NonceGeek, Msfew@NonceGeek**\\n\\n> Moonbeam is a Polkadot-based smart contract blockchain dedicated to providing development tools and networks familiar to Ethereum developers with compatible functionality. Moonbeam is a developer-friendly blockchain that enables full EVM compatibility, API compatibility with Web3.js, and a bridge to connect Moonbeam to the existing Ethereum network. Developers can easily deploy existing Solidity smart contracts and DApp front ends to Moonbeam with only minor modifications.\\n>\\n> Since Moonbeam is an EVM-compatible chain implemented on Substrate, developers and DApps can enjoy all the benefits of EVM while simultaneously enjoying the unlimited possibilities of Substrate in the future, creating an amazing potential with the dual support of Substrate \\\\* Ethereum.\\n\\nOn Moonbeam/Moonriver, how should we complete the whole process of \\\"coding → debugging → code flattern → deployment → source code verification on browser\\\" for smart contracts via Remix?\\n\\n## 0x1 Remix Installation\\n\\nRemix is our go-to tool for developing Solidity smart contracts, and sometimes we access the web online version of the Remix-IDE directly.\\n\\n> <https://remix.ethereum.org/>\\n\\nHowever, complicated smart contracts can cause Remix to be frozen, so it's best for us to set up Remix locally.\\n\\nTo set up Remix locally, you need to prepare two things: one is Remix-project, which serves as the front-end client of Remix; the other is Remixd, which serves as the back-end of Remix, and their Github repositories are\\n\\n* <https://github.com/ethereum/remix-project>\\n* <https://github.com/ethereum/remixd>\\n\\n### 1.1 Set up Remix-project\\n\\nSet up Remix-project with Docker is recommended:\\n\\n```\\ndocker pull remixproject/remix-ide:latest\\ndocker run -p 8080:80 remixproject/remix-ide:latest\\n```\\n\\nThen we can access it through browser at port 8080.\\n\\n![image-20201010220954147](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2xf2v9cj30x40gzmyf.jpg)\\n\\n### 1.2 Set up Remixd\\n\\nThe following is the steps for setting up Remixd:\\n\\n1）Install Remixed via npm or yarn (yarn is recommended)\\n\\nVia npm:\\n\\n```\\nnpm install remixd -g\\n```\\n\\nVia yarn:\\n\\n```\\nyarn install -g remixd\\n```\\n\\n![pic1](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2x9if1zj30zw0p0dl2.jpg)\\n\\n2）Start Remix-IDE with one line of command\\n\\n```\\nremixd -s [path/ur/solidity/files] --remix-ide http://localhost:8080\\n# The last parameter means which port is accessed, because we are mapping to the Remix-project of 8080, so fill in http://localhost:8080\\n```\\n\\n> **Note:** Check the official doc for starting Remix.\\n\\n3）Click on Remix-IDE\\n\\nFirst, you click on Solidity, select specific environment; then click on Connect to Localhost to, of course, connect to localhost.\\n\\n![](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2x9245mj31iq0u0tbr.jpg)\\n\\nNow we are all set! We can use local contracts in Remix now.\\n\\n![](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2xcda1xj31ir0u0770.jpg)\\n\\n## 0x02 Writing and Debugging Smart Contract\\n\\nWhen writing and debugging smart contract codes, we can debug in our local Remix VM.\\n\\nOnly when deploying smart contract, we need to have actual interaction with the blockchain network.\\n\\n### 2.1 Create contract file\\n\\n![](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2x8o9upj31k20qan0l.jpg)\\n\\n### 2.2 Write contract code\\n\\nCopy and paste those lines into `hello.sol`\\n\\n```js\\npragma solidity^0.8.0;\\n\\ncontract hello {\\n    string public name;\\n    constructor() public {\\n        name = \\\"welight\\\";\\n    }\\n}\\n```\\n\\nHere is how it looks:\\n\\n![](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2x7aneaj31e20lo0v6.jpg)\\n\\nAfter writing the code, we need to save it. If you are using windows, hit \\\\[ctrl + s\\\\]. If Unix, hit \\\\[command + s\\\\].\\n\\n### 2.3 Switch to compile view and select specific compiler version\\n\\n![image-20210318121523436](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2xdo9ptj30hq0dnjs0.jpg)\\n\\n### 2.4 Switch to environment view and deploy the contract\\n\\n![image-20200520125102675](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2xazfx2j31g20ou40w.jpg)\\n\\n![image-20200520125230295](/Users/liaohua/Documents/008eGmZEly1gonyku25l2j316w0u0jz9.png)\\n\\n### 2.5 Open up contract view and debug the function\\n\\n![image-20200520125409304](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2xen1wij31og0k0gno.jpg)\\n\\nClick on Run to get the result.\\n\\n![](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2x68lf4j31l00gkmym.jpg)\\n\\n## 0x03 Flatten Code\\n\\nIn production environment, we normally don't \\\"write\\\" all the code, but use third party libraries like `open-zepplin`.\\n\\n```solidity\\n// SPDX-License-Identifier: MIT\\npragma solidity 0.8.0;\\n\\nimport \\\"@openzeppelin/contracts/token/ERC721/extensions/ERC721Enumerable.sol\\\";\\nimport \\\"@openzeppelin/contracts/security/ReentrancyGuard.sol\\\";\\nimport \\\"@openzeppelin/contracts/access/Ownable.sol\\\";\\n```\\n\\nImporting libraries are all good when deploying, but when doing source code verification (see `0x05`), it will generate problems like `File import callback not supported`.\\n\\nSo we can do `Flatten` operation for our code. We recommend usig `hardhat`.\\n\\nHardhat's tutorial resource is rich. Here is the link for one of the best.\\n\\n> \\\\[Translated\\\\] Hardhat Intro Tutorial: <https://learnblockchain.cn/article/1356>\\n\\nIn this step, we use `hardhat flatten` function.\\n\\n```solidity\\n npx hardhat flatten contracts/web3dev.sol\\n```\\n\\nAfter the execution, `flattened` code will be displayed. Then we copy and paste them into Remix.\\n\\n![image-20220112201227831](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2x5qlu2j316o0iignr.jpg)\\n\\nNote that `flatten` function is still not perfect, so we need to delete manully some of the `SPDX` and `pragma`.\\n\\n## 0x04 Deploy Smart Contract\\n\\nWe can deploy the contract onto the blockchain by `Injected Web3`.\\n\\n![image-20220112201608832](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2x7o5arj30nk0fmaat.jpg)\\n\\nExcept for the network difference, contract deployment is the same as contract debugging in `0x02`.\\n\\nWe can easily add Moonbeam, Moonriver, and MoonbaseAlpha networks by clicking a few buttons with the help of the following doc.\\n\\n> <https://docs.moonbeam.network/tokens/connect/metamask/>\\n\\n![image-20220112202020362](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2xe64poj31440qyq6b.jpg)\\n\\n## 0x05 Verify Contract on Explorer\\n\\nVerifying using browser API is indeed a choice, but it's a complicated one. We can verify just by inputting the source code.\\n\\nMoonbeam explorer is at:\\n\\n> <https://moonbase.moonscan.io/>\\n\\nFirst we see an unverified contract on explorer.\\n\\n![image-20220112202930685](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2x9zexbj30u00v042d.jpg)\\n\\nWe click `Verify and Publish`.\\n\\nThen select `Single File` and license:\\n\\n![image-20220112203647704](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2xbcxnlj313k0ti76d.jpg)\\n\\nAfter that, we paste the flattened code from `0x03` into the field:\\n\\n![image-20220112203808386](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2xd6z9aj31340lqgn3.jpg)\\n\\nClick on `Verify and Publish` to submit:\\n\\n![image-20220112203835726](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2x839srj30lq05wjrb.jpg)\\n\\nWe are all done when it shows `Succefully`。\\n\\n![image-20220112203911660](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2xaeq9cj31ee0hcmza.jpg)\\n\\nNow we access the contract again. When we click on `Contract` page, `Read` and `Write` appears!\\n\\n![image-20220112204021117](https://tva1.sinaimg.cn/large/008i3skNgy1gyc2xbt4m9j314i0lgmyy.jpg)\\n\\n![leeduckgo](https://noncegeek.com/namecards/leeduckgo.svg?display=iframe)\\n\\n![msfew](https://noncegeek.com/namecards/msfew.svg?display=iframe)\\n\\n\",\"timestamp\":1642129972,\"title\":\"Deploy Smart Contract by Remix on Moonbeam | Moonbeam Branch 0x01\"},\"digest\":\"sEIg2H84JeMStwUsqv_T0HeWRBufkZSi-piQysch3VU\",\"authorship\":{\"contributor\":\"0x73c7448760517E3E6e416b2c130E3c6dB2026A1d\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"xM355yZvrGDDrd9FHvimKZ4T0zIuNh37m14z9SEmC28\\\",\\\"y\\\":\\\"wA9J4NE412n8oTP16_e35be7ePBM_O8AGPIiy5YqLws\\\"}\",\"signature\":\"6MG6FQ19PVKx0J568M5DQC_TlL3ByCc2JLNhyQqNkx8skDDxnvm1MB1WlIYFHyRvDyrg7esEuiNfsnHrSiJ_4w\",\"signingKeySignature\":\"0xbd87c0a4de9cc1d2ae43462e8e46ff134c00d73caa7a29b22509e9f8cea31c986c38deae03d015a5df96440ef7d8451d0eeda1daba371adc1935081444e7fea41b\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"xM355yZvrGDDrd9FHvimKZ4T0zIuNh37m14z9SEmC28\\\",\\\"y\\\":\\\"wA9J4NE412n8oTP16_e35be7ePBM_O8AGPIiy5YqLws\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"sEIg2H84JeMStwUsqv_T0HeWRBufkZSi-piQysch3VU\"}"