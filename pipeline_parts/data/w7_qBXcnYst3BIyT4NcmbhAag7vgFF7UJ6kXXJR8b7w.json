"{\"content\":{\"body\":\"## 一、Layer2扩容方案发展现状\\n\\n区块链网络扩容的基本思路主要有两种：Layer1扩容、Layer2扩容。\\n\\nLayer1扩容可以理解为比特币、以太坊等底层链的性能升级；Layer2扩容则可以理解为在底层链外处理事物过程，只将结果同步回底层链上的扩容方案。比如：比特币的大区块思路，就是Layer1扩容，闪电网络便是Layer2扩容；以太坊的ETH2.0就是Layer1扩容，后文所述的多种扩容方案就是Layer2扩容。\\n\\n针对目前Layer1层的性能瓶颈，当前的Layer2扩容方案的核心思路是：Layer1做好去中心化和安全，做到底层链的绝对可靠、可信任，做到全球共识，并且以经济激励的方式将信任传递到Layer2；而Layer2则要提高效率、降低成本，以满足各类商业场景的业务需求。\\n\\n近期，Layer2实现了爆发性增长：\\n\\n### 1.1 以太坊Layer2总锁仓量突破38亿美元\\n\\n据L2BEAT数据，截至10月18日，以太坊L2总锁仓量为38亿美元，一周增长13.54%。其中，Arbitrum网络锁仓量为22.9亿美元，占L2总锁仓量的60.36%；其次，dYdX锁仓量为8.79亿美元，占比23.09%。\\n\\n![](https://images.mirror-media.xyz/publication-images/ASWhmxORhzciWI1Kv8xDL.png?height=906&width=1996)\\n\\n### 1.2 Layer2的转账和交易费用相较Layer1大幅降低\\n\\n据L2Fees数据，Layer2扩容方案的ETH转账费用最低仅为以太坊链上转账费用的3.22%，其他Tokens的转账费用甚至低至1.41%，Layer2的交易费用最低仅为以太坊链上交易费用的2.57%。\\n\\n![](https://images.mirror-media.xyz/publication-images/uddf1_3qxF8TDkN1Bm1Ns.png?height=1256&width=1070)\\n\\n从市场数据来看，Layer2扩容方案获得了较广泛的市场认可和采用，并且切实降低了用户在链上转账和交易的成本，一定程度上实现了最初的扩容初衷。\\n\\n## 二、Layer2扩容方案汇总分析\\n\\n目前市场上主要有以下几种Layer2扩容方案：状态通道（State Channels）、侧链（Sidechain）、Plasma、Rollup及Validium。\\n\\n![](https://images.mirror-media.xyz/publication-images/AV92Cqanq0ZqCyple4vRm.jpg?height=1150&width=2000)\\n\\n各类Layer2扩容方案均有项目采用，目前Rollup类扩容方案的应用案例较多。\\n\\n### 2.1五种主要的Layer2扩容方案\\n\\n1、State Channels\\n\\n状态通道是一种通用的扩展解决方案，可用于封闭系统中定义数量的用户之间的交互。状态通道需要在链上进行开启和关闭交易。但所有中间状态都直接在各方之间发送。交易在链下处理后，只向主链提交证明。\\n\\n状态通道是如何扩容的？举例说明：\\n\\n只有Ethereum主网时：A和B在以太坊上创建一个智能合约，双方发起一个事件（竞猜、押注等），当事件发生后，智能合约就会自动执行将锁在合约里的资产给赢家。\\n\\n以上就是只有Layer1的流程，全部事件在以太坊链上进行，每次交易都需要支付Gas费、需要等区块打包，成本高、效率低。\\n\\n有Layer2状态通道时：\\n\\n1⃣️在以太坊链上，A和B创建一个智能合约；\\n\\n2⃣️在链下：A创建并签署一个交易发送给B，B签名后把签名版发回给A，并且自己留下副本；A再对该交易签名，再发给B，并且A也保留了一个副本……每次他们更新交易状态，都是基于最后的一个状态并且通过签名的方式更新到一个新的状态，基于签名和时间顺序，可以知道所有操作（交易）的发生顺序；\\n\\n3⃣️在以太坊链上：最后，A和B结束交易，他们需要向以太坊链上提交最终状态以关闭链下的这个状态通道，如果合计下来，A赢了B 5元，则B需要在链上向A支付5元。智能合约会等待一段“挑战期”，挑战期内没有人能够修改这个结果（没有提交更新的交易证明），那么智能合约就会执行。\\n\\n由上述案例可知，Layer2状态通道的形式下，无论中间A和B进行了多少笔交易，都是在链下进行，不需要支付以太坊链上高昂的Gas费，也不需要等待区块打包时间，这样交易的成本和效率都很高；而真正的资产转移的过程，只发生在最初建立智能合约时双方抵押进去的押金以及最终的执行划转。\\n\\n状态通道是业内早期构思的Layer2扩容方案，有隐私性、即时终结性、适合长时间多状态更新等优点，但缺点也是很明显——它们需要所有参与者参与才能完成最终的链上交易。如果参与者下线，他们可以使用某人来代表他们，但是这个第三方可能会被贿赂或攻击。这限制了状态通道的安全性和可扩展性。\\n\\nState Channels的应用案例：Celer Network、Liquidity Network、Raiden Network等。\\n\\n2、Sidechain\\n\\n很早的时候，侧链便作为以太坊生态系统中可扩展性及可用性的权益方案。侧链的核心思路是构建一条完全独立的区块链，拥有自己的共识模型，有自己的验证者和运营者，通常与EVM兼容，可以扩展通用的应用程序，可以与主链互相转移资产。\\n\\n侧链的缺陷也很显著，侧链不依赖于以太坊的安全性，只选择性地将区块头的快照发送至主链来防止分叉，但是验证者依然可以通过串谋来发动“无效状态转换攻击”。\\n\\n“无效状态转换攻击”的核心思路：主链本来就不可能验证侧链上的所有区块，因此，只要有超过50%的验证者串谋，就可以创建一个无效区块，窃取其他参与者的资产，并将这个侧链的区块快照发送至主链，触发智能合约并执行，从而夺走其他参与者抵押在主链智能合约中的资产。\\n\\n因为侧链已经构建了一条完全独立的区块链，所以也有一些人认为侧链不属于Layer2扩容。一般来说，已经发展得比较好的项目，更倾向于保持自身的独立性，但是又不想脱离以太坊的繁荣生态，这种项目可能更倾向于采用侧链方案。\\n\\nSidechain的应用案例：xDAI、Skale Network、Injective Protocol等。\\n\\n3、Plasma\\n\\nPlasma是一种链下扩容技术，它依赖于与主链交互最少的链下交易（在子链中）。Plasma可以理解为Layer2扩容方案发展历程中的“中世纪”。\\n\\nPlasma最大的优点是安全性高，且可以实现无监管，即使Plasma链上所有的验证者串谋起来作恶，Plasma链上的资产也是安全的，而且可以退回主链。\\n\\n缺点是退出机制非常复杂。从Plasma链中提款可能需要长达2周的时间，因为需要有一个挑战期，用户可以在此期间提供欺诈证明，举报欺诈行为。这带来了显著的缺点，极大地影响了用户体验。\\n\\nPlasma的应用案例：OMG Network、Matic Network（Polygon）等。\\n\\n4、Rollup\\n\\nRollup是最新的二层扩容技术，也是目前市场最推崇、应用最广泛的扩容技术路径。\\n\\nRollup是将大量交易“汇总”成一个大批次，然后为该批次生成“证明”。然后将这个证明发布在主网上。\\n\\nRollup在Layer1之外执行交易，但在Layer1上发布交易数据。由于交易数据包含在Layer1的区块中，Rollup相当于继承了以太坊的安全性。\\n\\n在具体解决方案上，Rollup又分为Optimistic Rollup和ZK Rollup，前者参考了Plasma的欺诈证明机制，后者用零知识证明机制来确保安全性。\\n\\nOptimistic Rollup\\n\\nOptimistic Rollup假设为每个交易批次提供的证明都是有效的。\\n\\n在预定义的质疑期间（通常为1-2周），任何人都可以质疑提交的证明并断言欺诈——欺诈证明。\\n\\nOptimistic Rollup的优点是可以轻松支持通用计算，缺点是在扩展NFT方面有较大局限性。首先，Optimstic Rollup不能进行快速的NFT提款；其次，如果Optimstic Rollup中的NFT价值非常高，它可能会成为攻击目标，因为从Optimstic Rollup中窃取资金的成本与潜在盗窃的规模无关。\\n\\nOptimistic Rollup的应用案例：Arbirum、Optimism、Boba Network等。\\n\\nZK Rollup\\n\\nZK Rollup的核心工作机制是将链上的用户状态压缩存储在一棵Merkle树中，并将用户状态的变更转移到链下进行，同时通过zkSNARK的证明来保证该链下用户状态变更过程的正确性。在链上直接处理用户状态的变更成本是比较高的，但是仅仅利用链上的智能合约来验证一个零知识证明的PROOF是否正确，成本是相对低很多的���另外必要的转账信息也会被和证明一起提交到合约，方便用户查账。\\n\\nZK Rollup的关键特点：\\n\\n* 将主链作为存储媒介，而非共识引擎；\\n* 将交易压缩，并在链下达成状态共识；\\n* 用零知识证明保证链下状态共识的安全性 。\\n\\nZK Rollup使用零知识证明而非欺诈证明，使用SNARK或STARK以及大量复杂的数学来证明Rollup中交易的有效性。使用零知识证明意味着一旦在链上接受了证明，用户就可以立即确认这些交易是有效的。\\n\\n在NFT系统中，这解决了上述Optimistic Rollup的两个问题：用户可以立即退出，并且没有人能够攻击系统；在规模方面，ZK Rollup已经能够达到每秒数千笔交易的速度，并且在未来可以达到更高的限制。\\n\\nZK Rollup目前只有有限的功能可用，主要是转账和交易，这是因为将智能合约移植到ZK Rollup更具挑战性，这个缺点后续有可能会得到解决。\\n\\nZK Rollup的应用案例：zkSync、Loopring、dYdX等。\\n\\n5、Validium\\n\\nValidium的机制跟ZK Rollup很相似，也是采用零知识证明机制，主要的区别在于ZK Rollup上的每一笔交易数据都将通过以太坊网络进行广播，而在Validium上，数据由一组数据公证人管理。Validium的数据交易成本较低，但需要对数据公证人有信任。\\n\\nValidium的应用案例：Sorare、DeversiFi、ImmutableX等。\\n\\n### 2.2 各类Layer2扩容方案的关键区别\\n\\n目前，State Channels、Sidechain和Plasma已经比较少新项目采用，主流的Layer2扩容方案主要是后面2类：Rollup和Validium。\\n\\nLayer2扩容的关键在于：减轻Layer1的数据计算压力（将数据的计算和存储迁移至二层）的同时，确保资产的安全性和共识。因此，按各类Layer2扩容方案解决这两个关键问题的方法，可以有两个维度的区分：\\n\\n* 数据的计算和存储是放在链上处理，还是放在链下处理；\\n* 如何确保二层网络的资产安全和共识？是通过零知识证明机制、欺诈证明机制还是局部链下共识？\\n\\n![](https://images.mirror-media.xyz/publication-images/0C41zpxeejsbFXZkj4UX0.png?height=306&width=1368)\\n\\nLayer2扩容的发展现状是多种扩容方案并存。各类Layer2扩容方案在数据和共识机制的不同选择，实际上是在安全性、性能、可用性、扩展性方面做了不同的取舍，从而也决定了各类Layer2扩容方案适合不同的应用场景。比如：\\n\\n采用链上数据和零知识证明机制的ZK Rollup，在安全性方面最优，适合转账和交易类的应用；\\n\\n采用链上数据和欺诈证明机制的Optimistic Rollup，支持OVM智能合约，在扩展性方面较优，诸多以太坊应用都可以很方便的迁移升级；\\n\\n采用链下数据和零知识证明机制的Validium，在性能方面最优，但需要对数据公证人有信任。\\n\\n不同区块链项目需要根据具体业务的实际需求，选择最合适的Layer2扩容方案。\\n\\n### 2.3 知名Layer2扩容项目案例\\n\\n1、StarkEx\\n\\nStarkEx是StarkWare投资孵化的基于有效性证明（Vallidity Proofs）的以太坊Layer2扩容方案。\\n\\nStarkEx利用STARK技术为DeFi和NFT游戏等应用提供可扩展的自托管交易（交易和支付）。StarkEx可以显著扩展并提高交易速度、降低交易成本。\\n\\n目前，StarkEx已经支持ERC20、ERC721等代币和合成资产。此外，它还可以支持其他兼容EVM的代币。\\n\\n有不少知名项目使用StarkEx，包括：dYdX、Immutable、DeversiFi、Sorare等。\\n\\n2、Arbitrum\\n\\nArbitrum是由Offchain Labs开发的二层扩容方案，采用Optimistic Rollup技术提高链上合约的可扩展性、快速性和私有性，并且其开发者友好的设计与VEM全面兼容。\\n\\nArbitrum得益于先发优势，其Layer2生态已经初具规模。据L2BEAT数据，Arbitrum锁仓量已达22.9亿美元，占Layer2总锁仓量的60.36%。Arbitrum生态中Dapps数量已经超过56个，其中不乏1inch、AAVE、Curve等知名项目。\\n\\n3、Celer Network\\n\\n二层扩容平台Celer Network最为人称道的不是二层扩容，而是其推出的跨链支付网络cBridge。\\n\\ncBridge是一个基于Celer状态守卫者网络、支持高速低成本的跨链支付网络，用户可使用cBridge在Heco、Fantom、Optimism、Avalanche、OKExChain、xDAI、Ethereum、Arbitrum、BSC以及Polygon之间进行完全非托管、高速低成本的跨链和跨层转账。\\n\\n![](https://images.mirror-media.xyz/publication-images/H8nTT_4-3Y5aU5Cm84d2T.png?height=1098&width=1170)\\n\\n通过cBridge从Arbitrum转账到Optimism大概需要支付16U的费用，如果不使用跨层协议，则需要先从Arbitrum提出到Ethereum、再转账到Optimism，将需要支付超过100U的费用，而且耗时更长。\\n\\n## 三、Layer2扩容待改进的问题及发展趋势\\n\\n### 3.1 Layer2扩容的待改进问题\\n\\nLayer2扩容方案还有一些问题有待改进：\\n\\n1、有限的可组合性\\n\\n可组合性是DeFi的核心优势之一。可组合性创造了全新的金融产品，改变了人们看待金融的方式。但是，目前的Layer2网络会对可组合性产生限制，因为目前Layer2没有互操作性。\\n\\n在Layer1中，单笔交易可以与多个DeFi协议交互，打造全新的金融产品；在Layer2上，该交易只能与存在于其自身链上的DeFi协议进行交互。\\n\\n比如：假如DeFi协议1仅适用于Polygon，DeFi协议2仅适用于Optimism，则无法编写同时调用DeFi协议1和DeFi协议2智能合约的交易。\\n\\n由于这种不可互操作性，DeFi协议的可组合性收到限制，DeFi的魔力也将受到限制。\\n\\n对于可组合性问题，可尝试的解决方案是将所有Layer2连接到一个标准框架中。制定Layer2层的标准技术方案，以维持以太坊网络中DeFi协议的可组合性。\\n\\n2、有限的流动性\\n\\n流动性也是DeFi的核心优势之一。流动性在任何金融市场中都极其重要，拥有充足的流动性才能形成一个健康的市场、才能保证单笔交易不会引起价格的疯狂波动。\\n\\n没有Layer2之前，以太坊生态的所有流动性都存在于以太坊上，随着各大DeFi协议往Layer2层迁移，现有的流动性也将被分配到不同的Layer2协议上。虽然各个Layer2协议本质上仍与以太坊相连，但资金的流动性实际上是被分割的，从L2退出到L2时使用官方跨链桥需要等待很长时间，对用户体验特别不友好。\\n\\n对于流动性被分割的问题，很难完全解决。目前行业内的解决方案是发展跨链桥协议，以支持Layer2和Layer1区块链的跨链和跨层转账。比如Celer Network推出的跨链支付网络cBridge，这类跨链桥接协议的退出期比官方跨链桥快，但仍未完全解决流动性被分割的问题。\\n\\n### 3.2 Layer2的发展趋势\\n\\n1、以太坊主网和Layer2网络将各自承担不同类型用户的使用需求\\n\\n现在以太坊网络的Gas费成本已经非常高昂。\\n\\n据cryptofees.info数据，截至10月17日，Ethereum近24小时的Gas费高达6000万美元，近7天的日均Gas费超过4000万美元。单笔链上交易的平均Gas费超过30美元，如此高昂的交易成本，无疑会倒逼成本敏感型的普通用户选择更低成本的Layer2网络。\\n\\n当Layer2网络真正实现大规模普及时，不同类型的用户会根据具体的使用需求选择合适的网络。届时，使用以太坊主网的将以金融机构、鲸鱼、Layer2协议等机构和大户为主，更多普通用户将选择在Layer2进行链上交易。\\n\\n2、跨L2桥接网络协议将会有较大市场需求\\n\\n互联互通是一个永恒的需求。不同区块链之间有跨链需求，不同Layer2层协议之间有跨层需求。\\n\\n无论是以太坊团队还是以太坊生态的各DeFi协议团队，都不希望进入Layer2时代后把繁荣的以太坊生态分流成支离破碎的状况，二层网络之间需要保持互操作性。\\n\\n目前已经有多个团队在推进跨L2桥接网络的研发。StarkEx已经提出了一种无需信任、安全且廉价的StarkEx桥，它依赖于以太坊的安全性，通过在StarkEx和多个Layer2之间扩展这样的桥梁，实现Layer2协议之间的互联互通，保证Layer2协议 的可组合性和流动性。\\n\\n3、专用型Rollup可能比通用型Rollup更合适长期发展\\n\\n鉴于二层网络之间的互操作性比较不方便，而且单个Rollup不可能承接以太坊生态的所有应用。那么，必然会存在Rollup之间的竞争。除了扩容方案的技术选型之外，二层网络中的应用生态也同等重要。\\n\\n各类专用型Rollup可能会逐步形成。Dapp与Dapp之间有强关联和弱关联之分，强关联的Dapp可能会自发聚集在最适合该类应用的某个Rollup上，从而逐步将该Rollup发展成为专用型Rollup。比如：交易专用Rollup、储蓄借贷专用Rollup、NFT专用Rollup、GameFi专用Rollup等。\",\"timestamp\":1640744647,\"title\":\"以太坊Layer2扩容，大势所趋\"},\"digest\":\"ehFOCxUwvWmnmKDETtC_44xB2iOfcxK5PoxZAcQ5SWY\",\"authorship\":{\"contributor\":\"0x111F33a2C69b34500e6Acd4b21DD84bE679BFd47\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"yetE6B2Qy2em7lc6kSmlGvvzs5BJThfV2mPBSAcrWAI\\\",\\\"y\\\":\\\"yHtG0mCtgx3ZZuZFHJlxxcZnjI4ICg9i3jhEBuVgYu0\\\"}\",\"signature\":\"84Q48LXUJdINtMyDZkxEdcOi36Q9Mbkpo8eo2_FQfRNadO-4V-3HeW5eZbVW1jMFttRU5LtUwICwEGTQ9QgrmQ\",\"signingKeySignature\":\"0x6e3468dd270425c3ecb6ab1a8cfb8a618724a40ad55f20e819ac9ac30c994f493c0618378512472759f8467303aa21e1f281f46f4a7d7e01ca4c210fdfb592d61c\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"yetE6B2Qy2em7lc6kSmlGvvzs5BJThfV2mPBSAcrWAI\\\",\\\"y\\\":\\\"yHtG0mCtgx3ZZuZFHJlxxcZnjI4ICg9i3jhEBuVgYu0\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"8qoS1dlbVrXZNbjDKnyaH72DV6m7cuyQ_pqynUfTCbc\"}"