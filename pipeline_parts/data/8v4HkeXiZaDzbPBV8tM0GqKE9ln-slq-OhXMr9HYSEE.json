"{\"content\":{\"body\":\"![](https://images.mirror-media.xyz/publication-images/rgHE8kjqyCJJpmdcUbQtY.png?height=1183&width=1920)\\n\\n**如果您在过去两年中一直在[以太坊](https://moralis.io/full-guide-what-is-ethereum/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)上执行交易，那么您很可能经历过高昂的油费。除非我们考虑一百万美元交易的费用，高昂的油费是合理的，否则有一种更有利可图的方式可用——发送无油费的ETH交易。幸运的是，有一些优秀的工具可以让你在以太坊和其他几个著名的[EVM](https://moralis.io/evm-explained-what-is-ethereum-virtual-machine/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)兼容区块链上进行无油费交易。事实上，作为本文涵盖的示例项目的一部分，我们将使用名为“Fuji”的 Avalanche 测试网来完成此任务。但是，您可以在以太坊链上开发时应用相同的原则。** \\n\\n接下来，您将学习如何使用[Moralis](https://moralis.io/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)的终极[Web3](https://moralis.io/the-ultimate-guide-to-web3-what-is-web3/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)开发平台在以太坊和 Avalanche 的测试网上进行无油费交易。此外，我们将使用“Biconomy”，这将是在我们的示例 dApp（去中心[化应用程序](https://moralis.io/decentralized-applications-explained-what-are-dapps/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)）中启用“发送无油费ETH交易”功能的关键。如果您想充分利用本文，我们邀请您按照我们的指导与我们一起进行下面的示例项目。除了最终拥有您自己的dApp，它将在 Ethereum、[Avalanche](https://moralis.io/how-to-build-avalanche-dapps-in-minutes/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)、[Binance Smart Chain](https://moralis.io/bsc-programming-guide-intro-to-binance-smart-chain-development-in-10-minutes/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum) (BSC) 或[Polygon上提供无油费交易](https://moralis.io/how-to-build-polygon-dapps-easily/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)，您将了解其他详细信息，使您能够将Moralis用于其他Web3开发任务。\\n\\n因此，将其视为一张免费票，它将让您更接近于全职加密货币。[您还可以通过参加Moralis Academy](https://academy.moralis.io/)的一些高质量课程来采取更专业的方法。\\n\\n![](https://images.mirror-media.xyz/publication-images/OsPnrxNOEFf_2KDPNZY7t.png?height=900&width=1600)\\n\\n### 以太坊上的Gas是什么？\\n\\n在我们继续我们的示例项目之前，它将向您介绍以太坊上的无油费交易，我们需要确保您了解基础知识。所以，除非你能回答“以太坊上的gas是什么？” 有信心，请确保在继续之前涵盖此部分。 \\n\\n按照“gas”这个词的常见含义，以太坊上的 gas 也为某些东西提供燃料。具体来说，准确地说是[智能合约](https://moralis.io/smart-contracts-explained-what-are-smart-contracts/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)或交易。以太坊是领先的可编程区块链，也是第一个具有该功能的区块链。这使开发人员能够在其之上部署dApp和其他代币。本质上，您需要gas来支付所有交易费用。因此，gas是在以太坊上执行特定操作所需的计算量单位。此外，以太坊上的每笔交易都需要计算资源来执行（以太坊仍在使用工作量证明概念）。这意味着每笔交易都会产生费用。  \\n\\n![](https://images.mirror-media.xyz/publication-images/QPRMqX0M2edeLEUf193Wv.png?height=537&width=1042)\\n\\n交易费用或油费必须始终包含在原生代币中；在以太坊的情况下，这意味着需要ETH才能完成交易。此外，由于费用是ETH的一部分，它们被称为“Gwei”（又名“nano eth”）。另一方面，其他与EVM兼容的链使用权益证明概念，这可以大大降低交易费用。Avalanche就是其中之一，这也是我们决定在其测试网上开发示例项目的原因。\\n\\n此外，虽然这可能很明显，但我们还要指出**，*“无油费”意味着用户无需自己支付交易费用。但是，由于费用是必不可少的，不支付费用就无法完成交易，因此dApp的开发人员或所有者需要支付费用。*** \\n\\n## 在以太坊上提供无油费交易——示例项目\\n\\n如上所述，是时候让我们进行一个示例项目了，您将在其中学习如何在以太坊和其他与 EVM 兼容的链上进行无气体交易。此外，我们的项目将存在于Avalanche Fuji测试网上。首先，我们将对我们将要构建的dApp进行预览，这将使用户能够发送无油费ETH交易。一旦您清楚了解我们使命的最终目标，我们将帮助您正确设置。这包括创建您的Moralis服务器和Biconomy帐户。然后，我们会将您交给Moralis的一位专家，他将引导您完成代码并为您提供自己完成此示例项目所需的指导。 \\n\\n### 发送无油费ETH交易 – 示例dApp预览\\n\\n我们为此项目创建的dApp非常简单；然而，它达到了目的，这意味着用户可以在Avalanche 上发送无油费交易。当然，相同的原则可以应用于以太坊上的一个测试网（请参阅我们的[以太坊测试网指南](https://moralis.io/ethereum-testnet-guide-connect-to-ethereum-testnets/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)）、以太坊的主网或任何其他与EVM兼容的主网。 \\n\\n我们的示例dApp是一个简单的存储Web3应用程序，这意味着用户可以通过单击“编辑存储”按钮来存储字符串（见下图）。此外，由于我们在区块链上，存储该字符串意味着执行交易，在我们的例子中，这将为用户带来零费用。\\n\\n![](https://images.mirror-media.xyz/publication-images/cOungdQBb5Y1yVXLmjDT_.png?height=764&width=1600)\\n\\n我们已输入“Hello Moralis”作为新的存储数据。接下来，我们选择 EIP-712 签名选项（我们稍后会解释），然后单击“设置存储”按钮。这会提示[MetaMask](https://moralis.io/metamask-explained-what-is-metamask/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)进行确认： \\n\\n![](https://images.mirror-media.xyz/publication-images/jweErJYZp5190kip2Okba.png?height=872&width=1600)\\n\\n**这完成了交易，无需用户支付油费。这是在Biconomy的帮助下实现的**（参见上图的右上角）。这使开发人员能够进行设置，以便开发人员或dApp所有者可以自动支付gas费用。展望未来，在以太坊或Avalanche（在我们的例子中）上完成无油费交易后，我们得到新的存储状态：\\n\\n![](https://images.mirror-media.xyz/publication-images/n0jAY182PQSmZprL2Aeox.png?height=768&width=1600)\\n\\n## 在以太坊和其他与EVM兼容的链上提供无油费交易 - 初始设置\\n\\n如前所述，我们将指导您完成初始设置，该设置包括几个步骤。一方面，为了获得完整的后端功能，您需要创建免费的Moralis帐户。这使您能够创建Moralis服务器并访问[Moralis 的 SDK](https://moralis.io/exploring-moralis-sdk-the-ultimate-web3-sdk/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)，包括[Moralis Speedy 节点](https://moralis.io/speedy-nodes/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)。此外，结合Moralis，您还可以使用最终的[Web3 样板](https://moralis.io/web3-boilerplate-beginners-guide-to-web3/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)，它为您提供了上面预览部分中看到的许多组件。如果您想自己调整[以太坊样板](https://github.com/ethereum-boilerplate/ethereum-boilerplate)，请随时克隆其GitHub地址。[但是，您可以通过使用完成的代码](https://github.com/YosephKS/moralis-biconomy-metatransactions)采取额外的捷径 对于我们的示例项目，它也在GitHub等着你（有关说明，请观看本文末尾 6:07 的视频）。\\n\\n![](https://images.mirror-media.xyz/publication-images/67h0ftYPIq7W4NfWqgbPV.png?height=332&width=1169)\\n\\n此外，如前所述，您还需要设置您的Biconomy帐户。这将允许您在以太坊和其他与EVM兼容的区块链上提供无油费交易。幸运的是，这是一个简单的过程。尽管如此，您还需要一个代码编辑器（我们使用 Visual Studio Code \\\\[VSC\\\\]），您需要在其中安装包管理器（yarn 或 npm）和[Truffle](https://moralis.io/truffle-explained-what-is-the-truffle-suite/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)的所有依赖项。 \\n\\n设置好之后，您将能够完成编码以获得您自己的上述dApp版本。更重要的是，这将使您的用户能够在Ethereum、Avalanche、Polygon和BSC上完成无油费交易。 \\n\\n### 创建Moralis服务器\\n\\n以下是创建Moralis服务器所需遵循的步骤：\\n\\n1. **[创建您的 Moralis 帐户](https://admin.moralis.io/register?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)**– 如果您还没有 Moralis 帐户，请立即创建一个。只需单击链接，输入您的电子邮件地址，然后创建您的密码。不要忘记通过单击确认链接来确认您的电子邮件地址（您将收到一封电子邮件）。但是，如果您已经有一个活跃的 Moralis 帐户，只需[登录](https://admin.moralis.io/login?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)。 \\n\\n\\n2. **[创建 Moralis 服务器](https://docs.moralis.io/moralis-server/getting-started/create-a-moralis-server?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)**- 登录到您的 Moralis 帐户后，您将访问您的管理区域。确保选择“服务器”选项卡。然后，点击右上角的“+ 创建新服务器”按钮（如下图）。接下来，您需要从下拉菜单中选择最适合您需要的网络类型。*我们建议在处理示例项目时从“Testnet Server”选项开始。*\\n\\n![](https://images.mirror-media.xyz/publication-images/TlEVFHxuvk8Vanr-t4HrU.png?height=303&width=1600)\\n\\n然后您会看到一个弹出窗口，要求您提供服务器详细信息。因此，输入您的服务器名称（可以是您想要的任何名称），选择区域、网络、链，然后单击“添加实例”：\\n\\n![](https://images.mirror-media.xyz/publication-images/rxF0XkjC0N-SpF25sqivO.png?height=848&width=1400)\\n\\n**3.访问服务器详细信息**- 您的服务器可能需要几分钟才能准备好。不过，一旦它启动并运行，您可以通过单击服务器名称旁边的“查看详细信息”来获取其详细信息。您需要复制其中一些详细信息（服务器 URL 和应用程序 ID）并将它们粘贴到您的代码文件中。这将使您获得 Moralis 的后端功能（见下图）\\n\\n![](https://images.mirror-media.xyz/publication-images/frJIpQEHiwaQXwdlWABa-.png?height=389&width=848)\\n\\n**4.初始化 Moralis** – 要初始化 Moralis，您需要使用Moralis 服务器详细信息填充“.js”、“.html”或“.env”（如果使用[以太坊样板）文件：](https://moralis.io/ethereum-dapp-boilerplate-full-ethereum-react-boilerplate-tutorial/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)\\n\\n![](https://images.mirror-media.xyz/publication-images/WFi2bVYq7oBd70clpszaC.png?height=49&width=912)\\n\\n*注意：请勿使用上图中的详细信息。相反，请确保使用特定服务器的详细信息。*\\n\\n### 访问Moralis Speedy节点\\n\\n正如您将在下面的视频中看到的，您可以使用 Moralis Speedy 节点来部署智能合约。要访问此功能，您需要在 Moralis 管理区域中选择“快速节点”选项卡。在那里，您将能够单击所有受支持链的“端点”。在我们的案例中，我们决定与Avalanche合作。因此，单击Avalanche网络选项上的“端点”按钮：\\n\\n![](https://images.mirror-media.xyz/publication-images/YBgIIcxh0PLjQNegA-eEe.png?height=735&width=1600)\\n\\n单击 Avalanche 网络的“端点”按钮后（其他链也是如此），您将看到以下弹出窗口：\\n\\n![](https://images.mirror-media.xyz/publication-images/Lm3sKsv024-uZAOdOUEyT.png?height=429&width=1451)\\n\\n从那里，您只需单击您正在使用的网络旁边的“添加到 MetaMask”按钮。对于我们的示例，我们决定使用 Fuji（Avalanche 测试网）。在我们示例项目的一些代码文件中，您需要使用地址中突出显示的部分：\\n\\n![](https://images.mirror-media.xyz/publication-images/BPRG87oS-TV26CLGAnsUc.png?height=395&width=1255)\\n\\n### 设置 iconomy\\n\\n如前所述，Biconomy是一个值得信赖的转发器，它将成为在以太坊和其他与 EVM 兼容的链上为我们的用户提供无气体交易的关键。因此，您需要创建您的Biconomy帐户。因此，请访问 biconomy.io 并单击“仪表板”：\\n\\n![](https://images.mirror-media.xyz/publication-images/hI1CEbagXdTQ8btpUFMwl.png?height=606&width=1567)\\n\\n这将为您提供创建帐户的选项。只需输入您的详细信息，然后单击注册按钮：\\n\\n![](https://images.mirror-media.xyz/publication-images/yqOwwic2nOObgOEZ-Et3D.png?height=573&width=801)\\n\\n进入仪表板后，您将开始设置“转发”。在这里，您还需要确保您有足够数量的原生代币来支付所有用户的交易费用。 \\n\\n![](https://images.mirror-media.xyz/publication-images/yjuNF5rjTz4JWD4Dohqv-.png?height=371&width=1246)\\n\\n*注意：观看下一部分中的视频，该视频将指导您正确设置“转发”（26:45）并获取您将添加到代码中的详细信息。请记住，这部分对于发送无油费ETH交易至关重要。*\\n\\n## 在以太坊和其他与EVM兼容的链上进行无油费交易 – 代码演练\\n\\n一切设置正确后，您就可以仔细查看发送无气体 ETH 交易所需的代码了。为此，请务必查看以下视频，从 12:14 开始，Moralis 专家将首先向您展示用于在以太坊上进行无气体交易的智能合约的详细信息。 \\n\\n*注意：如果您尚未克隆最终代码，请务必观看 6:07 的视频并先完成该步骤。*\\n\\n通过观看视频，您还将了解如何使用逻辑文件部署智能合约的详细信息（视频在 21:35）。此外，在 23:48，您还可以看到如何使用“ShowTrace”，相当于用于 Avalanche的 Etherscan 或[BscScan 。](https://moralis.io/exploring-bscscan-full-guide/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)如果您还没有设置 Biconomy，请确保现在就设置（视频在 26:34）。接下来，您将涵盖代码的其余细节（“BiconomyProvider.js”、“index.js”、“App.js”、“index.jsx”和其他文件），包括 Moralis 集成，从 30 开始:05。此外，您将从 42:15 开始了解签名类型（“个人”和“EIP-712”）的详细信息。最后，您将看到示例 dApp 的运行情况（视频位于 47:38）。\\n\\n[https://youtu.be/r04x1YqnYLk](https://youtu.be/r04x1YqnYLk)\\n\\n## 如何在以太坊上进行无油费交易——总结\\n\\n如果您已完成设置并按照上面视频提供的说明进行操作，您现在拥有自己的 dApp，可在 Ethereum、Avalanche、BSC 和 Polygon 上提供无气体交易。通过使用 Moralis、Biconomy、Truffle 和 MetaMask 等强大工具的组合，您可以为用户提供发送无油费ETH交易的选项。此外，虽然您（作为 dApp 的开发人员或所有者）仍然需要支付交易费用，但用户体验变得更加愉快。因此，在其他类型的 dApp 中实现此类功能肯定会给您带来额外的用户积分。\\n\\n此外，我们需要指出，这个项目并不像我们的其他一些教程那样基础。因此，如果您发现它对于您当前的水平来说太高级了，请务必学习[如何构建您的第一个 dApp](https://moralis.io/build-your-first-dapp-ethereum-tutorial/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)。但是，如果您准备好迎接更有趣的挑战，这些挑战将扩展您的区块链开发技能，请务必查看[Moralis 博客](https://moralis.io/blog/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)和[Moralis YouTube 频道](https://www.youtube.com/c/MoralisWeb3)。我们的一些最新文章将向您展示如何[构建跨链桥梁](https://moralis.io/how-to-build-a-cross-chain-bridge/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)、如何[构建预测市场 dApp](https://moralis.io/how-to-build-a-prediction-market-dapp/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)、如何[创建 DAO](https://moralis.io/how-to-create-a-dao-in-10-minutes/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)、如何[使用 MetaMask 启动 Web3 应用程序](https://moralis.io/metamask-for-developers-how-to-launch-web3-apps-with-metamask/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)、如何[创建免费代币](https://moralis.io/create-free-token-how-to-deploy-your-own-testnet-crypto-token-in-10-mins/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)、如何[通过 SMS 消息获取 Web3 事件](https://moralis.io/get-web3-events-with-sms-messages/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)，如何[在 Binance Smart Chain 上创建 NFT](https://moralis.io/create-nft-on-binance-smart-chain-full-guide/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)，如何在[不支付 gas 费用的情况下免费](https://moralis.io/how-to-mint-nfts-for-free-without-paying-gas-fees/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)铸造NFT （[懒人铸造 NFT](https://moralis.io/how-to-lazy-mint-nfts/?utm_source=blog&utm_medium=post&utm_campaign=How%2520to%2520do%2520Gasless%2520Transactions%2520on%2520Ethereum)）等等。 \\n\\n![](https://images.mirror-media.xyz/publication-images/qna67GprzHloR3dqdHYNm.png?height=200&width=904)\\n\\n2021年12月21日\\n\\n原文链接：\\n\\n[https://moralis.io/how-to-do-gasless-transactions-on-ethereum/](https://moralis.io/how-to-do-gasless-transactions-on-ethereum/)\\n\\n\",\"timestamp\":1642166028,\"title\":\"如何在以太坊上进行无油费交易\"},\"digest\":\"dXIKxpHJmDS0jvaoxcyyOL1P8K8dLZ4kibKnOmMXQ14\",\"authorship\":{\"contributor\":\"0x005c0d08AF6B0C4b486916A7bd1F64b6fBaBB8D1\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"dS1nP3LjdCe7IrLSU25XxiZ7nwAFwZPLbJCYv921X3k\\\",\\\"y\\\":\\\"RgMbLPxjXAe0av9g4Qw_EQY8q_xar2n6bu4y5DdooAY\\\"}\",\"signature\":\"j0aNsGH_RvURPlfQfOxHqGv4A8vGaOqqiamn0ZZBs44SLbmrEiZiPA_D7lFdqhsI98jS0Za19DnwuXhrYKH95Q\",\"signingKeySignature\":\"0x0a48df43c42391f0fc177f1104c835b7441382c6e01ef83fd3331ddc784c6d445a680612a8deba77421601b6599f5f43ab2074187d7700c338a262246427d0a81b\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"dS1nP3LjdCe7IrLSU25XxiZ7nwAFwZPLbJCYv921X3k\\\",\\\"y\\\":\\\"RgMbLPxjXAe0av9g4Qw_EQY8q_xar2n6bu4y5DdooAY\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"dXIKxpHJmDS0jvaoxcyyOL1P8K8dLZ4kibKnOmMXQ14\"}"