"{\"content\":{\"body\":\"### Getting started\\n\\n* Create an AKS cluster in a existing VNET with advanced networking (aka Azure CNI plugin)\\n\\n```\\nrg=aksLab-rg\\nvnet=aksvnet\\nsubnet=akssubnet\\naksname=aksPacketWalkAzure\\naz group create -n $rg -l australiaeast\\naz network vnet create -g $rg -n $vnet --address-prefix 10.13.0.0/16 --subnet-name $subnet --subnet-prefix 10.13.76.0/24\\nsubnetid=$(az network vnet subnet show -g $rg --vnet-name $vnet -n $subnet --query id -o tsv)\\naz aks create -g $rg -n $aksname -c 1 --generate-ssh-keys -s Standard_B2ms -k 1.20.7 --network-plugin azure --vnet-subnet-id $subnetid\\naz aks get-credentials -g $rg -n $aksname\\n```\\n\\n* Create a VM what we will use as a jump host. Put it in a new subnet in the same Vnet.\\n\\n```\\nsubnet=vmsubnet\\nadmin_password=$uper$ecretPassw0rd\\nadmin_user=azureuser\\naz network vnet subnet create -g $rg-n $subnet --vnet-name $vnet --address-prefix 10.13.1.0/24\\naz vm create --image ubuntults -g $rg -n testvm --admin-password $admin_password --admin-username $admin_user --public-ip-address testvm-pip --vnet-name $vnet --subnet $subnet --os-disk-size 30 --storage-sku Standard_LRS --no-wait\\n```\\n\\nWhen the VM is ready, you will be able to SSH to its public IP address. In order to connect to the AKS nodes, you will need to generate a public/private SSH key pair. Add a public key into AKS VMSS nodes and Jump host node as well\\n\\n```\\n# generate authorized_key and push private key to jump host\\naksname=aksPacketWalkAzure\\nlocal_user=azureuser\\nvm=testvm\\naz vm user update -g $rg -n $vm --username $local_user --ssh-key-value ~/.ssh/id_rsa.pub\\n\\nscp ~/.ssh/id_rsa $vm:~/.ssh/\\n\\n# update aks nodes with public key\\naksname=aksPacketWalkAzure\\nlocal_user=azureuser\\nCLUSTER_RESOURCE_GROUP=$(az aks show --resource-group $rg --name $aksname --query nodeResourceGroup -o tsv)\\nSCALE_SET_NAME=$(az vmss list --resource-group $CLUSTER_RESOURCE_GROUP --query [0].name -o tsv)\\n\\naz vmss extension set  \\\\\\n    --resource-group $CLUSTER_RESOURCE_GROUP \\\\\\n    --vmss-name $SCALE_SET_NAME \\\\\\n    --name VMAccessForLinux \\\\\\n    --publisher Microsoft.OSTCExtensions \\\\\\n    --version 1.4 \\\\\\n    --protected-settings \\\"{\\\\\\\"username\\\\\\\":\\\\\\\"azureuser\\\\\\\", \\\\\\\"ssh_key\\\\\\\":\\\\\\\"$(cat ~/.ssh/id_rsa.pub)\\\\\\\"}\\\"\\n\\naz vmss update-instances --instance-ids '*' \\\\\\n    --resource-group $CLUSTER_RESOURCE_GROUP \\\\\\n    --name $SCALE_SET_NAME\\n\\n# test ssh\\nssh azureuser@nodename\\n```\\n\\naaa\\n\\naaa\",\"timestamp\":1642487182,\"title\":\"AKS Networking Lab\"},\"digest\":\"lL8fRcS4Eo3WysvT2IWJ20T8Wng3aRNlZM7EmtU7CWs\",\"authorship\":{\"contributor\":\"0x0894B4a989F758cb318379D93C3b39907B2421dC\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"zJ7c6RYGOhveYhtB54CeFZamSU5vbWLXzIdq7ZibNYk\\\",\\\"y\\\":\\\"_ecH1vemJDWWH9t72ctmIWYkrMjajJ-tINWHGNc2dO4\\\"}\",\"signature\":\"p_VdN_28QvsbVhc7dxZKSfKYi_8YprBj4rpT2-6L7kpNqGb1P-PvnIYPXEdttoaAFExzP1M7Ts0w4L1l0biCjg\",\"signingKeySignature\":\"0x6db920deb715c47007d203368a84c8d1065e7efb75801ff78e3ff4206af7c56806b32be4d74a5dd912943a8917182cacfbd790dc8ebea7d3146b4343d97293c81b\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"zJ7c6RYGOhveYhtB54CeFZamSU5vbWLXzIdq7ZibNYk\\\",\\\"y\\\":\\\"_ecH1vemJDWWH9t72ctmIWYkrMjajJ-tINWHGNc2dO4\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"Anb_7OeEp6rUCB46GwemcmD0_tPFxR0bEZ-uDV5jR-U\"}"