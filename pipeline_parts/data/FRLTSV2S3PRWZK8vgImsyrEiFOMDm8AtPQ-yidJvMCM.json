"{\"content\":{\"body\":\"一句话概括： 生成Door的代码完全部不随机！高度怀疑项目之前有利用漏洞定时mint稀有门（白门），普通人只能大概率接盘黑门。\\n\\n**代码有啥问题？**\\n\\n由于生成门的代码完全部随机，项目方（和科学家，但是这个project小估计没啥科学家）在mint之前可以提前知道哪些编号的门会是白门。然后可以通过监控mint的状态来定时抢走那些编号的门。\\n\\n**下一扇白门的编号是？**\\n\\n为了公平起见我可以透露一下，下一扇白门是 #7332，再下一扇是 #7456。 后面的也都可以计算出来。\\n\\n**代码具体的漏洞在哪里？**\\n\\n合约地址：<https://etherscan.io/address/0xf4794aEB9D243c024cf59B85b30ed94F5014168a#code>\\n\\n我们先来看看 StringifyDoor.sol 文件, 我们可以看到tokenid 被传到 random这个函数中来生成一个数字，然后取 那个数%100是否<1来决定是否生成白门。\\n\\n```\\n    /* White background color */\\n    if ((random(string(abi.encodePacked(toString(tokenId)))) % 100) < 1) {\\n        tokenType = 1;\\n        background = 'white';\\n    }\\n```\\n\\n但问题在，这个名叫random的函数完全部不随机，代码如下，基本上只是把tokenid hash了一下。\\n\\nfunction random(string memory input) internal pure returns (uint) {\\nreturn uint(keccak256(abi.encodePacked(input)));\\n\\n**项目方如何利用这个漏洞?**\\n\\n综上所述，token ID 完全决定了门的是白是黑。。所以在mint之前项目方（和科学家）早就知道应该mint那几扇门\\n\\n由于token ID是按照mint的时间按顺序发放的。由于这个项目不火，比方说已知7332门是白门，项目方只要等到有人mint了7331号门，然后赶紧mint下一个就可以抢走白门。 （保险起见也可以提前多mint几个）\\n\\n**你和项目方沟通过了吗？**\\n\\n沟通过了，他们大言不惭地说这是他们刻意这个做的，还是区块链就是这么运行的。。\\n\\n然后我一番说教后，问他们会不会停止mint然后把这件事情公开透明地告诉大家，他们态度很不好的说并没有此意，这个漏洞他们早知道了。\\n\\n**为什么要曝光**\\n\\n项目方态度太糟糕，不但割韭菜还嘴硬死不认账。 明明知道有问题还重启mint。\\n\\n**你靠这个漏洞挣到钱了吗？**\\n\\n没有，我如果想靠这个获利就不会曝光了。我也是这几天刚发现这个问题，刚发现就和团队沟通了。\\n\\n**我们应该干啥？**\\n\\n* 不要再mint了 （还要再mint 80多个才会等到下一个白门，到时候也会有一堆人和你抢）\\n* 要求项目方道歉！ （虽然看他们这副割韭菜的的德行大概率不会）\",\"timestamp\":1638049083,\"title\":\"【曝光】Stringify(Door)项目方的代码有严重问题\"},\"digest\":\"eJp8fAATMXxlJqBY1TrBDcF4uGoycVNNAhbi3MIEHP8\",\"authorship\":{\"contributor\":\"0x0BAd01F047A912a6a64d616C736BbB789295DD6e\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"B4lqebWCJLVz1nonQtyfVnZjaAxfnphuRVb-xhdnLNk\\\",\\\"y\\\":\\\"ndl0oECDVEUSYJmqQLyDQQwyte6rHDHEaAMsr0F8A0o\\\"}\",\"signature\":\"WQxUWlZxYt0lQ1jUvFbNu464WvMRm-2_NanTUcqp6DRMGshqZuscOWJZ55_ujxNqV2NXs9A_JPmmWTyo2o577g\",\"signingKeySignature\":\"0xff64c597fb47db8d4b954418cdd744a65153e4084bc1dd7de0efe13b0050d6b8469ccda467fcc087002bbee14401d7cec4bf92d6a7f3d1b80b8b4366f434d6401c\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"B4lqebWCJLVz1nonQtyfVnZjaAxfnphuRVb-xhdnLNk\\\",\\\"y\\\":\\\"ndl0oECDVEUSYJmqQLyDQQwyte6rHDHEaAMsr0F8A0o\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"npGMsGf6-cmou0vQ6E-aw9B7WlLTWRxpGxy5h7MD1dg\"}"