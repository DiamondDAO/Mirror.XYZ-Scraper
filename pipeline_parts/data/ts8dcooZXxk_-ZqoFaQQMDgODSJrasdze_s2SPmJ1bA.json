"{\"content\":{\"body\":\"最近在运维项目中遇到了需要用日志服务器来存储防火墙日志，问了好多人都不会搭建，没办法只能自己百度找教程，却没找到比较好的。\\\\\\n下面是我自己总结的比较简单的搭建方法：\\n\\n## **一、Kiwi_Syslog的安装**\\n\\n下载地址：链接：<http://pan.baidu.com/s/1mhVr84S> 密码：ptas\\n\\n1、 下载kiwi_syslog_server，解压后，运行Kiwi_Syslog_Server\\\\_9.5.0.setup.exe ，点 I Agree ；\\n\\n![这里写图片描述](https://img-blog.csdn.net/20171013142137985?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\n\\n![这里写图片描述](https://img-blog.csdn.net/20171013142121384?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\n\\n2、默认选项，然后点Next继续\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013142201533?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n3、默认选项，点击Next\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013142212953?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n4、（这里的意思好像是 安装网页的日志获取服务，具体看不懂，不安装不影响正常使用。）我这里将对勾去掉，然后点Next\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013142227057?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n5、默认设置\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013142237074?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n6、默认路径，点击install\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013142246771?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n6、如果在这里提示需要安装.net 3.5点击安装即可\\\\\\n（如果提示无法安装的话关闭就行，安装程序会继续的，但是需要在安装完成后手动安装.net 3.5）\\\\\\n7、完成后取消对勾点Finish\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013142304681?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013142313974?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n8、安装完成后在任务管理器中先结束掉syslogd_service的进程\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013142327487?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n9、将“Keygen注册机”文件夹中SolarWinds.Licensing.Framework.dll和ufmod.dll复制到软件安装目录“C:\\\\Program Files (x86)\\\\Syslogd”覆盖\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013142528422?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n10、打开桌面上的Kiwi Syslog Server Console程序\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013142600957?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n11、点击上方Help>>Enter license details选择第二个选项点Next\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013142635509?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n12、点击复制ID\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013142647656?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n13、然后打开刚才的“Keygen注册机”文件夹的“keygen.exe”\\\\\\n14、将ID复制进去，username随便填，时间默认就行\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013142840907?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n15、然后点Generate!导出文件到随便一个目录\\n\\n16、然后再回到刚才的软件点导入，选择刚才导出的文件\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013142937607?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n17、然后点完成后就会出现一个序列号的弹框，点Close关闭就行\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013142954430?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\n\\n这样安装和注册就已经完成了\\n\\n## **二、配置**\\n\\n1、点击左上角的File>>Setup\\\\\\n2、选择左侧Log to file\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013143041639?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n3、这里可以设置日志文件的存放位置以及存放格式\\\\\\nkiwi syslog软件收集的SNMP数据默认的保存方式是：以日期时间为序，在一个文件中保存所有设备的日志，每小时生成一个文件。这样的保存方式是很不利于查询各设备的log信息的，所以在比较新的版本中增加了以设备IP地址分开保存的方式，但软件上的设置选项并未明确提示，所以一般很容易忽略掉。应在log to files的选项卡中的保存路径和文件名选项中手工键入：\\\\sys%IPAdd4.txt 如下图\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013143119017?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\n\\n设置好后点Apply\\n\\n![这里写图片描述](https://img-blog.csdn.net/20171013143153954?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\n\\n4、再点击左侧Shedules，然后点击左上角的“新建”进行配置计划任务\\\\\\nSchedule字段添加日志计划频率（按小时算、每6个小时记录一次，一天记录4次）\\\\\\nSource字段（设置临时存储日志的路径）\\\\\\nDestination字段（设置最终日志存储目录）\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013143305542?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\n\\n我这里设置的是6小时记录一次，其他都是默认的\\n\\n![这里写图片描述](https://img-blog.csdn.net/20171013143413738?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\n\\n这里是最后保存log文件的位置，可以随意设置。我这里是默认路径\\n\\n![这里写图片描述](https://img-blog.csdn.net/20171013143529128?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\n\\n5、点击左侧Input>UDP修改Date encoding的值为Utf-8防止部分带有汉字的日志为乱码\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013143629392?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\n\\n这样配置就做好了\\n\\n**注意：如果以上操作都没问题后，需要重启服务器才可以正常使用**\\n\\n## **三、发送端的设置（比如：防火墙或者windows）**\\n\\n1、防火墙的话每个品牌的设置方法都不一样，我这里是网神的防火墙\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013143815917?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\n\\n具体请查询设备文档\\n\\n2、Windows的设置如下\\n\\n需要先下载Evtsys\\n\\n链接：<http://pan.baidu.com/s/1i4BeMZ7> 密码：5b1u\\n\\n解压后，先选择对应的系统文件\\n\\n![这里写图片描述](https://img-blog.csdn.net/20171013143951053?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\n\\n然后将文件夹里的全部文件拷贝到“C:\\\\Windows\\\\System32”目录\\n\\n打开Windows命令提示符\\\\\\n（开始>运行>输入CMD回车进入Windows命令提示符）\\\\\\n输入\\\\\\nevtsys.exe -i -h 192.168.100.1；\\\\\\n![这里写图片描述](https://img-blog.csdn.net/20171013144411658?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWNZYW9ZYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\\\\\\n注释：\\\\\\n\\\\-i 表示安装成系统服务\\\\\\n\\\\-h 指定log服务器的IP地址\\\\\\n这里的ip地址改成刚配置好Kiwi_syslog的服务器地址\\n\\n然后再启动该服务\\\\\\nnet start evtsys\\n\\n启动后会有中文提示：服务已经启动成功\\n\\n卸载该服务的命令是\\\\\\nnet stop evtsys\\\\\\nevtsys -u\\n\\n## **其他设备的设置**\\n\\n**1、 Cisco客户端设备配置**\\\\\\n进入到conf模式配置\\\\\\nR1#configure t\\\\\\nR1(config)#logging on #开启日志服务\\\\\\nR1(config)#logging host 192.168.100.100 #定义日志服务器IP地址\\\\\\nR1(config)#logging facility local7 #定义facility级别，默认为7\\\\\\nR1(config)#logging trap 7 #定义severity级别（0-7；日志记录级别 7表示全部启用）\\\\\\nR1(config)#logging source-interface e0 #日志发出使用的端口\\\\\\nR1(config)#exit\\\\\\nR1#show logging\\n\\n**2、 Huawei设备举例**\\\\\\nsystem-view\\\\\\n\\\\[Sysname] info-center enable #开启信息中心\\\\\\n\\\\[Sysname] info-center loghost 192.168.100.100 channel loghost #指定向日志主机输出日志信息的通道为 loghost 通道\\\\\\n\\\\[Sysname] info-center source default channel loghost debug state off log state off trap state off #关闭所有模块日志主机的 log、trap、debug 的状态（注意：由于系统对各通道允许输出的系统信息的缺省情况不一样，所以配置前必须将所有模块的需求通道（本例为loghost ）上log、trap、debug 状态设为关闭，再根据当前的需求配置输出相应的系统信息。可以用display channel 命令查看通道的状态）。\\\\\\n\\\\[Sysname] info-center source default channel loghost log level informational #允许输出信息的模块为所有模块 source：default\\\\\\ndisplay channel loghost #查看通道状态\\n\",\"timestamp\":1635998326,\"title\":\"windows下，Kiwi_Syslog日志服务器的搭建_耀一的博客-CSDN博客_kiwisyslog\"},\"digest\":\"sAKD7_dLaThNMY3UayAbG3giqWZXATWhDV9hUbDk9kc\",\"authorship\":{\"contributor\":\"0xE382a6E021e85AFD7Da98292101Ef6752E727E0e\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"cIuCDsnDT1bsnGqSFr09xqsg0DMdHi_ChJHrHNoOR8k\\\",\\\"y\\\":\\\"IWRtxwjzzJrWDWF7GP-9S9d8Uj4J-UbtG6x-Uwz42Fo\\\"}\",\"signature\":\"wsNZl2ymB8CpxCg_adVUF3RGydgtGqEn4nOH-1J7d5BuFUmOrz5i250qTmZRemdnc6YJOcfTuS3JBQ1EBvRKNA\",\"signingKeySignature\":\"0x3c1c5b890bb5929c8df6140bdd28f580bee3404c22341ebc14b9a70342fce5ed4ac521fcf954635909d03d895dbeebbd63c80695d17ed4081953f4ee7d591a7c1c\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"cIuCDsnDT1bsnGqSFr09xqsg0DMdHi_ChJHrHNoOR8k\\\",\\\"y\\\":\\\"IWRtxwjzzJrWDWF7GP-9S9d8Uj4J-UbtG6x-Uwz42Fo\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"sAKD7_dLaThNMY3UayAbG3giqWZXATWhDV9hUbDk9kc\"}"