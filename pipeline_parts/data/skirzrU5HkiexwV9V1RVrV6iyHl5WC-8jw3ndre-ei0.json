"{\"content\":{\"body\":\"> ERC721 做不到的，ERC1155 可以\\n\\n### ERC1155 的独特之处\\n\\nERC1155 的独特之处在于它使用一次性通过一个智能合约来代表多种代币。\\n\\nERC1155 的 `balanceOf` 函数和 ERC20 与 ERC777 的有所不同，他有一个独特的 `id` 参数来代表你想查询的代币，就像 ERC721 一样。\\n\\n但实际上 ERC1155 又与 ERC 721 略有不同：\\n\\n*   在 ERC721 中，`id` 和余额是无关，每一个代币都是 **Non-Fungible** 的，存在或不存在。ERC721 的 `balanceOf` 函数代表的是一个钱包里有多少个不同的代币，而不是每个不同的代币有多少。\\n*   在 ERC1155 中， `id` 与余额有关，我们可以知道每种代币的数量，NFT 也是其中的一种代币\\n\\n得益于这种设计思路，当我们需要多种代币的时候，能够大大的节省 gas（例如你要做一个炉石传说的 NFT，里面有各种卡牌），借助 ERC 1155，我们能够地轻易的搭建整个生态系统。\\n\\n### 批量化操作\\n\\n由于全部状态都存在一个合约中，因此我们可以在一笔交易中进行多项代币操作，这样效率可以大大提高。\\n\\n*   `balanceOfBatch` 一次性查询多个代币的余额\\n*   `safeBatchTransferFrom` 一次性转账多种代币\\n\\n### 实现 ERC1155 的 NFT 和标准代币共存\\n\\n在 ERC1155 中，一切都以代币形式存在，NFT 是存量为 1 的代币，独一无二；标准代币是存量大于 1 的代币。\\n\\n要达成上述目标，我们只需要修改在调用 `_mint` 函数是传入不同的数量参数，NFT 传入 1，标准代币传入大于 1 的数字。\\n\\n我们先来看下`_mint` 函数：\\n\\n![](https://pic4.zhimg.com/v2-fe1438261d6364535a9112c75240dc57\\\\_b.jpg)\\n\\n*   `account`: 代币存放地址\\n*   `id`: 代币序号\\n*   `amount`: 代币数量（关键点）\\n*   `data`: 额外数据\\n\\n然后我们来看看 OpenZepplin 给的示范代码：\\n\\n![](https://pic4.zhimg.com/v2-200430bfc4f9175bc854361a2c26b337\\\\_b.jpg)\\n\\n在上述代码中，我们可以看到 `GOLD`、`SILVER` 并不唯一，属于标准代币，而 `THOR_HAMMER` 只有 1 把，属于 NFT 代币。通过控制存量，我们就能实现 NFT 和标准代币的共存。\\n\\n还有一个值得注意的地方就是：在 ERC1155 中是不存在小数的，因此每一个代币都是独立不能分割的单位。\\n\\n### 相关阅读：\\n\\n*   *[EIPS-1155](https://link.zhihu.com/?target=https%3A//www.notion.so/un-Block-2021-17-Hermez-ERC1155-35dfc122b2554ddd96824207fd17878d)*\\n*   *[OpenZepplin: ERC1155](https://link.zhihu.com/?target=https%3A//docs.openzeppelin.com/contracts/3.x/erc1155)*\\n*   *[Token Standards: ERC20 vs ERC721 vs ERC1155](https://link.zhihu.com/?target=https%3A//medium.com/coinmonks/token-standards-erc20-vserc721-vs-erc1155-3106f1e3f2f3)*\\n\",\"timestamp\":1633782344,\"title\":\"ERC1155 - NFT 和标准代币共存\"},\"digest\":\"JZo_LtPasWfel1oGVTaObXN3bmKYWok0UlmcphIM_pQ\",\"authorship\":{\"contributor\":\"0x7B076d7BcdE88Ec322B2D01AA1ADc1997b7724f6\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"-uhmdAZYxFgq_x4xq-zXdui7hRToWKgI3gCLaeRwzfE\\\",\\\"y\\\":\\\"e_jae50XeRHkDjBd1dCU7xTq7o4HjO4Idn3X9qLgXmA\\\"}\",\"signature\":\"XwQ8pzP5VK_EH4PcXsL3OhAd8dsRF_-6K1_YKIsRm-B46jnN1XM2u-BIxGUn5v3MXc8Sc5pD51OhSZP8U4qlpw\",\"signingKeySignature\":\"0x0475273f3894cbe534b5ebf3dc9005f7b109c905b95b05fd0afb3d0dd6c056984938a186d9c56832d588e27230d06074bb752d52c6fbbffe3ddc0a71e38362d11c\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"-uhmdAZYxFgq_x4xq-zXdui7hRToWKgI3gCLaeRwzfE\\\",\\\"y\\\":\\\"e_jae50XeRHkDjBd1dCU7xTq7o4HjO4Idn3X9qLgXmA\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"JZo_LtPasWfel1oGVTaObXN3bmKYWok0UlmcphIM_pQ\"}"