"{\"content\":{\"body\":\"![](https://pic4.zhimg.com/v2-56eb7a99e2708b9c784611d989083523\\\\_r.jpg)\\n\\n自从接触区块链之后，发现自己的学习能力明显不足，技术与热点变化之快是任何一个行业都无法相比的。之前有大概一个多月的时间很忙，没有太关注区块链，结果发现自己已经跟不上节奏了。\\n\\n我认为未来区块链会像互联网一样颠覆我们生活的方方面面，为了不被落下，我每天会花1-2个小时学习区块链知识，即**“日拱一卒，功不唐捐”**。我会以笔记的形式不定期分享出来，让跟我一样对区块链入魔的小朋友对区块链有更多的了解，如果有写的不对的地方也欢迎指出。\\n\\n2015 年在伦敦举行的以太坊开发者大会上，EIP-1559 被提出，所以本次硬分叉升级被称作「伦敦」升级。北京时间 20 点 33 分，以太坊网络达到 12,965,000 的既定高度，完成「伦敦」升级，实施5项题案 ，包括 EIP-1559、EIP-3198、EIP-3529、EIP-3541 和 EIP-3554，其中 EIP-1559 是最重要且争议最大的，也是本文的主题。即使以太坊已经完成了「伦敦」升级，很多人还是会对 EIP-1559 有误解，本期的目的就是用简单的语言说清楚 EIP-1559 升级了什么。\\n\\n### **一、EIP -1559 升级了哪些内容**\\n\\nEIP -1559 的核心是**改革Gas的费用机制**和**加入区块松弛机制**。\\n\\n### **1、旧的费用机制**\\n\\n在以太坊上每执行一笔交易，都需要向矿工支付Gas，也就是交易费。当交易变得活跃，造成堆积时，网络就会拥堵，交易费就会上升。旧费用机制是密封一价拍卖模式，即用户之间的出价是相互保密的，矿工会优先打包出价更高的交易。旧机制带来了两个问题：**效率低**。由于保密性，用户很难在出价前知道别人出价，也就很难制定出价策略。比如，一个巨鲸为了尽快成交愿意出100美元，但其他人最高也只出价50美元，其实巨鲸只要出55美元就可保证他的交易被打包。**交易费用波动大。**虽然可以从ethgasstation上看到分别实现快速、中速和慢速的交易需要多少的Gas费，但Gas费还是会在某一段时间突然飙升，使得交易的完成存在一些不确定性。如果高估 Gas 费，则花了冤枉钱，如果低估 Gas 费，交易可能被 pending 很久。\\n\\n### **2、费用机制的改革**\\n\\n新的机制将费用分成**基本费（Base Fee）和小费（Priority Fee）。**\\n\\n*   基本费：由协议设定的公式计算，根据拥堵程度会自动调整。是用户需要支付的最低费用，交易完成后会自动销毁，也就是说，矿工得不到这部分钱；\\n*   小费：用户为了让矿工处理自己的交易而支付的费用，全部归矿工所有。\\n\\n另外，新机制增加了最高费用（Max Fee）。当基本费和小费之和小于最高费时，交易才会有效，超出部分会退给用户，即：退款额 = 最高费用 - (基本费 + 小费)。\\n\\n### **3、对新的费用机制的理解**\\n\\n**3.1 基本费相当于一个交易费用的参考标准**基本费的计算是内嵌在协议中的，根据当前的交易状况上下浮动。交易需求越高，基本费越高，具体规则见松弛机制部分。举个不太恰当但形象的例子，我们去银行存钱，发现小银行存款利率比大银行利率更高，这是市场行为导致的结果，因为小银行需要更高的利息才能吸引到客户。但利息相差又不大，因为各家银行的存款利率是参照央行的基准利率制定的。**基本费相当于由权威机构按照一定规则制定的标准，而小费则由市场决定。**比如用户可以根据当前基本费的一定比例作为小费，或者当基本费超过预设的最高费用时选择不出价。**这在一定程度上缓解了旧机制带来的信息不对称问题，同时也增加了费用的可预测性。注意：这里是说在一定程度上，新机制没有完全解决效率和费用预测问题。3.2 基本费销毁**首先，**基本费销毁可以防止矿工舞弊。**基本费是由固定公式自动调整的，而公式大家都知道，所以是能够被操纵的，矿工可以打包自己的交易提高区块使用率，从而提高基本费。由于基本费全部销毁，所以矿工就没有的这方面的动机。另外，基本费销毁也降低了以太币的通胀速度，形成了对币价的支撑，也变相增加了以太坊生态中所有参与者的收入。**3.3 小费还是密封一价拍卖模式**由于基本费销毁，小费就成了激励矿工的一个方式。小费其实跟旧机制没有区别，还是密封一价拍卖模式。\\n\\n### **4. 松弛机制**\\n\\n原来的以太坊网络的单个区块是有Gas上限的，如果Gas消耗完，这个区块就不能继续容纳其他交易了。也就是说，原来的以太坊上的单个区块的容量是固定且有上限。交易需求激增时，总是满块。**而 EIP-1559 可使区块的Gas上限临时加大以满足交易的需求，就像一家很火的饭店，屋里坐满了可以在屋外临时加桌子。**EIP-1559 通过两个参数来实现松弛机制，Gas limit和Gas target：\\n\\n*   Gas limit 是 EIP-1559 升级后**区块的最大容量**；\\n*   Gas target **是以太坊网络想长期维持的一个理想区块上限，也是原来以太坊网络的区块上限，是 Gas limit 的 50%**。\\n\\n为了将区块使用量维持在 Gas target，V神提出了基本费的调整规则：\\n\\n*   **当区块的 Gas 使用量超过 Gas target 时，协议会调高基本费；**\\n*   **当区块的 Gas 使用量低于 Gas target 时，协议会调低基本费。**\\n\\n估计这里有人会问，为什么要有 Gas target，区块容量加到 Gas limit 不好吗，能够将以太坊网络的性能翻倍？其实这里跟V神的理念的相吻合的。**如果区块容量提升一倍，处理速度虽然更快，但对现有客户端的负载也将加倍，大大提高以太坊网络的挖矿门槛。严重的话会减少节点数量，从而危害以太坊网络的安全性。**\\n\\n到这里，小伙伴应该能大致清楚 EIP-1559 升级的是什么了。本次升级后，**以太坊网络在大部分时间里区块容量是不变的，但通过松弛机制增加了灵活性，以应对突然的交易需求激增；以基本费为参考标准，通过改变基本费来调节短期的需求变化。**\\n\\n### **二、如果 EIP-1559 成功了会怎么样**\\n\\n如果 EIP-1559 的设计是成功的，我们在以太坊网络上交易体验会获得如下提升：\\n\\n*   **费用更加稳定：大部分情况下，我们只需要支付基本费加少量小费，；**\\n*   **交易确定性增加：不用再为 Gas 费的错误估计而等很久，大部分交易能在1-2个区块确认；**\\n*   **释放短期交易需求激增：即使短期交易需求激增，Gas费上涨，也会通过松弛机制很快的消纳需求，Gas 费会很快回到正常水平**\\n\\n### **三、EIP-1559 对矿工的影响**\\n\\n「伦敦」升级之前，矿工的收入主要来源于三个方面：\\n\\n*   **区块奖励：**一个区块有2个ETH奖励；\\n*   **手续费收入：**就是我们在钱包里输入了Gas费用；\\n*   **矿工可提取价值MEV：**矿工利用其对交易进行重新排序的能力以获得额外的利润。目前主要是外包给套利机器人。\\n\\n「伦敦」升级之后，区块奖励和MEV不受影响，减少的是手续费中基本费这块，这也是为什么很多矿工群体对这次升级反对的根本原因。其中有人引用经济学理论来抨击本次升级，说基本费的销毁实际上是一种税收，感兴趣的朋友可以看看《Eric Conner 知道自己在干啥吗：EIP-1559 的经济学分析》这篇文章。\\n\\n### **四、EIP-1559 不是你想的那样**\\n\\nEIP-1559 只是在原有基础上的改进，如果发生网络拥堵，费用机制就会进入原来的密封一价拍卖模式，过高的 Gas 费和交易延迟还会出现，这是以太坊网络本身性能的问题。客观的说，**EIP-1559 引入了费用标尺，增加了网络应对交易量激增的弹性，大概率能提高常规情况的交易体验，但在极端情况下，还是会出现之前的问题。**\\n\\n​\\n\\n### **五、以太坊小工具**\\n\\n最后分享几个小工具来监控 EIP-1559 的升级动态：\\n\\n*   查看太坊客户端的适配比例：[https://ethernodes.org/london](https://link.zhihu.com/?target=https%3A//ethernodes.org/london)\\n*   查看ETH销毁量：\\n*   *   [https://ultrasound.money/](https://link.zhihu.com/?target=https%3A//ultrasound.money/)\\n    *   [https://www.etherchain.org/burn](https://link.zhihu.com/?target=https%3A//www.etherchain.org/burn)\\n\\n***END***\\n\\n**====系列推荐====**\\n\\n[区块链从入门到入魔1：波卡（Polkadot）](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247484072%26idx%3D1%26sn%3D2524746ae4df284194966cc8d0a088db%26chksm%3Dcf30441df847cd0b257ea13e18a6c9dc70a9d35d9c902ea566533cea8185cfcae8af4ed0fec0%26scene%3D21%23wechat_redirect)\\n\\n[区块链从入门到入魔2：再述波卡（Polkadot）](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247484084%26idx%3D1%26sn%3Daadd5051a1bcf8848ab20497afe6f878%26chksm%3Dcf304401f847cd17201843c6ce29f0d5b5d24d35237b4c1ed6bd2d402164fd3bc6f4e13d69f1%26scene%3D21%23wechat_redirect)\\n\\n[区块链从入门到入魔3：波卡生态（Polkadot Eco）](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247484101%26idx%3D1%26sn%3D63be6da7bd27546041ed040ab1cdf78d%26chksm%3Dcf304470f847cd66083aa2dd5e0ecb08b9dc979dfa22f8b61e60c36f54308d67781c6dcddf10%26scene%3D21%23wechat_redirect)\\n\\n**====往期推荐====**\\n\\n[更加优雅的因子挖掘技术之自动化特征工程](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247483975%26idx%3D1%26sn%3De54a2cbce87b9a07cf41243a90080cf3%26chksm%3Dcf3044f2f847cde4c1bbabdaacd3ff358c781f0be8e54f09a156ca8d87f717f875fe00452e79%26scene%3D21%23wechat_redirect)\\n\\n[机器学习真的能预测价格吗？](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247483990%26idx%3D1%26sn%3D473d614fa98b35aafd6609fb2d358443%26chksm%3Dcf3044e3f847cdf51ba62a962212a37788f3a82fe5de5a8335146771baa53dd221f2539e17a2%26scene%3D21%23wechat_redirect)\\n\\n[因子投资“巫术”之遗传规划](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247483843%26idx%3D1%26sn%3D1302d20ebef569353a1d8552a2761719%26chksm%3Dcf304776f847ce60cf44158defb05a4ad8230ada04ffd04510c095d7d597a880e2fecd3a3c03%26scene%3D21%23wechat_redirect)\\n\\n[因子投资“巫术进阶”之遗传规划](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247483992%26idx%3D1%26sn%3D4cd94a52ffc093a78884eefd1d018112%26chksm%3Dcf3044edf847cdfbfde38e8e74ff16a02175523cff8c500537abc365339fda5dfd2b6fd67ff2%26scene%3D21%23wechat_redirect)\\n\\n[最通俗易懂的BERT原理与代码实现](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247484064%26idx%3D1%26sn%3D66dd2f2d78733c119b0109d21cdc3519%26chksm%3Dcf304415f847cd03fd230bda4fa606bd830a3481dd2bfc3f234bdafae387ff91265a9a9698fb%26scene%3D21%23wechat_redirect)\\n\",\"timestamp\":1634698546,\"title\":\"区块链从入门到入魔4：以太坊「伦敦」升级\"},\"digest\":\"H-wrkXp8ykSY4NEB391yh8njYUm791TiGLbZ1eRyV0M\",\"authorship\":{\"contributor\":\"0x10F751A20f61a1eA33Ebb91411Fae3F8Ff0E0ecf\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"QSYfzr_1RYLzL5qac7JqKH7FNPImhDdwfaLhdpPFa80\\\",\\\"y\\\":\\\"qHhpvdCm2kPLYaj0LEd90eHsWdc_Dek4yCWHIPncCQU\\\"}\",\"signature\":\"rURalMUaTfP0LMQ8F6lvl3sXKr6vzsNs2b4765Y6Cq2KmpSNX6lwMftBpeHqkh0mMk_5wjToJjr_ae-C7x-Ymw\",\"signingKeySignature\":\"0x622e3a56a1a4e4267587476ea4cadff66c2badc81808226ec3ab6bd59505a2de6d9e80a8f09062b51f79528b2ad79cd90dd0852f258c754b7473da909914e9b800\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"QSYfzr_1RYLzL5qac7JqKH7FNPImhDdwfaLhdpPFa80\\\",\\\"y\\\":\\\"qHhpvdCm2kPLYaj0LEd90eHsWdc_Dek4yCWHIPncCQU\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"H-wrkXp8ykSY4NEB391yh8njYUm791TiGLbZ1eRyV0M\"}"