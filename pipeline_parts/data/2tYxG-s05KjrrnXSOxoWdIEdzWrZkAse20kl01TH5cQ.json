"{\"content\":{\"body\":\"**Authors:** Maximino DiGiacomo-Castillo, Kun Peng, Ricardo Rosales, Nicolas A. Bax\\n\\nAt [Convex Labs](https://www.convexlabs.xyz/), we’re NFT fanatics. We believe that NFTs can revolutionize the art and collectibles spaces.\\n\\nAs described in Paradigm’s *[Guide to Designing Effective NFT Launches](https://www.paradigm.xyz/2021/10/a-guide-to-designing-effective-nft-launches/)*, NFT launches are often unfair to the average user. Hasu and Anish Agnihotri describe several pitfalls which can give sophisticated users an edge and allow such users to extract value from both creators and other collectors.\\n\\nOne common design error is what Hasu and Anish Agnihotri term “exploitable fairness”. Part of the fun for buyers of NFTs is the “[gacha game](https://en.wikipedia.org/wiki/Gacha_game)” aspect: buyers may get a common NFT, or if they’re lucky, they may get an NFT with rare traits, which can sell for several fold more than their common (“floor”) counterparts. To be fair, NFTs should be minted randomly. However, sophisticated users are constantly on the lookout for ways to increase their odds of minting or buying a rare NFT.\\n\\nWe have developed and deployed tools for the purpose of gaining an advantage when buying NFTs and we aren’t the only ones; we’ve observed others using such tools for months and recently numerous paid services such as traitsniper.com have appeared. Today, we’re open sourcing our tools, describing how we use them, and how we can detect when someone else has used similar methods to gain an advantage in an NFT launch.\\n\\nOur cheating tools work by finding metadata before it is available to the average user, and then using it to acquire more rare NFTs during the minting process, or by buying unrevealed NFTs before the metadata is uploaded on OpenSea. Similar cheating can also be carried out by project insiders.\\n\\nWe detected a lot of cheating using methods similar to ours and some instances are described here. Our hope is that spreading awareness about such tactics will prompt the NFT community to demand provably fair NFT drops.\\n\\n# How to use our tools to cheat at NFT launches\\n\\n**Step 1. Acquire metadata**\\n\\nFirst, you’ll need to find the token metadata for the collection you’re targeting. Check the token’s URI to see if it is pointing to an IPFS page or website with metadata. If it is, we’ve provided a script called *[pulling.py](https://github.com/Convex-Labs/honestnft-shenanigans/blob/master/metadata/pulling.py)* that takes the contract address as an input and then rapidly scrapes all of the metadata for an NFT collection.\\n\\n![Our pulling script takes the ERC-721 contract address as an input and then rapidly scrapes the metadata.](https://images.mirror-media.xyz/publication-images/JeZ2agPJwtvgn_i9RV_Y0.png?height=925&width=1400)\\n\\nIf you can find the metadata before the initial sale is complete, then you’re golden — just proceed to step 2 to identify which NFTs are worth minting, and then try to mint those.\\n\\nWe’ve observed many different mechanisms that projects use to hide their metadata. The most common is to hide the metadata until after an NFT launch is complete and then update the metadata on the project’s website. In other cases, the metadata is stored on IPFS and updated by changing the base token URI. We’ve had some success finding leaked metadata by querying OpenSea’s API or by scouring testnets and Arweave, where devs occasionally leak the IPFS hash for their metadata. Even if this method doesn’t yield metadata, it can provide other valuable insights.\\n\\n![A sophisticated user describes the process they used to analyze an NFT project prior to its launch. (No metadata was leaked in this example.)](https://images.mirror-media.xyz/publication-images/CVTx3sR3_jAJ6QFW9LJCR.png?height=750&width=591)\\n\\nSometimes we were unable to find the full metadata but were able to find leaking images. In this scenario, we just use a “for” loop to download all of the images, and then look through them manually for traits that we know are rare.\\n\\n![A simple for loop can be used to scrape leaking NFT images before minting and/or reveal.](https://images.mirror-media.xyz/publication-images/32p47OJPa3xtA1tcKE9mn.png?height=389&width=490)\\n\\nWe have also observed instances where we were unable to find leaking metadata, but someone else was still able to gain an edge in minting. There are numerous possible explanations for this observation. One is that we were unable to find publicly leaked metadata whereas someone else was. An alternative explanation is that an insider possessed information — insiders may be directly related to a project, or they could be a 3rd party that is hosting the project’s metadata.\\n\\n**Step 2. Calculate Rarity**\\n\\nThere is a strong correlation between NFT price and perceived “rarity.” The most widely used website for NFT rarity is rarity.tools, and they use the same algorithm to generate rarity ranks for almost every collection.\\n\\n![Sale price as a function of rarity rank for the last 200 MekaVerse NFTs sold. (As of 10/20/2021)](https://images.mirror-media.xyz/publication-images/94oBL-tHIpAQvvngJ1HMd.png?height=718&width=1036)\\n\\nOur *[rarity.py tool](https://github.com/Convex-Labs/honestnft-shenanigans/blob/master/metadata/rarity.py)* uses the metadata from step 1 as an input and then outputs the rarity score and rank for each NFT in a collection.\\n\\nOne thing to look out for is that the rarity score methodology does differ slightly; for some collections, rarity.tools uses “number of traits” as an attribute, but for others it doesn’t. Some collections also have custom rarity scores which will need to be scraped separately. Now that you have the rarity for every NFT in a collection, go on to step 3.\\n\\n*Note: we dislike rarity.tools’ ranking methodology but that’s a subject for a different article.*\\n\\nWe noticed that early on during NFT summer, a lot of NFT minters/buyers that we think were anomalously lucky weren’t using calculated rarity scores. Instead, we believe that they were simply scraping the metadata and looking for NFTs with a single very rare trait, as opposed to combinations of somewhat rare traits which together made an NFT rare. As time progressed, we noticed that some of the buyers began calculating rarity scores as described here.\\n\\n**Step 3. Minting or buying**\\n\\nNow that you have rarity data for the entire collection, it’s time to buy. If the collection is still in the minting phase, then you can try to mint the NFTs that you know are rare. To do this, check Etherscan manually, or better yet, write a bot that gets the tokenID of the last NFT that was minted. When the next NFT to be minted is the one you want, just send your minting transaction. Depending on the rate at which minting is occurring, this can be done manually or you may need to use a bot to time your transaction just right.\\n\\nBecause most launches allow batch minting, you may need to mint multiple common NFTs in order to snag a rare one. In some cases, you may also find multiple rare NFTs that you can mint in the same transaction, particularly when the NFTs aren’t randomly distributed.\\n\\n![This anomalously lucky user minted 5 BlazedCats. The 5th was rare and could be sold for a price that easily offset the cost of the other 4.](https://images.mirror-media.xyz/publication-images/apHe-1bcm4oDMPqVjOOrU.png?height=271&width=623)\\n\\nSince you know you’ll profit off the rare NFT, you can sell the other ones at or even below what you paid to mint them.\\n\\nThere is also one well-described example where someone used a [smart contract](https://github.com/Anish-Agnihotri/blog-effective-nft-launches-data/blob/master/01-exploitable-fairness/meebits/exploit.sol), along with flashbots, to guarantee that they only minted rare NFTs.\\n\\n**Step 4. Pre-reveal Sniping**\\n\\nEven if the mint phase of an NFT launch is concluded, or you weren’t able to obtain leaked metadata, you can still gain an edge in the next phase of the NFT launch. Many projects reveal their metadata after minting has concluded. However, there is a delay between when metadata becomes available and when OpenSea has finished updating. During this period, you can rapidly run the scripts we provided to obtain metadata and rarity scores and buy any rare NFTs that people listed for sale prior to reveal.\\n\\n# Detecting “Anomalously Lucky” NFT Buyers\\n\\nOur tools can also be used to detect buyers that we call “anomalously lucky.” To do this, you’ll need rarity data for an NFT collection, as well as a list of NFTs minted by each buyer.\\n\\nWe’ve provided rarity data for some projects on [github](https://github.com/Convex-Labs/honestnft-shenanigans/tree/master/metadata/rarity_data) or you can use our tools to get rarity data for other projects.\\n\\nOnce you have rarity data, the next step is to collect minting data for a collection as shown in [find_minting_data.ipynb](https://github.com/Convex-Labs/honestnft-shenanigans/blob/master/fair_drop/find_minting_data.ipynb). This will give you a database of every NFT minted by each account, and its rarity rank.\\n\\nEvery collection is different and you may need to tweak which statistical tests you’re using but we’ve provided some basic tools and data to help you get started.\\n\\nA good first start is to run a Kolmogorov–Smirnov (K-S) test on the minting database — we have an example of this in [ks_test.ipynb](https://github.com/Convex-Labs/honestnft-shenanigans/blob/master/fair_drop/ks_test.ipynb).\\n\\nThe “null hypothesis” that our [K-S test](https://en.wikipedia.org/wiki/Kolmogorov%E2%80%93Smirnov_test) is attempting to reject is that a user minted NFTs randomly. The K-S test checks whether the rarity rank of all NFTs minted by a user may arise from a uniform distribution. In certain cases, such as when NFTs weren’t randomly distributed or part of the collection was gifted instead of minted, the probabilities get more complicated and you may want to generate synthetic datasets which consist of the NFTs an account should have had a chance to buy.\\n\\n![A histogram showing the rarity ranks of DogeX NFTs minted by an anomalously-lucky user (red), and an average user (blue).](https://images.mirror-media.xyz/publication-images/aJgKPq00vtAJfwAQCClil.png?height=441&width=829)\\n\\nOur K-S test code will run through every account that minted multiple NFTs from a collection and outputs some data about the lucky accounts. Our code can also be modified to identify accounts which bought minted NFTs before the metadata reveal.\\n\\n![Example output for the two luckiest accounts that minted DogeX NFTs.](https://images.mirror-media.xyz/publication-images/uFEnIj5Ry6RFeMWqHHmRp.png?height=277&width=531)\\n\\n![Blue dots represent each NFT in the DogeX collection. Black dots represent DogeX NFTs minted by an anomalously lucky account.](https://images.mirror-media.xyz/publication-images/7IgHYqJ1wuozvfaK6mL9d.png?height=564&width=835)\\n\\nInterpreting the output of these statistical tests is nuanced. A p-value of 1E-5 does not guarantee that an account was grifting — if looking across hundreds of thousands of accounts, we would expect to occasionally find people who are that lucky. *(A p-value of 1E-22 on the other hand…)*\\n\\nWe also took a close look at several instances where members of the NFT community alleged that an account had grifted, and found that the accounts being accused were just slightly lucky (1% or 0.1% chance of occurring, absent additional non-statistical or off-chain evidence).\\n\\nThe K-S test may also give low p-values if the NFT collection itself wasn’t truly random. Conversely, just because an account *doesn’t* have an anomalously low probability also doesn’t mean that an account *wasn’t* grifting. In fact, we are confident that most of the accounts *we* used would not be identifiable by any statistical test, and we definitely aren’t the only ones clever enough to remain undetected.\\n\\n# More Shenanigans\\n\\nWe used our scripts to take a close look at many NFT drops. Most showed no signs of anomalies and probably were executed in a fair manner (although not provably so!) However, during the course of our research we observed several other types of anomalies.\\n\\n**Non-random distribution of traits**\\n\\nAs alluded to by Hasu and Anish Agnihotri, we also observed many NFT collections that did not have a random distribution of rarities. In certain cases, this means that sophisticated buyers can increase their odds of minting a rare NFT, even if they can’t guarantee the exact number they will receive because minting is occurring quickly.\\n\\n![Great Ape Society Bananas showed an unusual distribution of rarity ranks.](https://images.mirror-media.xyz/publication-images/tzG-7Kq5c9of8yyoluhie.png?height=586&width=896)\\n\\n![Quaks had non-random rarity distribution. As a result, most users who minted towards the end of the launch would appear to be anomalously lucky.](https://images.mirror-media.xyz/publication-images/IemNtLC_ZTjHvCnDVwsC2.png?height=426&width=694)\\n\\n**Non-Standard Minting Processes**\\n\\nWe observed numerous NFT launches where the minting process for rare NFTs was unusual and randomness was impossible to verify. For example, one project made unverifiable claims that users were randomly selected off-chain to receive the rarest NFTs in their collection. These NFTs had a significantly higher resale value than the remainder of the collection, which was minted “first come, first serve”.\\n\\n![Some projects have a special minting process for rare NFTs.](https://images.mirror-media.xyz/publication-images/kkGKn_h0-n1_icwOcZsqq.png?height=539&width=845)\\n\\n![A Discord message from an NFT project leader which describes how they randomly selected accounts to airdrop the most valuable NFTs to, along with instructions for verifying that the airdrop was fair.](https://images.mirror-media.xyz/publication-images/v34BeuITm96BJNCSNK3KA.png?height=336&width=707)\\n\\nWe use a metric that we call the “first flip” metric to gauge how profitable minting and reselling is for a given collection. In this particular collection, about 50% of the total profit came from the NFTs that were distributed using the random selection process described in the Discord screenshot above. *Note:* *This metric can’t rule out wash trading.*\\n\\n![Screenshot showing the profit from reselling 8 Bit Universe NFTs after mint by token ID. About half of the first flip profits came from token IDs 1–100, which were given out after minting concluded.](https://images.mirror-media.xyz/publication-images/-_FU5upuJ5021eDC9_JYm.png?height=823&width=1277)\\n\\n**Unverifiable Commits**\\n\\nWe observed several projects that claimed to be using a provably random [commitment scheme](https://en.wikipedia.org/wiki/Commitment_scheme) to select NFT metadata where we were unable to find the commitment prior to token minting, nor were we able to verify that the metadata was generated after minting had concluded.\\n\\nWhenever a launch does not use a commitment-reveal scheme, it is impossible to rule out that project insiders are not changing metadata of NFTs they minted or bought on the post-secondary market.\\n\\n# How Can We Level The Playing Field?\\n\\nWe want the NFT space to succeed but we think that the shenanigans we have observed are extracting value from most users which is detrimental to the long-term health of the ecosystem.\\n\\n1. **Provable fairness:** Cryptographic schemes for provably fair NFT drops already exist and we have already seen some projects utilize them. We hope that by spreading awareness about information asymmetries in NFT metadata, consumers will demand provable fairness from projects they patronize. We would be happy to audit NFT launches with regards to randomness but ultimately we want consumers to learn about the magic of cryptography.\\n2. **Fair metadata reveals:** Rather than relying on third parties such as OpenSea and rarity.tools to provide users with NFT metadata, projects should make NFT metadata available themselves immediately after it is revealed, thus negating part of the edge from scripts such as our [pulling.py](http://pulling.py).\\n3. **Enough with the “first come, first serve” NFT launches:** As described in the Paradigm article, “first come, first serve” launches disadvantage the average user and revenue that could be going to artists and projects is instead going to miners. We didn’t go into it much in this article but we agree with Paradigm —please stop doing your launches that way!\\n\\n# Join Us\\n\\nWhat we’ve shown here is just the tip of the iceberg. We have plenty of ideas for other methods to identify cheaters and are eager to hear ideas from the community. If you’re interested in joining our mission to research suspicious activity, drop by our [Discord channel](https://discord.gg/ZZZNETQc4W). To incentivize contributors, we’re setting up a bounty fund which we’ve seeded with our profits from sniping NFTs with leaked metadata. If you just want to follow along, follow [HonestNFT](https://twitter.com/Honest_NFT) and [Convex Labs](https://twitter.com/convex_labs) on Twitter and check out our new project’s [website](https://www.honestnft.xyz/).\",\"timestamp\":1635184875,\"title\":\"A Guide to Effectively Cheating NFT Launches (and detecting cheaters)\"},\"digest\":\"feP72sMymoNZbtjnHJTdlVY-_PLKbl2PiYcHIaxX_Qo\",\"authorship\":{\"contributor\":\"0x303C0b189D2179C50865a621fC9188eEF04f6992\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"3NWhQvsEEBLvIkHZug4kc8Xwz1x6vIejh1PSAKoz5lc\\\",\\\"y\\\":\\\"K-RjZA9FO080AbNnkkekHzmQYwRvJmXkgGqrT4o7-Xs\\\"}\",\"signature\":\"SHvaLBnfe2GpHnb5ZczjlKk4kXZlhzL5JN9vtZ_K4cDTtqmwJ4wYCkZfYaV_U1nf2g0JZibL82H8YNPh8wjRHg\",\"signingKeySignature\":\"0x147948ba112c020de15669b64dfe1ab36198ed42e80a8aec0f09e72de22dd3ba2f57c0a304521e5f751ce69909031e640c5f9be1fb94a0a92207dc58053108131c\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"3NWhQvsEEBLvIkHZug4kc8Xwz1x6vIejh1PSAKoz5lc\\\",\\\"y\\\":\\\"K-RjZA9FO080AbNnkkekHzmQYwRvJmXkgGqrT4o7-Xs\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"feP72sMymoNZbtjnHJTdlVY-_PLKbl2PiYcHIaxX_Qo\"}"