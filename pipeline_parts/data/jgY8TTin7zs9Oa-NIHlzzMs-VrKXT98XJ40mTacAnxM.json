"{\"content\":{\"body\":\"## 概论\\n\\nMetis 旨在彻底改变人们和企业使用区块链技术进行协作的方式。 然而，以太坊等第 1 层解决方案正在努力应对高gas成本和低吞吐量。实现复杂的协作成果并成功部署 涉及许多需要及时响应的链上操作的框架，第 2 层解决方案 是 Metis 实现其使命所必需的。本文提出了一个新的构造——乐观的 提供效率和灵活性的汇总第 2 层解决方案，解决了许多 现有的第 2 层解决方案的问题。 Metis 虚拟机 (MVM) 是必备的基础 彻底改变人员和组织的集体协作方式所需的组件 并在未来透明。\\n\\n## 介绍\\n\\n当前的 DAO 架构仅专注于高效的投票系统或治理。Metis 将 DAO 定义为支持和管理去中心化运营的基本单元或企业的应用程序，我们发现在不信任的社区成员之间建立信任 管理分散的合作才是真正的挑战。在 Metis，我们相信 未来在于日常运营的分散、自主管理 去中心化组织称为去中心化自治公司（DAC）：一个系统实体 支持组织的日常运营，包括大型企业的日常运营。\\n\\n要构建一个允许复杂结构的 DAC， 超越的合作成果 那些标准的金融平台，一个 EVM 兼容或至少图灵完备的需要第 2 层解决方案。 根据需求，METIS 团队 决定采用乐观汇总的第 2 层基础设施。\\n\\n## 问题\\n\\n目前，以下是许多流行的乐观汇总第 2 层解决方案的一些重大问题：\\n\\n1. 标准的第 2 层设计通常非常中心化。其中许多构造从单个音序器复制中心化结构， 依靠验证机制阻止恶意玩家 欺诈行为。这种设计导致了第二个问题。\\n2. 完成交易通常需要很长时间。特别是当有是需要从第 2 层构造退出到第 1 层。 完成交易可能需要很多天。\\n3. 这反过来又会导致第 2 层出现瓶颈。由于许多第 2 层解决方案的构建方式，第 2 层的吞吐量最终会受到中心化堆栈的限制。如果目标是 要将 DApps 带入主流，我们必须要解决第 2 层解决方案的规模化问题。\\n\\n为了解决这些问题并满足对 DAC 操作不断增长的需求，Metis 设计并 使用名为 Metis 的 EVM 兼容虚拟机实施了新的第 2 层解决方案 虚拟机 MVM。以下部分重点介绍了许多新的设计功能 使 MVM 在其他第 2 层解决方案中脱颖而出。\\n\\n## 计算和存储分离终极可扩展性\\n\\n在 MVM 中，构建所有 DAC 的协作，每个去中心化自治公司 (DAC) 都与一个唯一的第 2 层相关联 。 在第 2 层的以太坊构造中MVM 将计算和存储分离 。更具体地说，DAC 创建仅触发创建 专门用于该 DAC 的新存储层。作为 Metis系统，计算部分，包括区块挖掘 和跨层通信，允许 Metis 水平扩展而不会导致 在基础设施方面的大量支出。每个 DAC 内经济活动的收入将 能够轻松支付基础设施成本。\\n\\n此外，MVM 允许提供商注册并贡献计算能力来制作 Layer 2 构建真正的去中心化。提供者将根据产生的区块获得激励。 关键是提供商可能不知道将使用哪个 DAC。它有助于确保 不会有恶意算力提供商的针对性攻击\\n\\n![图-1](https://images.mirror-media.xyz/publication-images/pcj4W7GVnImULJbppFtof.png?height=1070&width=1336)\\n\\n作为 MVM 设计的一部分，L1 合约知道如何处理状态根、交易和 来自不同 L2 合约的提案。每个交易批次和状态根也有一个链 ID 附加到有效负载。 chainID 是每个第 2 层构造的唯一标识符，也是 用于跨层签署交易。 当需要创建 DAC 时，作为 Comco 协议的一部分，第 1 层上的智能合约 将为新构造生成唯一的链 ID，注册到 Metis 管理智能合约并触发 Metis 微服务部署存储单元。\\n\\n![图-2](https://images.mirror-media.xyz/publication-images/ZxroyajMQ2uy7z9C1AMy-.png?height=186&width=1300)\\n\\n每个 DAC [将被分配到metisdao.org](http://xn--metisdao-ul7mrng73gsy2j5pxa.org) 下的一个唯一子域名，用户将在其中 能够直接通过子域名与DAC交互\\n\\n## DAC 章程管理 操作规则\\n\\n与实体经济中的组织一样，DAC 也有章程来设定其基本运营 规则。 MVM_DACMaster 是一个智能合约，它规定了  在第 2 层 的DAC 在 MVM 上的操作。智能合约是创世区块的一部分，包括以下重要内容 DAC的相关资料：\\n\\n1. vision:string 和mission:string——DAC 的目的 \\n2. permissions:{address:string\\\\[\\\\], operation:string, opcode:string}\\\\[\\\\] – 一组 可以在 MVM 第 2 层上执行某些操作的地址，包括 基本读/写访问。\\n3. taxrates:{threshold:int, rate:int}\\\\[\\\\] – 定义机制如何 在DAC 内的交易以及征税。 \\n4. management_contract:address – 定义更改DAC 章程的内容的过程 ，例如类似 DAO 的投票机制或简单地 基于智能合约集是不可变的。\\n\\n该章程将在创世期间创建。初始设置将在第一次完成 在创世之后阻止并作为 DAC 创建过程的一部分。管理合约将是 之后唯一可以修改章程的签署人。唯一的例外是税率，即 由 MetisDAO 管理的 Metis 才可以设置。\\n\\n## MVM 第 2 层权限管理\\n\\n在任何组织中，结构和权限是控制有效工作的两个重要因素。作为 MVM 的一部分，我们引入了一个灵活的权限系统，可以管理 访问特定的第 2 层 DAC，其粒度与操作码级别一样\\n\\n在 DAC 宪章中，每个操作码都与允许或 禁止在执行过程中执行操作码。 MVM_ExecutionManager，其中 负责执行操作码，在执行操作码之前检查权限。 实现了广泛的缓存，以最大限度地减少权限检查期间的执行影响 。权限实现的一些示例包括但不限于：\\n\\n1. 只有一小部分签名者可以部署智能合约——这可以 允许 DAC 更好地控制自己的生态系统，包括代币 分配。 \\n2. 只有DAC参与者被允许提交交易——这里的配置可以创建一个许可的 DAC。 \\n3. 部分签名者被禁止提交交易——这样， DAC 可以将有毒成员或恶意用户列入黑名单。\\n\\n![图-3](https://images.mirror-media.xyz/publication-images/bbRNwQKbdJpiBfPaC37J0.png?height=568&width=1276)\\n\\n最后，权限层完全是可选的。 MVM 仍然可以是无许可的 第 2 层结构。\\n\\n## 基于IPFS的特殊存储层进行管理机密数据\\n\\n另一个重要的难题是 MVM 的特殊存储层。 MVM 有一个常规的存储 层来存储块和状态。但是，对于某些 DAC，会有敏感信息表明 他们不想在 DAC 之外公开。因为所有的交易都打包到L1 潜在的争议场景，区块链上的机密数据仍可在外部访问 DAC。加密通常被用作应对这一挑战的解决方案。然而，加密 和解密操作将需要一个集中的服务管理器并提供对 加密密钥对。在 Metis，我们决定使用 IPFS 来解决这个问题\\n\\n![图-4](https://images.mirror-media.xyz/publication-images/BFns3ELqfvaqcIgCU1zaw.png?height=1284&width=1348)\\n\\n## 有许多重要的考虑因素\\n\\nIPFS 集群只能通过 MVM 上的 IPFS 解析器访问 第 2 层. 可以通过宪章控制对 IPFS 解析器的访问 权限规则。每个第 2 层链上的 IPFS 解析器携带一个唯一的 对标识符进行编码的密钥，以便其他第 2 层 DAC 将无法 访问机密数据。 2.为了与大多数现有客户端保持兼容，用户将调用方法 通过与处理最常见事务的常规事务相同的节点 签名支票等功能。 MVM 的 IPFS 路由器会拦截 IPFS 相关操作，以便这些操作不包含在汇总中。 3. IPFS 交易不会上卷到 L1，否则，目的是 一个特殊的存储层被击败。但是，用户应该保存 智能合约中的文件句柄。事务保存句柄 是一项常规交易，将汇总并准备好防欺诈 挑战。因为保存句柄不会影响其他状态，所以事实 L1 无权访问 IPFS 集群不会影响防欺诈\\n\\n## 显着减少防欺诈窗口\\n\\n在所有汇总解决方案中，防欺诈始终是权衡的一部分。乐观汇总通常 带有很长的防欺诈窗口，让 Rangers 有足够的时间来验证状态根源。 长窗口使得撤回 L1 的效率大大降低。作为 MVM 的一部分，我们的目标是最小化时间窗口， 通过分散汇总过程和下推状态根来防止欺诈窗口 验证。 基于，将计算和存储分离的工作，rollup 过程不会 不再由单个音序器处理。将随机选择一组音序器来 汇总状态根并提交交易\\n\\n此外，MVM 引入了一个称为 L2 Ranger 的独特角色。 L2 Rangers 是 称为 MVM_RANGERS 的特殊 DAC。游骑兵能够对一系列区块进行采样并进行验证 根据从随机 DAC 定期分配的事务，状态根，包括 MVM_RANGERS 本身。每个完成的验证都将获得 Metis Token (MT) 的奖励， 如果验证发现差异并且挑战过程将被撤回到 L1 自动启动。成功的挑战将奖励验证者一部分保证金。一个失败的 挑战将导致验证者失去抵押债券并最终失去对 MVM_RANGERS 的访问权限。\\n\\n以上所有工作都是为了让仲裁机制更加公平，对游骑兵更具吸引力。和 分散排序和健康的 L2 游侠池，MVM 将大大缩短 需要打样窗口，以进一步提高网络效率\\n\\n![图-5](https://images.mirror-media.xyz/publication-images/cQC1YVsmtEncn3swOUSQn.png?height=1000&width=1286)\\n\\n## 动态测序仪绑定到保护网络\\n\\n阻止恶意定序器欺诈行为的另一个重要机制是债券。每个排序器都需要质押一定数量的 Metis 代币才能获得资格。但是，那 Metis 生态系统具有强大的、真实的经济联系，交易价值可以在 数十亿。恶意行为的风险和回报开始向更危险的方向倾斜 边。因此，MVM 引入了一个称为动态绑定阈值 (DBT) 的概念\\n\\nDBT 是根据给定 DAC 的最大经济容量计算的，即总供应量的 MVM_Coinbase 。如果特定排序器的质押 Metis Token (MT) 数量低于 DAC 的 DBT，定序器不能参与 DAC 定序工作。当一个 MT 存款和取款操作执行，DBT 将会自动更新。如果没有 在存款操作后符合条件的 排序器池中的排序器，该操作将 阻塞，直到找到合格的排序器。\\n\\n![图-6](https://images.mirror-media.xyz/publication-images/ua_xEcXR34jLGRMKy0Kf1.png?height=952&width=1324)\\n\\n## 无限扩展微服务框架\\n\\nMVM 支持微服务框架的基本原理。 oracles、delivery等提供者 service 或legal 可以在MVM 生态系统中注册为微服务提供者。他们作为 所有 DAC 的工具包，以帮助实现使命和愿景。 MVM 支持自动付款 收藏。服务提供商将获得一个 SDK 以方在第二层和任何智能合约进行交互 ，包括收款，以降低进入壁垒。它允许服务 不熟悉区块链技术的供应商加入生态系统。\\n\\n这种架构支持无限扩展 MVM 生态系统中可用的服务 以及连接链下的关键部件 和 区块链经济\\n\\n![图-6](https://images.mirror-media.xyz/publication-images/eXUmROB1_YDSAMUcbGdIM.png?height=758&width=1268)\\n\\n## 概括\\n\\n具有排序器、块生产者（计算）、IPFS 集群提供者、服务提供者和 护林员，MVM 解决了许多流行的第 2 层解决方案中最紧迫的问题，并构建了一个 系统既高效又去中心化。 在 MVM 的支持下，Metis 创建了一个生态系统，以构建基于 第 2 层。我们相信这是组织、社区和经济的未来\\n\\n![图-7](https://images.mirror-media.xyz/publication-images/DCWObVAQoJeqxz9CAjKXp.png?height=968&width=1358)\\n\\n\",\"timestamp\":1640946775,\"title\":\"Metis 白皮书 2021年版本\"},\"digest\":\"LJtwobuSu3zfQbIkNOpssGi4VPhFXhWBaLnkbEsXiGs\",\"authorship\":{\"contributor\":\"0xab722fcb8902c3B98c622db66E0b3247F7691eCA\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"p5QcaJcizzw2bkzTav5RUt7DENZUEQiC-tUMl2xM7m8\\\",\\\"y\\\":\\\"zkmxGQII79y15eC2xjpA8XW9u_lzcAUYvRoxktrgyi0\\\"}\",\"signature\":\"SIaiJ6tS4moTQvtlW8Q4wBAHi-KfYIQ0R3U5V-w4Zt_xvixBBtPgyVqmgRxF9TQ4vy30JSDAIKkwYUPzu3zOGw\",\"signingKeySignature\":\"0x3c3bfbb4b181f365339639b6b32062fb0fb28d2944afc403da03451183a7b16547a94819b2dc5eac64c44d4c035d859cac05106913381efb75aa46772c41f53c1b\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"p5QcaJcizzw2bkzTav5RUt7DENZUEQiC-tUMl2xM7m8\\\",\\\"y\\\":\\\"zkmxGQII79y15eC2xjpA8XW9u_lzcAUYvRoxktrgyi0\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"LJtwobuSu3zfQbIkNOpssGi4VPhFXhWBaLnkbEsXiGs\"}"