"{\"content\":{\"body\":\"# 去中心化金融-DeFi\\n\\nDeFi的全称是Decentralized Finance，即“去中心化金融”，也被称为“开放式金融”，可以认为是基于区块链技术实现的一系列金融类应用。\\n\\n早在2019年，DeFi应用便展露头角，2020年的DeFi summer更是引爆了数字货币市场，整体锁仓量节节升高。\\n\\n在介绍DeFi之前，先简单的回顾一些区块链的基础概念。\\n\\n## 以太坊和智能合约\\n\\n目前为止，大部分的DeFi项目都还是在以太坊链上进行的，正是以太坊智能合约这个创新设计，使得金融服务去中心化成为了可能。那么什么是智能合约呢？\\n\\n### 智能合约(Smart Contract)\\n\\n所谓智能合约，就是一种运行在区块链上的程序。和普通程序不同的是，智能合约要保证在区块链网络的每一个节点中运行的结果完全相同，这样才能使任何一个节点都可以验证在挖矿产出节点生成的区块里，智能合约执行的结果对不对。\\n\\n以太坊提供了一个EVM（Ethereum Virtual Machine）虚拟机来执行智能合约的字节码，一个智能合约程序被编译后就是一段EVM字节码，将它部署在以太坊的区块链时，会根据部署者的地址和该地址的nonce分配一个合约地址，合约地址和账户地址的格式是没有区别的，但合约地址没有私钥，也就没有人能直接操作该地址的合约数据。\\n\\n![](https://images.mirror-media.xyz/publication-images/Rivj3L1x5eMiQt2TbRcXn.png?height=806&width=1220)\\n\\n要调用合约，唯一的方法是调用合约的公共函数。这也是合约的一个限制：合约不能主动执行，它只能被外部账户发起调用。如果一个合约要定期执行，那只能由线下服务器定期发起合约调用。\\n\\n此外，合约作为地址，可以接收Ether，也可以发送Ether。合约内部也可以存储数据。合约的数据存储在合约地址关联的存储上，这就使得合约具有了状态，可以实现比较复杂的逻辑，包括存款、取款等。\\n\\n## DeFi介绍\\n\\n### 传统金融困境\\n\\n在进入去中心化金融的介绍之前，我们先来讨论一下中心化金融，也就是传统金融存在的一些问题。\\n\\n![](https://images.mirror-media.xyz/publication-images/6VvaoLGpKzrGkwNYbcDVw.png?height=666&width=1000)\\n\\n大家都清楚的记得，2008年雷曼兄弟破产事件，引起了全球的金融海啸。以往的我们可能总是认为，金融机构是很安全的，尤其是大银行，是存放资金最安全的地方之一。但雷曼兄弟事件告诉了我们，让权力和资金集中于银行手中是相当危险的，**因为普通投资者无法充分了解金融机构的运作**。而区块链技术正很好的解决这个问题，可以消除一切的黑箱操作。\\n\\n那么传统金融，存在哪些困境呢，总结来说有这几个方面：\\n\\n* **支付与清算成本高**：不同金融机构清结算的成本可能会非常高，比如跨国转账需要支付很高的手续费用等等。此外，收款人可能还需要好几个工作日才能收到这笔钱。\\n* **不可获取性**：截至2017年，有17亿人没有在金融机构处持有账户，其中一半以上来自发展中国家,他们没有银行账户的主要原因包括贫困、地理位置和信任\\n\\n  上的问题。对这些人群来说，获得银行服务是十分困难的一件事。\\n* **暗箱操作**：只要是人来管理，那就存在风险。信息不对称是目前传统金融最令人诟病的问题之一。2008年的金融风暴就是金融业大量杠杆投资复杂衍生品下的暴雷，许多一般投资者皆承担了损失\\n\\n而DeFi的出现，就能很好的解决上述问题。DeFi的操作流程简单、透明，借贷手续可在几分钟之内完成；且节省了昂贵的中间费用，有效降低了金融的交易成本。\\n\\n### 什么是去中心化金融\\n\\n了解了中心化金融的困境之后，现在可以再回到主题了，去中心化金融到底是什么？\\n\\n可以认为，去中心化金融DeFi是一场，能够让用户在无需依靠中心化实体的情况下进行金融服务的运动。这些金融服务是基于区块链由去中心化应用(Dapp)提供。\\n\\nDeFi不是单个产品或公司，而是一系列替代银行、保险、债券和货币市场等机构的产品和服务。\\n\\n**对投资者来说，既是金融工具，又是投资对象**\\n\\n也有人把DeFi定义为是**去中心化托管的开源金融协议**\\n\\n### DeFi生态系统\\n\\n目前DeFi生态里主要可以拆出这么几种赛道\\n\\n![](https://images.mirror-media.xyz/publication-images/wZYH-u2engyR9jykchm2N.png?height=849&width=600)\\n\\n* 稳定币\\n* 稳定币\\n* 借贷\\n* 交易所\\n* 衍生品\\n* 资管\\n* 聚合器\\n* 预言机\\n* 保险\\n* 中间件(仪表盘)\\n\\n## 稳定币\\n\\n加密货币的价格极不稳定。加密货币的日内价格波动通常会超过10%。为了减缓这种波动，锚定诸如美元等稳定资产的稳定币被创造出来。\\n\\n稳定币通常锚定美元等法币或者其他价值稳定的资产，因此为加密货币市场带来了难得的稳定性。全世界任何地方的人都可以持有稳定币\\n\\n稳定币从本质上来说是一种具有“锚定”属性的加密货币，其目标是锚定某一链下资产，并与其保持相同的价值。为了保持价格稳定，稳定币可以由链下资产做抵押（即抵押稳定币），或采用某种算法在某个时间点调节供需关系（即算法稳定币）。\\n\\n目前存在两种类型的稳定币，即**中心化的稳定币和去中心化的稳定币**。\\n\\n### 中心化稳定币Tethers(USDT)\\n\\n比较典型的一个中心化稳定币，就是众所周知的Tethers，也就是usdt\\n\\nTethers 是由一家名为 Tether ltd 的中心化加密公司发行的， 公司表示，每一 Tether 正好值一美元，因为他们每发行一个usdt就往银行账户里面存入一美元，也就是每个 Tether 都有价值 1 美元的资产做背书。\\n\\n在2019年泰达公司表示将原本承诺的100%保证金制度，改为了部分准备金制度。也就是说公司可以拿一部分钱进行其余投资。所以在3月31号这份报告当中，也没有具体显示存入银行的保证金是多少，剩余资产占比以及具体类目。\\n\\n也就是说，像Tethers这样的稳定币，也是存在暴雷风险的，我们并不知道Tether公司有多少钱，而Tether公司还在不断的增发稳定币。财务数据不透明的中心化一直在usdt如今备受诟病的。同时国际四大会计事务所，拒绝为泰达提供财务审计工作。\\n\\n### 去中心化稳定币\\n\\n去中心化稳定币其实又主要分为，资产抵押型(如)DAI，以及各种算法稳定币。\\n\\n#### 超额抵押稳定币DAI\\n\\nDAI 同样是通过**资产抵押**发行， DAI 是通过**超额抵押数字资产**，**去中心化**发行。\\n\\n它是用一套称之为Maker的智能合约发行的，其背后的团队为MakerDAO。\\n\\nMaker体系中有一个实现了抵押贷款逻辑的智能合约（CDP）， 当我们抵押（发送）ETH到智能合约，合约根据当时ETH的价值，计算一个**折扣**后，发行对应的DAI（符合ERC20标准的代币）。这个折扣在Maker系统中称之为**抵押率**\\n\\n假设以太币现在价值200美元，抵押率为200％，那么把1个以太币（200美元）发送到CDP智能合约，就可以获得发行的100个DAI。\\n\\n在抵押ETH生成DAI的同时，合约会为我们生成一张**CDP借贷凭证**，它记录着借贷关系及金额，并且抵押ETH会一直锁定在合约里，在还清100个DAI时，ETH将归还我们。 就像银行扣押房子直到我们还清贷款一样。\\n\\n类似房屋抵押，如果我们的房子价值下降，银行会要求我们追加抵押物或及时还款，Maker也是一样，始终要求DAI是超额抵押的。如果资产下跌到一定值（如抵押率150%），并且原抵押人没有追加抵押物或偿还（部分）DAI，合约会自动启动**清算（liquidated）**，之前抵押的以太币被拍卖，直到从CDP合约借出的DAI被还清。 Maker也是使用这种方式从市面上回购DAI用来偿还给CDP。\\n\\n##### 权益代币MKR\\n\\nMKR 是整个 MakerDAO 体系中的管理型和权益型代币。MKR的持有者可以参加MakerDao的治理，比如增加新的抵押债仓种类、修改已有抵押债仓种类、修改敏感参数、修改目标价变化率、选择可信任的预言机、调整喂价敏感度和选择全局清算者七个风险系统行为投票。\\n\\n在用户赎回抵押的以太坊时，需要支付 MKR 作为稳定费，这种情况下MKR 会被销毁。随着使用Dai的人越来越多，稳定费也会越来越多，销毁的MKR也就越来越多，MKR也就越来越值钱。从这个意义上讲，可以把MKR看作一个通缩体系，MKR的持有者可以从Dai的广泛使用中获取收益。\\n\\n##### 清算\\n\\n1. 在发生清算后， 就再也无法通过偿还DAI来取回之前抵押的ETH了（CDP借贷凭证会关闭）。\\n2. 清算发生时，会扣除一部分的罚金（13%的罚金）和手续费。\\n3. 拍卖ETH得到的DAI 会被销毁， 就像用户偿还DAI 被销毁一样。\\n4. 拍卖偿还DAI后， 剩余的资产用户可以拿回。\\n5. Maker系统中有一个专门负责清算的合约。\\n\\n##### 暴跌应对\\n\\n不管如何 DAI 都是超额抵押， 如果以太价格急剧下跌，抵押品的价值达不到借出的DAI的价值时，这时启动清算，将由Mkr持有者负责回购。\\n\\nMkr 是Maker系统中的权益代币， Mkr持有者是系统的收益者，获取借款利息及罚金等。\\n\\n还是前面的类比，如果价值200万房子， 突然跌倒100万以下， 这时候在公开市场拍卖，市场是没有买家出100万以上购买房子的，那么银行将启用自有资金回购。\\n\\n相当于损失的价值转嫁到Mkr持有者，价格波动是没发消灭的，它只能转移，DAI的价格波动性实际由CDP 借贷凭证持有者和Mkr持有者共同承担。\\n\\n#### 算法稳定币\\n\\n算法稳定币，顾名思义就是一种依据算法调整市场货币总量，在稳定币价格高于锚定价格时增加市场供给，在稳定币价格低于锚定价格时后回收供给，或者以提供套利空间平衡稳定币价格。这种模型的成立，不锚定现实法币、无需抵押稳定币，全凭市场意愿和算法进行调控，市场又称之为弹性货币。\\n\\n##### Ampl为代表的Rebase类\\n\\nAmpleforth是算法稳定币中最具知名度的一个，它通过增加或减少AMPL的供应量，以使AMPL的价格维持在一美元附近。与其它类型的稳定币项目不同，Ampleforth使用rebase操作来整体改变所有用户持有的AMPL。rebase时参考的价格以过去24小时的成交量加权平均价为准，当该价格高于1.05美元时，所有用户钱包中的AMPL余额同时增加；价格低于0.95美元时，所有用户的AMPL余额同时减少。在这个过程中，用户持有的AMPL在供应量中的占比并不会发生变化。\\n\\nAMPL这类rebase类型的代币天然更适合在Uniswap这类去中心化交易所中交易，去中心化交易所可以通过算法自动完成rebase操作，增加或减少钱包余额。而中心化交易所需要先获取链上的余额变动，再在用户钱包中增加或减少余额，在这过程中的转账、交易等功能较难实现。gate.io就曾因为没有及时跟进链上的rebase，导致用户与自身损失。\\n\\n当市场下跌时，AMPL难免也会遇到抛售，而随着AMPL的价格低于1美元，持有的AMPL价值在因为价格下跌而缩水的同时，用户手中的AMPL代币数量还会减少，这会扩大用户的恐慌情绪，导致进一步的抛售。在下跌时，AMPL很容易形成死亡螺旋；在上升时，容易形成螺旋上升。\\n\\n因此，在牛市时，AMPL的表现通常会优于其它加密货币，但在熊市中同样会表现较差，相当于市场的放大器。2020年7月，AMPL的数量增发了57倍，在价格下跌58%的情况下，市值反而增长了23倍。\\n\\n##### 算法稳定币并不稳定\\n\\n当前的算法稳定币项目都还处于实验阶段，并不能实现价格的稳定，甚至会放大市场的波动。算法稳定币非常依赖机制的创新，某些机制直接来自于学术论文。如果能够设计出足够优秀的机制，算法稳定币才可能逐渐被大规模应用。\\n\\n## 去中心化交易所\\n\\n由于用户在交易所中并不拥有其资产的所有权，因此中心化交易所仍具有很大的风险。2019年，超过2.9亿美元的加密货币被盗，同时超过50万条登录信息从交易所泄漏出去。\\n\\n而去中心化交易所DEX则通过使用智能合约和链上交易来减少或消灭对中介的需要。\\n\\n总而言之中心化交易所的缺点其实很明显：\\n\\n* 交易所服务器一旦出现问题，投资人就无法登陆做交易，严重点就是早上登进去钱还在，晚上一看钱亏没了。\\n* 交易所跑路\\n* 身份验证等安全性问题, 怕被盗号。\\n\\n而去中心化交易所也主要有两种类型，**基于订单簿的DEX和基于流动性池的DEX**。\\n\\n像dYdX和dex.blue那样的订单薄DEX的运作方式与CEX类似，用户可以按限价或市价提交买卖订单。两种类型的交易所之间的主要区别在于，对于CEX，交易资产需要保管在交易所钱包上，而对于DEX，交易资产可以保管在用户自己的钱包上。\\n\\n基于订单薄的DEX面临的最大问题之一是流动性。用户在订单薄中的订单可能需要等待很长时间才能成交。为了解决这个问题引入了基于流动性池的DEX。流动性池本质上是智能合约中的代币准备金，而且用户可以立即买卖流动性池中的可用代币。\\n\\n### AMM自动化做市商模型\\n\\nAMM是DeFi市场最大的创新之一，正是由于基于区块链的AMM机制的横空出世，使得去中心化交易所可以发展成今天如此庞大的市场。\\n\\n可以把 AMM 设想成一个原始的、机器人式的做市商，它根据一个**简单的定价算法**，在两种资产之间随时提供**报价**。比如恒定乘积型AMM中，其持有的每种资产的单位数相乘，总会等于一个常数。\\n\\n这里对恒定乘积型AMM模型，进行进一步的讨论：\\n\\n假定池子里拥有一些 x 代币，拥有一些 y 代币，它给每一笔交易定价，所以，它拥有的 x 的最终数量，和拥有的 y 的最终数量，两者相乘会等于一个常数 k。这就形成了一个常数积的等式：**x \\\\* y = k**。\\n\\n假设我们在某个池里投入 50 个苹果 （a） 和 50 个香蕉 （b） ，任何人都可以用苹果换香蕉，或者用香蕉换苹果。假设一级市场中苹果与香蕉的**汇率刚好是 1:1**。因为该 Uniswap 资金池中分别有 50 个苹果和 50 个香蕉，因此，按上述常数积的等式规则，a \\\\* b = 2500 。对于任何交易，Uniswap 都需要保证，池中库存的苹果数和香蕉数相乘等于 2500。\\n\\n如果她买走一个苹果，我们的池里就剩下 49 个苹果，而 49\\\\* b 依然需要等于 2500。这样香蕉的总数 b 就等于 51.02。由于之前池中有 50 个香蕉，因此我们**还需要 1.02 个香蕉**（在这个宇宙中我们允许碎片化香蕉的存在） ，因此，这位客户买一个��果会得到的报价是：1.02 香蕉 / 苹果。\\n\\n![](https://images.mirror-media.xyz/publication-images/lyAO-wpAfKeRpnWumbxEN.gif?height=580&width=580)\\n\\n如果她想买 10 个苹果， DEX的报价会是 12.5 个香蕉，即这 10 个苹果每个的单价为 1.25 香蕉 / 苹果。\\n\\n如果她想要执行 25 个苹果这种**大额交易**，即要买库存苹果数量的一半，那么，单位价格会上涨到 2 香蕉 / 苹果！ （你能从直觉上明白这一点，因为池中的一种商品减半，另一种就得翻倍）\\n\\n重要的是需要明白，报价不能偏移x\\\\*y=k的定价曲线。\\n\\n#### 流动性挖矿\\n\\n由上面的模型可以知道，假如池子里有庞大数量的代币(苹果/香蕉)，那交易时的报价就会愈发准确，**价格滑点**会更低。所以一些 AMM 通过提供代币奖励来鼓励提供流动性。 有了这些 AMM，流动性提供者通过一种称为“流动性挖矿”的做法赚取红利。除此之外，DEX当然还是要像交易者收手续费的，手续费最后会分发给所有的流动性提供者。\\n\\n参与流动性挖矿，用户只需要在流动性池中加入适当的资产即可。 在确认贡献后，AMM将自动累积奖励代币，流动性提供者可以定期领取奖励代币。 流动性提供者贡献流动性的时间越长，他们获得的奖励代币就越多。\\n\\n可以简单理解成，**为DEX池子提供流动性，将会获得收益是: 池子手续费分成+治理代币价值**。\\n\\n#### 套利者的价格纠正\\n\\n从上面的模型可以很容知道，随着交易的进行，DEX的报价很容易就会偏离真实价格，这时候套利者就会进行涌入赚钱。比如苹果和香蕉的真实价格交易是1:1,当第一位客户买走 10 个苹果后，我们 Uniswap 池就有会变成 40 个苹果和 62.5 个香蕉。如果有位**套利者**此时进入，她买走 12.5 个香蕉，让资金池恢复到最初状态，她只需付 10 个苹果，所以 Uniswap 对她的收费只有 0.8 苹果 / 香蕉。\\n\\nDex会**低价甩卖香蕉**！就好像我们的算法此时意识到香蕉过多，所以它低价抛售香蕉，以吸引苹果流入，从而实现库存的再平衡。\\n\\n去中心化交易所就是依赖这种机制，在套利者的帮助下缓步回归正常价值。\\n\\n#### 无常损失\\n\\n刚才提到套利者会来进行套利，那有人赚钱就会有亏钱的，赚钱的是套利者，那谁亏了呢？答案就是流动性提供者。\\n\\n还是刚才的例子，假如一个池子的香蕉和苹果(各50个)，且定价都为1元，全部由一个人来提供，那这个人最初就有价值100元的资产(50个苹果和50个香蕉)。\\n\\n假设某家香蕉农场遭遇了无人机攻击，出现大面积的香蕉短缺。香蕉现在像黄金一样贵。交易价格蹿升到 5 个苹果换 1 个香蕉，**也就是1个香蕉涨至5元**。套利者一秒都不会耽搁，立马杀入DEX流动性池，抢购便宜的香蕉。他们**调整交易规模**，以便买走价格低于新汇率 5:1 的所有香蕉。这意味着他们需要移动价格曲线，直到满足以下等式：5x \\\\* x = 2500。\\n\\n最后，他们总共以 61.80 个苹果买到 27.64 个香蕉。平均交易价格为 2.2 个苹果：1 个香蕉，这远低于市场价，相当于得到 76.4 个免费苹果。\\n\\n![](https://images.mirror-media.xyz/publication-images/ZbDp9seHouJ2QG6adHgWR.webp?height=580&width=580)\\n\\n最后池子里只剩22.36个香蕉和111.8个苹果，此时作为池子的持有人，这个人将有(苹果1元，香蕉价格5元) 111.8 \\\\* 1+22.36 \\\\*5 =223.6元的资产。看上去好像比最初的100元赚了。但是仔细想想，假如最初就一直持有50个苹果和50个香蕉，则会持有 50 + 50\\\\*5 = 300 元，这里其实是亏了将近80元的。\\n\\n这部分差价其实就是被套利者给套走了，这种现象也叫套利损失。每当交易价格发生变动，就会出现**套利者窃取廉价资产**，直到资金池的定价达到正确为止。 （这些损失是「暂时的」，因为如果后来真实交易价格恢复为 1：1，那么就好像你从未损失过这笔钱，和开始相比。）\\n\\n#### 总结\\n\\n当然，除了恒定乘积AMM之外，各种后继定价函数也横空出世。比如Curve就是用常数乘积和常数和混合的模式等等，都极具有创新性。\\n\\n截至目前，AMM已经取得了令人瞩目的增长，吸引了大量来自传统市场的流动性提供者，做好了大量资本注入的准备，可以说未来可期。\\n\\n## 去中心化借贷\\n\\n资金借贷是金融业提供的最常见的服务之一，其由信用与担保的概念所促成。\\n\\n借贷体系需要某种形式的信任和中介。中介的角色由银行承担，而信任是由一个复杂的信用系统维持，即借款人必须表现出偿还贷款的能力以获得借款资格，这是银行提出的一系列需满足的资格和要求之一。\\n\\n这导致了当前借贷系统的各种质疑和缺陷，如约束性的筹资标准、获取银行服务的地理位置或法律限制、贷款审批的高壁垒以及富人独享了低风险高回报放贷的福利。\\n\\n去中心化借贷平台常用的“抵押贷款”形式：借款人须将价值高于借款的资产作为抵押品，以保证在无法偿还债务的情况下，贷款人可获得抵押品。\\n\\n去中心化借贷有三种模式即P2P模式、稳定币模式和流动池模式。\\n\\n### P2P模式\\n\\nP2P顾名思义，是将有意向的借方和贷方撮合在一起。现有的去中心化借贷协议中，dydx和Dharma采用这一类型。\\n\\n除了起到中间人的撮合作用，借贷协议还要评估借方的资产价格和风险，当借款人无法按时还款时，“担保方”自动执行清算程序，保证贷方的利益。\\n\\n尤其是在dYdX，用户将加密货币换成 sETH(做空以太坊)和lETH(做多以太坊)两种代币，直接进行合约交易。\\n\\n### 稳定币模式\\n\\n之前稳定币章节中提到的DAI就是这样的模式，通过超额抵押的方式来获取DAI。这种模式更贴近于我们日常生活，Makerdao就好比是银行，数字资产好比是不动产，DAI是法定货币。但质押资产和借款的质押比率必须保持在150%以上。而且其利息是全球性的，由MKR持有者通过投票来决定。\\n\\n### 流动池模式\\n\\n借方和贷方通过流动性交易池进行交易，而不是与交易对手进行匹配。每个贷款和借款的利率由池子的流动性大小来确定，即由贷方提供的货币总数量和借方的需求总数量之间的比率而波动。应用不设置固定的贷款期限，贷款人可以把资金存入贷款池子持续赚取利息，并随时提取资产。当然，这种模式进行借款也是需要抵押物来进行超额抵押的。\\n\\n### Aave介绍\\n\\nAave就是一个基于流动池模式的借贷应用，用户可以选择借入、借出和赚取 20 种不同数字资产的利息，而无需中间人。\\n\\n想要赚取利息的用户将存入他们想要借出的资金，然后将其收集到流动性池中。当借款人贷款时，他们从这些资金池中提取资金。贷方可以以任何他们认为合适的方式交易或转让这些代币。\\n\\nAave 发行两种类型的代币来促进此活动，$AAVE（原生代币）和 aTokens。\\n\\n对于aToken，当depositor向池子中存入资产时，池子的liquidity增加，interest rate会因为新存入的资产而改变。与此同时，每当资产存入时，aave会铸造与存入资产等量（1：1）的aToken（ERC-20 compliant）。比如一个depositor存入100个DAI，那么aave会铸造100个aToken存入depositor的账户中。 铸造的aToken中会存有它所代表的asset的地址。每一个depositor手里的aToken balance会随着underlying asset增加的利息增加。而aToken会在用户redeem资产或者资产被liquiate的时候被销毁。\\n\\naToken与对应标的token始终保持等值，比如一个aDai始终等值一个DAI，所以，由于利息的存在，通过重定向，存款用户账户的余额会实时增长。它的特色是有两种可以随时切换的利率模式，稳定利率Stable rate,或者是浮动利率Variable rate。这两种利率都是随着资金利用率的变化而动态变化，借款需求越高，流动资金越少，利率就越高。两种利率的不同点是：Variable利率会实时变化，而Stable利率借款计算确认后基本上就不变了，除非满足基本的再平衡条件才会改变\\n\\n而AAVE代币则用来进行治理\\n\\n$AAVE 令牌有多种使用方式：\\n\\n* 如果用户使用 $AAVE 作为借款的抵押品，他们将获得折扣费用，如果 $AAVE 借款人以代币计价的贷款，则不会收取任何费用。\\n* 如果支付费用，$AAVE 的所有者可以选择在向公众发布贷款之前查看贷款。\\n* 使用 $AAVE 作为抵押品的用户可以比使用任何其他数字资产借入的金额略多。\\n* 代币持有者可以在平台上质押 $AAVE，以获得大约 6% 的 APY 分配。\\n\\n### 闪电贷\\n\\n闪电贷是不需要抵押品就可以借钱的服务，条件是贷款方需要在同一个区块内将资产还回并支付利息，因为目前以太坊每个区块出块时间大约是 15-20 秒，如果你在一个区块内借出又还回其实对区块链来说贷款方只是短暂地使用它并没有真正持有，这样的条件让闪电贷变得可行，使用方并没有真正持有该资产所以借出资金的人也不要贷款方提供抵押品来确保资产安全，而闪电贷对使用程式交易的交易员就变得很方便，因为交易市场瞬息万变，有时 1 秒钟就可以获得庞大利润，这时他们就愿意使用闪电贷在短时间内取得大量资金套利。在 Aave V2 版本中新增闪电清算、批量闪电贷功能，让闪电贷应用变得更加多元。\\n\\n假设一个代币在去中心化交易所（简称 DEX） A 上的交易价格为10美元，但在DEX B上的交易价格为10.5美元。在DEX A上买入10个代币，然后再在DEX B上转卖，将获得5美元的利润（假设无手续费）。\\n\\n下面是一个利用闪电贷套利的例子：\\n\\n* 贷款1万元\\n* 使用贷款购买DEX A 的代币。\\n* 在DEX B上转售代币。\\n* 退还贷款(加上相应的费用)\\n* 享受利润\\n\\n一次交易就能搞定！ 但现实中，由于交易费用，加上高竞争、高利率、高滑点，使套利的利润率变得微乎其微。 你需要找到一种方法来博弈价格差异，以便有利可图。 当你与成千上万的其他用户竞争，试图做同样的事情时，你不会有太多的运气。\\n\\n## 去中心化衍生品\\n\\n衍生品是一种合约，其价值来自于其他对标资产，例如股票、商品、货币、指数、债券或利率。期货、期权和掉期是几种常见的衍生品。每种衍生品的用途不同，投资者的交易目的也不一样。\\n\\n投资者交易衍生品的原因包括：对抗对标资产的波动性进行套期保值、推测标的资产的定向移动或增加资产持有量。衍生品本质上极具风险，交易时必须具备丰富的金融知识和策略。\\n\\n### Synthetix简单介绍\\n\\nsynthetix平台是合成资产赛道龙头项目，它将现实世界的各类资产合成到区块链上，为金融衍生品和加密货币的交互提供了无限可能。\\n\\n合成资产是与另一资产具有相同价值或作用的资产或资产的混合物。合成资产跟踪对标资产的价值变化，并允许在无需持有实际资产的情况下对资产敞口。\\n\\n![](https://images.mirror-media.xyz/publication-images/Q9ko3wcnngN85BWA5Ofjf.png?height=1388&width=1871)\\n\\n可以看到synthetix上我们可以买到买到各种合成资产，包括日元，欧元等，而并不需要我们去持有实际的资产。\\n\\n**简要说来，目前Synthetix的主要业务流程有如下几步——**\\n\\n**1. 铸造**\\n\\n用户质押SNX，按照500%的抵押率来生成sUSD。sUSD总是锚定1USD\\n\\n**2. 交易**\\n\\n在kwenta交易所(以及之前的Synthetix.exchange)内，用户可以使用sUSD进行交易，换成任何一种系统支持的合成资产（下文以synths代替），包括——\\n\\n* a. 加密货币类资产，其中包含sToken（做多资产）和iToken（反向合成资产，用于做空），如sETH和iETH、sDeFi等；\\n* b. 外汇类资产sEUR、sJPY；\\n* c. 股权类资产如sTSLA和sFTSE(富时100)；\\n* d. 大宗商品类资产sXAU、sXAG。\\n\\n**3. 销毁**\\n\\n交易完成后用户可以将synths兑换成sUSD(其实是销毁synths并重新铸造sUSD)，归还sUSD即可取回SNX（由于动态债务池的设计，此处并不一定能换回全部抵押的SNX）。\\n\\n#### 动态债务池\\n\\n这里提一下，synthetix上最为牛逼的设计，动态债务池。\\n\\n“动态债务”是指用户和系统的负债是实时变化的。当用户抵押了 SNX 铸造 sUSD 时，所铸造的 sUSD 就被认为是系统新产生的债务，而将 sUSD 交易成了 synths之后，债务也会随着 synths的增值或减值而上涨和下跌，\\\\*\\\\*而系统的债务，总是由所有 SNX 的抵押者按比例共同承担的。\\\\*\\\\*这也就使得，一个仅参与铸造sUSD而不做任何操作的用户，其债务也会动态变化(p.s 此时他相当于做空了)。\\n\\n一个例子如下：假设系统中只有甲乙二人，他们分别铸造了100sUSD。\\n\\n![](https://images.mirror-media.xyz/publication-images/5ipckiqaMnmnuHZ9NWyE_.png?height=616&width=2070)\\n\\n最终，甲乙的债务都变成了 150 sUSD，但甲的资产价值 200 sUSD，乙的资产价值依然是 100 sUSD。此时甲卖出 sBTC 获得 200 sUSD，只需要 150 sUSD 即可赎回 SNX，而乙还需要购买 50 sUSD 才能赎回抵押的 SNX。\\n\\n可以看出，对于SNX的staker来说，Synthetix 的债务池模型实际上是一个**动态零和博弈**(手续费也是按比例分配给staker)：盈利可能来源于自己的资产价格上涨的更多，也可能是在下跌过程中其资产价格下跌的更少；反之亦然。或者说，对于**参与Synthetix的质押的用户，本质上是在做多“自己的投资能力/其他参与方的投资能力”**。持有sUSD不动当然是一种选择，但同时会将自己暴露在“别人投资能力太强所以我亏钱\\\"的风险之下。\\n\\n## 去中心化保险\\n\\n用户在使用DeFi应用前，需要将代币质押在智能合约中。由于潜在的巨额支出场景的存在，质押在智能合约中的代币容易受到安全性攻击。尽管大多数项目的智能合约都进行了代码审计，但人们永远无法知道智能合约是否真正安全，被黑客入侵的可能性总是存在，这将导致资金损失。\\n\\n产生如此巨大的损失凸显了DeFi的内在风险，这也是许多人并不看好DeFi的原因。以下是DeFi用户面临的几个风险点：\\n\\n1. 技术风险：智能合约存在漏洞，遭到安全性攻击；\\n2. 流动性风险：类似Compound平台的流动性耗尽；\\n3. 密钥管理风险：平台的主私钥可能被盗取\\n\\n用户如果使用DeFi进行大额交易，可以考虑购买保险来降低交易风险。\\n\\n比如采用以太坊去中心化保险协议**Nexus Mutual**\\n\\n目前，Nexus Mutual保障因智能合约代码漏洞而导致的交易失败，防止因这些漏洞被黑客攻击而导致的财务损失。\\n\\n首先投保人需要选择承保期限和承保金额。承保金额是您要购买的保障金额，如果智能合约出现漏洞，平台将赔付对应金额。智能合约安全事件发生后，将启动“索赔评估”流程，该流程将由“索赔评估者”参与。批准后，平台将向您支付保险金额。\\n\\n假设您以200美元的单价购买了5个ETH的Compound智能合约保险。 假设在一年的承保时间内，每个ETH的保险费为0.013 ETH，那么一年的保险费用总计为0.065 ETH。如果Compound在这段时间内被黑客攻击，则无论黑客入侵时以太坊的价格如何变化，您都将获赔5ETH。如果在黑客攻击期间ETH价格升至300 ETH，只要您的索赔获得批准，仍然会返还5 ETH。\\n\\n### 优点\\n\\n相比传统的保险产品，DeFi 保��的优势主要体现在**加强赔付效率和透明度**上。由于条款一旦被写入代码，便不必再基于“人工信任”，因此保险公司的核保成本和用户缴纳的保费都会降低。\\n\\n当数字货币价格大幅上涨和下跌时，它们可以对冲加密货币波动和崩盘，并提供安全措施，防止盗窃和对数字货币包的攻击。 他们确保用户的安全免受任何可能的 DeFi 风险，保护技术和金融风险，从而在投资者中建立安全感。 不仅如此，平台还使整个提交、索赔、处理和支付过程极其安全、可靠和透明。\\n\\n## DeFi2.0\\n\\n2020年夏天，DeFi项目的流动性挖矿引爆了整个市场，使得DeFi迎来了第一波爆发式的增长浪潮。由于“热钱”效应，这些协议代币在二级市场也出现了惊人的涨幅。“造富”效应下，DeFi在2020年出现并保持着指数级别的增长态势。\\n\\n虽然，流动性挖矿的模式给项目的冷启动提供了很好的方式，且解决了流动性提供的问题。但是，这种激励模式更多的是吸引和鼓励了流动性矿工的短期参与，这些用户中大多数并不是真正的协议使用者，并未与协议形成有粘性的共生关系，而是不断地“挖卖提”，加入收益更高的协议中。\\n\\n故而，长远来看，这一批早期因流动性挖矿兴起的DeFi协议大部分都面临着如何构建合理的组织形式和治理结构，提高资金利用率以及提供可持续流动性方案等问题。\\n\\n在这一背景下，有人提出了DeFi 2.0的概念，计划通过新的机制来解决这些DeFi协议遇到的问题。\\n\\n**而DeFi 2.0是基于第一代协议搭建的DeFi应用，由于再次进行了从 0 到 1 创新，因此可以被视作第二代协议，称为DeFi 2.0。**\\n\\n### Convex\\n\\n典型的一个DeFi2.0项目便是Convex。\\n\\nConvex是基于Curve Finance的基础上进行搭建的产品，通过推出的CRV质押和流动性挖矿一站式平台，致力于简化Curve的使用流程。\\n\\n用户将CRV放进Convex中铸造凭证代币CVX，可以获得Curve的奖励（其中包括Curve的平台费用）、CVX、veCRV的奖励，以及3crv的份额。\\n\\n不同于在Curve中需要锁仓���根据时间长短权重不同的操作限制，Convex用户无需锁定CRV便可获取收益奖励。\\n\\n简单来说，Convex简化了Curve和CRV的锁定、质押过程，并提高CRV持币者、流动性提供者的收益率、使用率，提高了资金的流动性。\\n\\n### DeFi乐高模组特性\\n\\nDeFi2.0很好的体现出来了DeFi可组合型强这一特性。每个协议/应用专注建造好一个乐高积木，这样后续也可能会有更多的协议可以基于之前的协议或者代码上进行开发建设，大大增加了开发速度。\\n\\n但也需要注意的是，DeFi可组合性也伴随着系统性风险。可能单个乐高积木是没问题的，组合起来的时候可能就会出现漏洞。而且某个协议受到攻击的时候，可能也会殃及其他项目，导致加密世界的金融危机。\\n\\n## DeFi风险\\n\\n总结DeFi存在的一些风险：\\n\\n* 组合性风险：由于DeFi之间可能具有很强的依赖性，某个协议的崩溃可能会牵连影响到许多DeFi应用，这种风险不能被忽视。\\n* 合约漏洞：只要是代码，那必定会存在有漏洞。黑客可能会对合约漏洞展开攻击窃取资产，这里存在着巨大的风险。\\n* 项目跑路风险：缺乏监管体系，项目团队浑水摸鱼，欺诈，跑路频繁发生。\\n* 公链风险：除了合约之外，公链依然可能收到攻击或者出现故障。如Solana就曾经出现过内存溢出宕机的情况。\\n* 监管风险：来自世界各国的司法机构的监管压力，可能会使整个DeFi市场动荡。\\n\\n综上，虽然DeFi通过智能合约规避了一些黑箱操作，但是也因此引入了一些上述这些不可忽视的风险，投资者使用DeFi时必须万分谨慎。\\n\\n## 总结-未来已至\\n\\n![](https://images.mirror-media.xyz/publication-images/tVQgyHNm6Y-hHy21Z_7cx.png?height=573&width=2160)\\n\\n根据defillama上的数据显示，目前整个DeFi的锁仓量已于2022年来到了2500+亿美金，而传统金融的总市值约为25万亿美金，DeFi目前市值已经达到了传统金融的1%，这个数字也还很小，未来有非常多的想象空间。\\n\\n整个DeFi行业目前仍属早期，面临着监管压力以及各种高度的不确定性，这个跟Web2.0时代的早期项目，如Facebook，苹果，亚马逊等当时面临的问题是一样的，而现在这些公司已经跻身于全球最具价值公司之列。笔者相信DeFi也同样是如此这样一个颠覆性的革命应用，最后势必会侵占越来越多传统金融的份额，并和传统金融体系相互促进、补充、融合，而最后DeFi会以什么样的形态出现在大众眼前，相信时间会给我们答案。\",\"timestamp\":1641209899,\"title\":\"区块链基础研究(一) 去中心化金融DeFi\"},\"digest\":\"0jG55nh8fVag83iY8ArqQgc236oaWC1skF8O_dbKGDs\",\"authorship\":{\"contributor\":\"0xc3C4c82001882F8ab776Ea5efb2345D081eeADEF\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"q_larI_lcPSTtZEWAgxbMJqwK87M-P4Xk-479CjIAYo\\\",\\\"y\\\":\\\"yUgMDsNos4V5T_8nq49NY4YV0HaqdiJG5nn9xj2Zy4w\\\"}\",\"signature\":\"gnQkkHjHmLXUB9JS0waFei0o2kIH6RmMcwzrmXlQLLBa4PdJO-qs2mDz_5R8sdvx-OZrwhZnCtvmfBvkcQA_3Q\",\"signingKeySignature\":\"0x3b460750457336524af5ecfb2fac6b7b065699b48a075e9c8bca00ba52fdd6ef274d9664d9ba990cc7866cfa97e428e49b7c04b50e807085c5750af473f832801b\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"q_larI_lcPSTtZEWAgxbMJqwK87M-P4Xk-479CjIAYo\\\",\\\"y\\\":\\\"yUgMDsNos4V5T_8nq49NY4YV0HaqdiJG5nn9xj2Zy4w\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"pnSW3xj-G1ekGb6L9H9AxeCBUW5z7_Uog4YnG51cgIY\"}"