"{\"content\":{\"body\":\"slither是Solidity的静态分析工具，工具本身会自动检查合约代码并给出一些安全建议。\\n\\n该工具还自带了一些print工具，对于合约的功能分析也非常有用。\\n\\n此文简单说明slither工具的安装和使用。\\n\\n## 原理\\n\\n1. 通过官方solc工具生成ast抽象语法树json文件（solc --ast-json contract.sol）\\n2. 解析ast-json文件，生成dot格式的graph源文件\\n3. 将dot文件转为图片格式（例如png）\\n\\n## 安装\\n\\n安装solc版本管理工具\\n\\n```jsx\\npip3 install solc-select\\nsolc-select use 0.5.17\\n```\\n\\n安装分析工具\\n\\n```jsx\\npip3 install slither-analyzer --no-use-pep517\\n```\\n\\n安装graphviz绘图工具\\n\\n```jsx\\nbrew install graphviz\\n```\\n\\n## 分析\\n\\n以Ronin跨链桥合约为例，合约地址：<https://etherscan.io/address/0x1a2a1c938ce3ec39b6d47113c7955baa9dd454f2>\\n\\n将合约代码保存为一个`proxy.sol`文件中。\\n\\n查看合约间的继承关系：执行如下命令会生成 `proxy.sol.inheritance-graph.dot` 文件\\n\\n```jsx\\nslither proxy.sol --print inheritance-graph // 多个合约生成一个依赖关系图\\n```\\n\\n将dot文件格式转换为png图片：\\n\\n```jsx\\ndot proxy.sol.inheritance-graph.dot  -Tpng -o proxy.png\\n```\\n\\n![](https://images.mirror-media.xyz/publication-images/5XbC1_KY4HuG6j3F6dx8-.png?height=1983&width=1145)\\n\\n查看其它信息：\\n\\n```jsx\\nslither proxy.sol --print call-graph  // 针对每个合约，生成多个dot文件\\nslither proxy.sol --print cfg // 针对每个函数，生成多个dot文件\\n```\\n\\n如果合约比较复杂，绘制出的调用关系图会比较乱，所以一般就用于从整体的角度浏览各个合约间的继承关系。\\n\\n`./graph.sh`\\n\\n```rust\\nslither $1 --print inheritance-graph\\ndot $1.inheritance-graph.dot -Tpng -o $1.png\\n```\\n\\n其它使用见官方wiki：\\n\\n[https://github.com/crytic/slither/wiki/Printer-documentation#data-dependencies](https://github.com/crytic/slither/wiki/Printer-documentation#data-dependencies)\\n\\n\",\"timestamp\":1640580508,\"title\":\"使用slither分析复杂合约继承关系\"},\"digest\":\"mU8yhjEDf6iLaKi5oriYjd7pbWxNVtTCdzXmfNHQbxE\",\"authorship\":{\"contributor\":\"0x88884421a2a5A26A28Abd6D3a528915ACAD25c8f\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"yb74d6KilH97yiy_3629EA401B1nDriR4j1SMBhfMYg\\\",\\\"y\\\":\\\"g58A5X-_J30w7r88i-qvmXdNNEcmILRbv3wFYk3EFs8\\\"}\",\"signature\":\"5W-zxYk341iDAeLYv-zNmgpoMymBMDuHfGIIV2dyfjeun6KBiiAUorWFY6p1mnws9F3HkZIuAUpCUYNq2Ua9kg\",\"signingKeySignature\":\"0x7480f7085c108cb6511173300e8d24c668b24d20dedc9d406392cee0701e24410599809653bc611a2d8f79a17571704bf9091b3c1ffd1f2a3cfa2931d1cf266f1c\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"yb74d6KilH97yiy_3629EA401B1nDriR4j1SMBhfMYg\\\",\\\"y\\\":\\\"g58A5X-_J30w7r88i-qvmXdNNEcmILRbv3wFYk3EFs8\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"mU8yhjEDf6iLaKi5oriYjd7pbWxNVtTCdzXmfNHQbxE\"}"