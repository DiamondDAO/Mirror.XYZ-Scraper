"{\"content\":{\"body\":\"## 无常损失原理详解\\n\\n将一对资金存入Uniswap等的流动性池中，成为流动性提供者（LP），获得收益回报，我们要考虑的最大风险是所谓的无常损失（impermanent loss）。\\n我更认同这个准确的说法应该是发散损失（divergence loss），但这里我们也接受约定俗成的说法说是无常损失，也就是如果价格波动然后又回归，你看起来只是经历了暂时的损失，而不是永久的损失。\\n那么，无常损失究竟是怎么回事呢？在这篇短文中，我来为你介绍一下。\\n\\n### ▍无常损失的来源\\n\\n\\n无常损失是源于提供流动性这样一个独特的角色，接下来的讨论我们均以Uniswap的流动性池「1：1比例」为例。简化起见，均不考虑交易费收益部分、UNI奖励部分。\\n我们为Uniswap的一个交易对提供提供流动性的方式是，为池子提供由等值的一对通证组成的资金，让Uniswap交易对智能合约能够通过AMM（自动做市商机制）帮用户进行两者的兑换。\\n\\n\\n以ETH/USDT这个交易对为例，在ETH价格为$500时，我们可以提供这样的资金：\\nETH：\\t20枚\\nUSDT：\\t$10,000\\n总值：\\t$20,000 这是池中的所有的资金。\\n\\n\\n如果ETH价格发生波动，我们在池中的资金会在ETH和USDT中进行转换，其机制是始终保持两者等值。\\n\\n### ▍无常损失示例：上涨带来的\\n\\n\\n如果ETH的外部价格上涨到$550，就会有投机者来这里买入便宜的ETH，并把价格推高到$550。\\n\\n\\n按 x \\\\* y = k 的Uniswap自动做市商公式：\\n20 \\\\* 10,000 = 200,000 （ETH=$500）\\n19\\\\.07 \\\\* 10488 = 200,000（ETH=$550）\\n\\n\\n投机者可以用$488来买走0.93ETH，从而把价格推高到跟市场一致。而他的成本是：ETH=$524.7，有一定的套利空间。\\n\\n\\n在新的状态下（ETH=$550），对于LP来说\\nETH：19.07枚\\nUSDT：$10488\\n总值：$20976\\n\\n\\n但是，如果我们这一对ETH/USDT资金没有来放入流动性池，情况是：\\n总值：$21000\\n\\n\\n因此，因为ETH上涨，我们损失了$24。这就是无常损失。\\n\\n### ▍无常损失示例：下跌带来的\\n\\n\\n如果ETH价格跌到了$400，情况会怎么样呢？\\n按 x \\\\* y = k 的Uniswap自动做市商公式：\\n20 \\\\* 10,000 = 200,000 （ETH=$500）\\n22\\\\.36 \\\\* 8944 = 200,000（ETH=$400）\\n\\n\\n在新的状态下（ETH=$400），对于LP来说\\nETH：22.36枚\\nUSDT：$8944\\n总值：$17888\\n\\n\\n但是，如果我们这一对ETH/USDT资金没有来放入流动性池，情况是：\\n总值：$18000\\n\\n\\n因此，因为ETH下跌，我们损失了$112。也就是说，价格下跌，我们也会遭遇无常损失。唯有价格不动，LP才不会有无常损失。\\n\\n### ▍无常损失图示 \\n\\n如以下这幅常见的图示，只要这一对资金的价格与存入时发生了变化，那么我们就会遭受无常损失（分散损失）。\\n\\n![](https://images.mirror-media.xyz/publication-images/t3KNLmwP1lxUsEP4RnA5N.png?height=742&width=1200)\\n\\n图片来源：<https://medium.com/@pintail/uniswap-a-good-deal-fo>...\\n\\n当我们把一对ETH/USDT存入流动性池子中，变化是：\\n● 当ETH价格上涨时，系统实际上帮我们自动卖出ETH。\\n● 当ETH价格下跌时，系统实际上帮我们自动买入ETH。\\n\\n\\n当我们要做LP时，我们都是至少要搞一个Excel表格，来监控自己的无常损失的。正如昨天丁元所讲，LP希望的是价格稳定。\\n\\n\\n**因此，我们的第一选择是做稳定币池的LP，因为它们之间价格几乎没有波动，其次是做ETH/BTC的LP，因为二者之间往往是同向的，比整体市场波动小。\\n总的来说，流动性提供者承受了无常损失，提供了流动性服务，并因无常损失而获得了相应的回报。**\\n\\n作者：方军\\n\\n\\n---\\n\\n欢迎加入加密大航海社区：[官网](https://www.dhhdt.com/)、[推特](https://twitter.com/CryptoVoyageCN)、[电报群](https://t.me/RealCryptoVoyage)！\",\"timestamp\":1636032547,\"title\":\"如何理解Dex中的无偿损失？\"},\"digest\":\"cV6w8w-zHn4fQdxU0p1leUlTeruQjz9qGUncqhKShvw\",\"authorship\":{\"contributor\":\"0x290AA5081D6298C181949946893876A1B76Bf144\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"tWdVmffQXfMfkkiLzyFFzz5nDsw7ynuBXLMRXImiY0M\\\",\\\"y\\\":\\\"1kH-ARbgnLf-0QRNWEh-VhrQGQw15j4W9N8IVSQ6NLo\\\"}\",\"signature\":\"pNNHmceDkbVhK-FTfRGDaD2TxBihPTidTPrSK80CzBmeLS7_Ft7P9bIbIxP2ZvMsl3lJ7WMzgmaGl0VpT70dNA\",\"signingKeySignature\":\"0xde765c77ca4fe5a13abd8ae8d952a02bfc3b81e1affc61739eb7ad49f215bad235d3625931326adaf5d5e99efaf6e2bade1eefd10624fb725dd08bedbee6cd1f1b\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"tWdVmffQXfMfkkiLzyFFzz5nDsw7ynuBXLMRXImiY0M\\\",\\\"y\\\":\\\"1kH-ARbgnLf-0QRNWEh-VhrQGQw15j4W9N8IVSQ6NLo\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"cV6w8w-zHn4fQdxU0p1leUlTeruQjz9qGUncqhKShvw\"}"