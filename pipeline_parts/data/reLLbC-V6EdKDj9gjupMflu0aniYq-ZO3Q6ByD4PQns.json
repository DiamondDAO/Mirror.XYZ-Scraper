"{\"content\":{\"body\":\"2021 年是 Layer2 项目筑基的一年，大家都争相推出更安全、更快、更创新的扩容解决方案，为实现以太坊能够承载数以千万计用户的目标。回顾这一年，L2 赛道上有脱颖而出的黑马，有稳步不惊的耕耘者，也有黯然离场的选手。那么展望 2022 年，L2 解决方案会全面爆发吗？它们能够解决诸如状态膨胀、gas 飙升此类问题吗？2020 年的 DeFi 热和 2021 年的 NFT 狂欢都让普通用户可望不可及 —— 交互一次手续费动辄几十甚至几百美元。以太坊扩容迫在眉睫：尽管截至本文撰写 L2 上的总锁仓量已超过 55 亿美元，然而 L2 仍未被广泛采用，且流动性碎片化、跨 rollup 迁移 NFT、数据可用性、定序者中心化等问题也没有得到很好的解决...\\n\\n![cr：l2beat.com](https://images.mirror-media.xyz/publication-images/B_c_F2jUstHionejyjaKE.png?height=529&width=1112)\\n\\n相关阅读：\\n\\n[《Vitalik: 跨 rollup 封装及迁移 NFT》](https://www.ethereum.cn/Technology/cross-rollup-nft-wrapper-and-migration-ideas)\\n\\n[《数据可用性检查》](https://www.ethereum.cn/Eth2/data-availability-checks)\\n\\n[《简谈ETH 2.0的未来: 将分片作为数据可用性层》](https://www.ethereum.cn/shards-as-data-availability-layers)\\n\\n[《Rollup 中的定序者：单一许可型》](https://www.ethereum.cn/Layer2/single-permissioned-sequencers-in-rollups)\\n\\n[《区块链桥接介绍：在加密网络之上构建网络》](https://www.ethereum.cn/Layer2/blockchain-bridges)\\n\\n**免责声明**：本文将汇总 2021 年里主流 L2 解决方案的大事记并简要概括 2022 年的扩容路线图，希望读者能从中获得一些启发。文章旨在梳理 L2 赛道中一些解决方案的标志性里程碑，并将引入多篇 ECN 翻译过的文章，其观点并不代表 ECN 立场，亦不构成投资建议。\\n\\n**讨论范围**：既是汇总 L2 在 2021 年的大事件，我们必须对 L2 下一个定义。L2 具有一个单独的执行层 (即代码运行的地方)，并基于以太坊 L1 运行，且这个执行层继承了 L1 的安全性和去中心化特性。之所以需要设定一个讨论范围，是因为此前社区对于 “侧链属不属于 L2” 产生了一定的争议，详见文章：[《社区争议：侧链算不算L2？》](https://www.ethereum.cn/Technology/what-everyone-gets-wrong-about-51percent-attacks)。文中指出 L2 相较于 PoS 侧链，具有以下特点： 1) 依赖于非审查 (欺诈证明)；2) 依赖于新的密码学和可信的设置 (有效性证明) 补充一点，Starks 不需要依赖可信的设置； 3) 更高的硬件和带宽需求。而侧链不验证有效性，仅验证共识条件的绝大部分，并且其不具有数据可用性检查。总而言之，本文讨论的 L2 范围不包括 PoS 侧链，仅包括使用有效性证明的 ZK-Rollup、Validium、Volition 和使用欺诈证明的 Optimistic Rollup、Plasma 解决方案。\\n\\n相关阅读：\\n\\n[《Vitalik：Rollups 不完全指南》](https://www.ethereum.cn/an-incomplete-guide-to-rollups)\\n\\n[《Vitalik：以 Rollup 为中心的以太坊路线图》](https://www.ethereum.cn/a-rollup-centric-ethereum-roadmap)\\n\\n**L2 的主要类型**：有两种参数可以用来对 L2 扩容解决方案进行分类。其一是根据使用的加密证明分类，其二是看它们的数据可用性 (Data Availability, DA) 存储在链上还是链下。\\n\\n两种主要的证明类型：\\n\\n* 有效性证明 (Validity Proofs) —— 这是一种利用零知识 (ZK, zero-knowledge) 密码学以确保交易有效性的数学证明\\n* 欺诈证明 (Fraud Proofs) —— 这种证明引入了一种所谓的争议时间延迟 (Dispute Time Delay, DTD)，一旦证明提交至 L2，验证者留有一定的时间以标记出无效的证明；无效证明可能包含着不正确的状态转换，因而会对涉及的验证者施加惩罚；随后状态回滚至最近的有效快照状态处\\n\\n数据可用性存储在链上或链下：\\n\\n* 链上：状态数据连同所有交易的所有已执行的 calldata (智能合约函数调用、原生代币转移、签名) 一起放入交易捆/rollup 的加密证明中，这使得可以在链上访问和验证所有数据。\\n* 链下：已执行的 calldata 和状态由 L2 处理并存储在链下。这使得这个方案不够安全和去中心化。然而，链下存储数据方案更容易将更多交易打包进一个 rollup 中，也因此比链上调用数据证明方案的速度快许多。\\n\\n![](https://images.mirror-media.xyz/publication-images/DgD6n5KMRTpPlXRI0hVX3.png?height=164&width=724)\\n\\n目前几种主流的 L2 扩容解决方案就是表格中列出来的这些，在下文中，我们尽量列出各个方案的主流项目在这一年来的发展以及未来的方向。\\n\\n相关阅读：\\n\\n[《Layer2 终极指南》](https://www.ethereum.cn/Layer2/the-ultimate-guide-of-l2s-on-ethereum)\\n\\n[《对比 zkRollup 与 Validium (STARKEX)》](https://www.ethereum.cn/zkrollup-vs-validium-starkex)\\n\\n[《如何评估六大以太坊LAYER2扩容方案》](https://www.ethereum.cn/Layer2/evaluating-l2-scaling-solutions)\\n\\n![](https://images.mirror-media.xyz/publication-images/SrzNP-ooe3BBd_vkE7ihR.png?height=3133&width=4568)\\n\\n# **使用“有效性证明”的 L2**\\n\\n## **zkSync**\\n\\nZkSync 是由 Matter Labs 团队构建的零知识 L2 网络，使用基于 zkSNARKs 证明的密码学技术。目前可用的 zkSync 版本不兼容 EVM，并且智能合约仅限制于一个低级的语言 Zinc。所以目前 zkSync 上可用的 app 非常有限，主要就是二层 NFT 铸造平台 zkNFT 和基于零知识技术构建的去中心化交易所 Zigzag。\\n\\n协议更新：\\n\\n* 2020 年 6 月 18 日，zkSync v1.0 上线主网\\n* 2021 年 6 月 1 日，zkSync 2.0 首个测试网版本上线 — zkEVM 的测试网 alpha 版本\\n* 7 月 14 日，zkSync v1.x 上线主网\\n* 10 月 13 日，zkSync 2.0 zkEVM 测试网上部署了首个 dapp demo —— UniSync\\n\\n自 2020 年 9 月 Gitcoin Grants Round 7 首次集成 zkSync v1.0 以来，大部分用户都通过 zkSync 网络进行 Gitcoin 上的捐赠。\\n\\nzkSync 1.x 版本新增的功能有：进行 ERC-20 代币之间的 swap；铸造、发送以及 swap NFT；能够无需许可地上线代币；添加新的事件系统。\\n\\n值得注意的是，未来的升级版本 zkSync 2.0 将由推出两大技术突破组成：zkEVM 和 zkPorter。\\n\\n在 zkSync 2.0 中， L2 状态将会分成两个部分：数据可用性在链上的 zkRollup 和数据可用性在链下的 zkPorter。这两部分都是可组合且可互操作的：zkRollup 上的合约和账户将能够与 zkPorter 上的账户无缝交互，反之亦然。值得注意的是，此前社区对于 zkPorter 的安全性产生过争议。详见文章[《zkPorter: L2 扩容的突破》](https://www.ethereum.cn/Layer2/zkporter-a-breakthrough-in-l2-scaling) 下半部分。\\n\\n![zkSync 2.0 架构，cr：Matter Labs](https://images.mirror-media.xyz/publication-images/bbwIHVe2i-k87KOmeMe4C.png?height=715&width=873)\\n\\n在 2021 年，zkSync 为推出 2.0 主网版本做准备，在基础设施方面做了不少的工作：与中心化交易所合作、L2 直接法币通道、基础设施协议集成。那么在未来的一年中，zkSync 的路线图将是：zkSync 2.0 -> 隐私 -> 去中心化和抗审查。\\n\\n相关阅读：\\n\\n[《zkPorter: L2 扩容的突破》](https://www.ethereum.cn/Layer2/zkporter-a-breakthrough-in-l2-scaling)\\n\\n[《zkSync 2.0：首个测试网版本上线》](https://www.ethereum.cn/Technology/zksync-2-0-hello-ethereum)\\n\\n## **StarkWare**\\n\\nStarkWare 是零知识证明协议 STARKs 的研发团队，旨在基于 zkSTARKs 提高区块链的可扩展性和隐私性。他们推出的技术方案 StarkEx 已为 DeversiFi、dYdX、Immutable X、Sorare 提供支持。\\n\\n协议更新：\\n\\n* 2020 年 6 月，首个 StarkEx 用例 DeversiFi 上线主网；12 月 StarkEx 2.0 上线主网\\n* 2021 年 1 月 26 日，公布 StarkNet 计划\\n* 7 月 27 日，StarkEx 3.0 上线主网，新增 dAMM 功能实现异步共享流动性\\n* 11 月 29 日，StarkNet Alpha 上线主网\\n\\n今年 1 月 份时，StakWare 宣布了 StarkNet 的部署路线图：一个去中心化的、无需许可的、抗审查的、由 STARK 支持的图灵完备的 L2 解决方案。StakNet 将分四步推出：基础搭建、StarkNet Planets - 行星计划 (单个App Rollups)、StarkNet Constellations - 星群计划 (多个App Rollups)、StarkNet Universe - 宇宙计划 (去中心化 Rollups)。目前 StarkNet Alpha 的主网版本为 StarkNet Constellations。\\n\\nValidium 和 Volition 这两种扩容解决方案都是由 StarkWare 首次提出，前者将数据可用性存储在链下 (通过数据可用性委员会 DAC 维护其安全性)；后者则是供用户选择将数据存储在链上/链下的一种架构，即用户每笔交易都可以选择使用 Validium 或是 zk-Rollup。StarkNet 提供的 Volition 方案将包含一系列数据可用性方案，包括无需许可和去中心化的解决方案，而不是像目前的 StarkEx 仅提供数据可用性委员会方案 (DAC)。其 Volition 系统将会在 2022 年 1 月引入。\\n\\nStarkWare 创建了一种特定的编程语言 Cairo 来运行由 STARKs 支持的自主型程序。StarkWare 团队现在正与 Nethermind 团队合作创建代码转译器 Warp，来将 Solidity 智能合约无缝转换为 Cairo，以便使其与 EVM 兼容。因此，未来一年里，StarkNet 的目标之一就是实现 EVM 兼容。\\n\\n他们还提出了 Layer3 概念：利用递归证明基于 L2 构建应用专用层 (application-specific layer) L3，为应用程序提供特定的服务需求，例如超高可扩展性、对技术栈和隐私更好的管理。而未来的路线图中，StarkEx 和 StarkNet 的独立实例也将迁移到 L3 上。\\n\\n![多层的生态系统，cr：StarkWare](https://images.mirror-media.xyz/publication-images/IFnAge3LC_OSLhOi_raqU.png?height=473&width=788)\\n\\n相关阅读：\\n\\n[《zk-rollup 争夺战：zkSync vs. StarkWare》](https://www.ethereum.cn/Layer2/zksync-vs-starkware)\\n\\n[《StarkNet Alpha 即将登陆主网》](https://www.ethereum.cn/Layer2/starknet-alpha-is-coming-to-mainnet)\\n\\n[《分形式扩容：从 L2 到 L3》](https://www.ethereum.cn/Layer2/fractal-scaling-from-l2-to-l3)\\n\\n## **Aztec**\\n\\nAztec 是一个 L2 zk-rollup 隐私扩容解决方案，其基于密码学技术 PLONK 实现隐私交易。\\n\\n协议更新：\\n\\n* 2021 年 3 月 16 日，Aztec 2.0 上线主网，推出 L2 隐私支付项目 zk.money\\n* 12 月 10 日，推出 DeFi 隐私桥接方案 Aztec Connect 的测试网版本\\n\\n目前主网上可用的 Aztec 2.0 版本 zk.money 只是支付网络，用户可以通过 zk.money 隐私地发送和接收 DAI、ETH、renBTC。\\n\\n而正在测试网运行的 Aztec Connect 是 2022 年的关键。利用 Aztec Connect，用户可以桥接隐私资产至主网以进行 DeFi 交互，并在同一笔交易中返回到 Aztec 中。这使用户能够便宜且隐私地与任意以太坊 DeFi 应用交互。\\n\\n此外，Aztec3.0 将发布隐私智能合约语言 \\\"Noir\\\" (一种为隐私 DeFi 服务的语言)，将在 PLONK rollup 内实现可编程的隐私，并计划在 2022 年初允许工程师们在 Layer2 上执行他们的隐私合约。\\n\\n相关阅读：\\n\\n[《隐私交易的实现：Aztec 隐私架构介绍》](https://www.ethereum.cn/Layer2/aztec-networks-privacy-architecture)\\n\\n[《以太七日谈 • 2021/12/14》](notion://www.notion.so/5a53ecd30ebc4c77bb3b86d4daaa876d?v=eee1cbf915c946398bdac2dd19b8a575&p=d0f4d1dc7a7e406ca9e210c97d7ff2d8)\\n\\n# **使用“欺诈证明”的 L2**\\n\\n## **Optimism**\\n\\nOptimism 团队在以太坊构建了一个 optimistic rollup L2 解决方案 Optimistic Ethereum (后正式改名为 Optimism)。首先使用 Optimism 构建二层 dapp 的是 Synthetix，后 Uniswap V3 成为首个部署至 Optimism 主网版本的应用。\\n\\n协议更新：\\n\\n* 2021 年 1 月 16 日，主网软启动\\n* 4 月 20 日，在 Scaling Ethereum hackathon 开放开发者测试网\\n* 7 月 14 日，Optimism 正式上线主网，Uniswap V3 部署至 Optimism 主网版本\\n* 11 月 12 日，完成 EVM Equivalence 升级 (OVM 2.0)\\n* 12 月 17 日，Optimism 正式移除白名单限制，开放无需许可部署\\n\\n2021 年，Optimism 两大关键事件就是：完成 EVM 等同性升级和进行了首次追溯性公共物品募资实验。\\n\\nEVM 等同性的上一个版本 OVM 1.0 只是实现了 EVM 兼容。拥有许多“兼容”的链，每条链都略有不同，这会导致碎片化。EVM 等同性 (EVM Equivalence) 实现的意义在于，开发者可以在 L2 上实现一键部署合约。因为这将使得 Optimism 成为完全等同于 EVM 的编译目标。像 Dapptools、Hardhat、Solidity、Vyper 等等这样的开发者工具将可以直接在 OVM 2.0 本地运行，这些工具的开发者不必担心如何支持碎片化的代码库。EVM 等同性的威力归根到底就是帮我们实现标准化：让以太坊成为标准。\\n\\n另一个关键事件，基于 Vitalik 提出的追溯性公共物品募资概念，Optimism 发起第一轮追溯性募资。与 Gitcoin 的募资方式不同，其核心原则为：更容易就已被证明有用的工作达成共识，而不是将来可能会有用的工作。本轮募资共向 58 个项目分配了 100 万美元，以奖励这些项目为 Optimism 和以太坊生态系统所做的出色工作。\\n\\n相关阅读：\\n\\n[《白话解读 Optimism 的运行机制》](https://www.ethereum.cn/Layer2/how-optimism-works)\\n\\n[《为什么Synthetix选择Optimism扩容方案?》](https://www.ethereum.cn/Layer2/why-optimism)\\n\\n[《让以太坊成为标准：EVM 等同性介绍》](https://www.ethereum.cn/Layer2/introducing-evm-equivalence)\\n\\n[《“追溯性公共产品募资”机制》](https://www.ethereum.cn/Ecosystem/retroactive-public-goods-funding)\\n\\n[《回顾 Optimism 首轮追溯性募资》](https://www.ethereum.cn/Ecosystem/review-of-optimism-retro-funding-round-1)\\n\\n## **Arbitrum**\\n\\nArbitrum 是另一个主流的 Optimistic Rollup 解决方案，上线之后其生态系统迅速发展扩大，在短短半年里，锁仓量已达到价值 20 多亿美元。\\n\\n协议更新：\\n\\n* 5 月 28 日，Arbitrum One beta 版本上线主网\\n* 9 月 1 日，Arbitrum One 主网 beta 向所有终端用户开放\\n* 10 月 12 日，Arbitrum 公布了 Arbitrum One 迭代版本 Arbitrum Nitro 的细节\\n* 10 月 22 日，Arbitrum 开放无需许可代币桥接功能\\n\\n关于未来的发展，Offchain Labs 表示，Arbitrum 不仅仅是一个 optimistic rollup 方案，将来会推出其他基于零知识证明 (zero knowledge proofs) 的扩容解决方案，同时还将继续改良 Arbitrum One optimistic rollup L2 方案。这是零知识化趋势的一个很好的例子，许多项目正在转向零知识方向。因为一旦 zk L2 技术得到了更好的实现并能够实现通用的 EVM 计算，执行环境就会更加灵活，或者说可扩展性更强。\\n\\n相关阅读：\\n\\n[《Arbitrum Rollup的工作原理》](https://www.ethereum.cn/Layer2/how-arbitrum-rollup-works)\\n\\n[《深入分析 Arbitrum 的安全机制》](https://www.ethereum.cn/Layer2/optimistic-rollups-and-ethereums-layer-2-solutions-examining-arbitrums-security-mechanism)\\n\\n[《Arbitrum 与 Optimism 的争议解决有何不同？》](notion://www.notion.so/5a53ecd30ebc4c77bb3b86d4daaa876d?v=eee1cbf915c946398bdac2dd19b8a575&p=d0f4d1dc7a7e406ca9e210c97d7ff2d8)\\n\\n# **写在最后**\\n\\n本文仅列举了当前比较主流的通用型 L2 解决方案，还��许多专用型解决方案没有一一总结，如：Loopring (支付、交易所)、Polygon Hermez (支付)、Fuel (DAO) 等等。纵观 2021 年，L2 协议发布、更新、集成应用的消息不断，但以太坊 L1 上的大部分用户仍未向 L2 迁移；2022 年 L2 赛道上会有什么样的机会等着大家？让我们拭目以待。\\n\\nECN的翻译工作旨在为中国以太坊社区传递优质资讯和学习资源，文章版权归原作者所有，转载须注明原文出处以及ethereum.cn，若需长期转载，请联系eth@ecn.co进行授权。\",\"timestamp\":1640961420,\"title\":\"以太坊主流 L2 方案回顾与展望\"},\"digest\":\"2fJOfnx31sbqg1DUr7U-dISaRsITMkMcXbPuX3Ovi5c\",\"authorship\":{\"contributor\":\"0x85ecCCF0495048873AdFd107343630C95d49F42C\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"XzR5s0njswN8U9DJxzc8DyAMo9pHfuOuKmfddh5aP2g\\\",\\\"y\\\":\\\"5c1Z9DEiDAxDoiolkPvuYspetlWbR69LJ3Iq5QMahB0\\\"}\",\"signature\":\"S6iLru7Yndmx9J6YPTK9GorBQ3jH5LWryoJqOnn3uj6Q78k0moqxGU4UHYnXOH4ExV5eJvFua5xBQdlCr1Wb6w\",\"signingKeySignature\":\"0xebcd94de3be9856de4ae698b5ca3013f470d6463fcf611492f7b0ed033879c8b28f74668d36aa3bf9553c6c956ad24aa4e28b460ca16898c13de3e72c9feaa4b1c\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"XzR5s0njswN8U9DJxzc8DyAMo9pHfuOuKmfddh5aP2g\\\",\\\"y\\\":\\\"5c1Z9DEiDAxDoiolkPvuYspetlWbR69LJ3Iq5QMahB0\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"U-TFK8xcE_5cHaus--6LDLy7d2WtzD_16S_b0enzPjU\"}"