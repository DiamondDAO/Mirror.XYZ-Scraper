"{\"content\":{\"body\":\"> Your home-cooking website stores its recipes and comments from users in a Multi-AZ RDS database, which is located in a private subnet. As of yesterday, it seems that your users are unable to access the website and see an error message \\\"512 - Cannot connect to the database\\\".\\n>\\n> What could be the reason why the website cannot connect to the database anymore?\\n\\n**Ref:**\\n\\n[https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-security-groups.html](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-security-groups.html)\\n\\n[https://docs.aws.amazon.com/vpc/latest/userguide/vpc-network-acls.html](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-network-acls.html)\\n\\n**Ans:**\\n\\n**DB Security Group inbound rules have changed**\\n\\nA security group acts as a virtual firewall that controls the traffic for one or more instances. When you launch an instance, you can specify one or more security groups; otherwise, we use the default security group. You can add rules to each security group that allows traffic to or from its associated instances. You can modify the rules for a security group at any time; the new rules are automatically applied to all instances that are associated with the security group. When we decide whether to allow traffic to reach an instance, we evaluate all the rules from all the security groups that are associated with the instance.\\n\\nThe following are the characteristics of security group rules:\\n\\nBy default, security groups allow all outbound traffic.\\n\\nSecurity group rules are always permissive; you can't create rules that deny access.\\n\\nSecurity groups are stateful\\n\\nFor the given use-case, if the DB Security Group inbound rules have changed, then the website may not be able to connect to the database.\\n\\n**Network ACL inbound rules have changed**\\n\\n**Network ACL outbound rules have changed**\\n\\nA network access control list (ACL) is an optional layer of security for your VPC that acts as a firewall for controlling traffic in and out of one or more subnets. You might set up network ACLs with rules similar to your security groups in order to add an additional layer of security to your VPC.\\n\\nThe following are the basic things that you need to know about network ACLs:\\n\\nThe default NACL allows all inbound and outbound IPv4 traffic and, if applicable, IPv6 traffic.\\n\\nYou can create a custom network ACL and associate it with a subnet. By default, each custom network ACL denies all inbound and outbound traffic until you add rules.\\n\\nEach subnet in your VPC must be associated with a network ACL. If you don't explicitly associate a subnet with a network ACL, the subnet is automatically associated with the default network ACL.\\n\\nYou can associate a network ACL with multiple subnets. However, a subnet can be associated with only one network ACL at a time. When you associate a network ACL with a subnet, the previous association is removed.\\n\\nA network ACL contains a numbered list of rules. AWS evaluates the rules in order, starting with the lowest numbered rule, to determine whether traffic is allowed in or out of any subnet associated with the network ACL. The highest number that you can use for a rule is 32766. AWS recommends that you start by creating rules in increments (for example, increments of 10 or 100) so that you can insert new rules where you need to later on.\\n\\nA network ACL has separate inbound and outbound rules, and each rule can either allow or deny traffic.\\n\\nNetwork ACLs are stateless, which means that responses to allowed inbound traffic are subject to the rules for outbound traffic (and vice versa).\\n\\nFor the given use-case, if the inbound or the outbound NACL rules have changed, then the website may not be able to connect to the database.\",\"timestamp\":1641205238,\"title\":\"[Web 2][AWS] SG/NACL\"},\"digest\":\"hbG3dv9c7O6AAahKydd1cDA93Z5PyvqIK_QwnKf1IzU\",\"authorship\":{\"contributor\":\"0xd0368eE169498faad1AF9aBFbdC8C9CAE432aBe5\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"BEsnhfd1DkMbOlZ4HfBQZmBmbzM9-wLJnhivFRpydP0\\\",\\\"y\\\":\\\"kIztSFJ6BfDUg3JD89g0RIFYZ25Au0U5MSyg4Bb1KcI\\\"}\",\"signature\":\"RtUnHdwkCq_d5zlAQxioWoD5hVGv0Df_G8P7RkXzDVpKviu9pVufsYWMmb5ErFQDzPD77q2Iu9t0f-1xDbfYYQ\",\"signingKeySignature\":\"0xce4ff89d77bbf6971dbe18d682a15f33c5095aad10718caa6f04339b5d1ec16f2ef845c3723a780509308ba22876d40fa5114045bf244d200de3342f53cfd3351b\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"BEsnhfd1DkMbOlZ4HfBQZmBmbzM9-wLJnhivFRpydP0\\\",\\\"y\\\":\\\"kIztSFJ6BfDUg3JD89g0RIFYZ25Au0U5MSyg4Bb1KcI\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"hbG3dv9c7O6AAahKydd1cDA93Z5PyvqIK_QwnKf1IzU\"}"