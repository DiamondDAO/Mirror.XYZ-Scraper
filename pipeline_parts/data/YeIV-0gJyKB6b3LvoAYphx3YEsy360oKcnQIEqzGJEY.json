"{\"content\":{\"body\":\"关于 EIP-1559\\n\\nEIP-1559 将调整当前以太坊主网（Eth1）的矿工费机制。该提案将引入 baseFee（基础费用），baseFee 会根据以太坊区块空间的使用情况自动调整链上操作所需的 Gas Price，从而帮助钱包服务商和用户便捷估算操作的费用。\\n\\n此外，EIP-1559 增加了一个新的交易类型，该类型允许用户自主设定对当前操作愿意支付的最高费用（maxFee）和支付给矿工的最高费用（maxPriorityFee），并可将最高费用与 baseFee 和矿工费用的差值退还用户。\\n\\n而且，EIP-1559 将销毁 baseFee（基础费用），一定程度上减缓 ETH 的通胀速度，因此，社区中不少人认为这是对以太坊经济的一项重要改进。\\n\\nimToken 如何支持 EIP-1559\\n\\nimToken 支持伦敦升级，对本次升级用户无需进行额外操作。\\n\\n升级完成后，imToken 用户仍可以正常使用当前版本 imToken 的以太坊钱包功能并发送交易。交易中的矿工费设置以 GasPrice 表示，GasPrice 的预估将基于 EIP-1559 规则。\\n\\n关于自定义设置 EIP-1559 费用机制中的 maxPriorityFee（支付给矿工的小费）和 maxFee（最高费用），该功能预计将在后续版本 imToken v2.9.6 中尽快提供。\\n\\n关于交易费用的变化，对此我们暂时无法预计，需要在 EIP-1559 启动后继续观察。\\n\\nEIP-1559 设计目标\\n\\n更好的用户体验\\n\\n当前的以太坊和比特币都采用第一价格竞拍机制，这种费用机制简单但缺乏效率，其中最大的问题在于费用估计。EIP-1559 试图通过让所有的交易尽可能支付相同的费用来解决该问题。多数情况下，用户只需要决定是否发起交易，而无需考虑费用该如何设置。\\n\\n可变区块容量\\n\\n区块空间利用率往往是变化的，有些区块空间闲置，而有些区块塞满交易。可变区块容量将允许区块大小随实际需求变动。\\n\\n更好的安全性\\n\\n当区块奖励消失，仅靠交易费用不足以激励矿工维护网络安全。EIP-1559 通过销毁交易费用，即可在不增加总供应量的前提下，延长通过区块奖励激励矿工的时间，从而保障网络的安全性。\\n\\n防止经济抽象\\n\\n简单来说，即只允许使用 ETH 支付交易费用。如果用户可用任何代币支付交易费用，则可能会威胁到 ETH 的储备地位。EIP-1559 通过强制把 ETH 作为费用代币来缓解这一问题。\\n\\nEIP-1559 如何工作\\n\\n升级前的矿工费机制\\n\\n● 矿工费 = GasPrice \\\\* GasUsed\\n○ GasUsed（gas）：交易消耗的总 gas 数量。\\n○ GasPrice（gwei）：即对单位 gas 的定价，1 gwei= 10^(-9) eth。\\n● 采用竞价机制，GasPrice 设置越高，交易处理速度越快。\\n● 交易由矿工处理，矿工费完全由矿工收取。\\n\\n升级后的费用机制\\n\\n● 交易费用 = （baseFee + PriorityFee）\\\\* GasUsed\\n\\n对比升级前后的公式，可以看出 EIP-1559 是将 GasPrice 拆分成了两个费率的组合：baseFee 和 PriorityFee。\\n\\nbaseFee（基础费用）\\n\\nbaseFee 会根据上一区块的空间利用率自动调整，如果利用率超过 50%，则提升当前区块的 baseFee；反之降低。\\n\\n按照 baseFee 计算公式，相邻区块间的 baseFee 变化幅度在 ±12.5% 之间：\\n\\n● 如果上一区块空间利用率为 100%，则当前区块 baseFee 将自动提升 12.5%\\n● 如果上一区块空间利用率为 0%，则当前区块 baseFee 将自动降低 12.5%\\n\\n不同于原来的矿工费机制，EIP-1559 升级后，交易费用不完全由矿工收取，其中 baseFee 将被完全销毁。\\n\\nPriorityFee（小费）\\n\\nPriorityFee 表示给矿工的小费，延续了竞价设计。如果希望自己的交易在区块中被尽快打包，可通过设置 PriorityFee 激励矿工，矿工将优先处理 PriorityFee 高的交易。\\n\\n同时，用户还可以自行设置 PriorityFee 的最高值，即付给矿工小费的上限，也叫 maxPriorityFee。\\n\\nmaxFee（最高费用）\\n\\nmaxFee 表示用户愿意对某笔交易可支付的最高交易费用。对应到公式中，maxFee = baseFee + maxPriorityFee，其中 maxFee 和 maxPriorityFee 都支持用户自行设置，baseFee 则由算法自动给出。\\n\\n注：升级后「矿工费」的说法已经不合适了，因为费用中的 baseFee 是要销毁的，只有 PriorityFee 由矿工收取。或许 EIP-1559 升级后，我们应该在以太坊生态中弃用「矿工费」的说法了。\\n\\nEIP-1559 交易费用计算实例\\n\\n● 升级前\\n○ 矿工费 = GasPrice \\\\* GasUsed\\n● 升级后\\n○ 交易费用 = （baseFee + PriorityFee）\\\\* GasUsed\\n○ maxFee >= baseFee + maxPriorityFee\\n\\n可能出现的各种费用情况，单位 gwei\\n\\nmaxFee\\tmaxPriorityFee\\tbaseFee\\t销毁\\tPriorityFee（矿工小费）\\n50\\t10\\t1\\t1\\t10\\n50\\t10\\t40\\t40\\t10\\n50\\t10\\t45\\t45\\t50-45=5\\n50\\t10\\t50\\t50\\t50-50=0\\n50\\t10\\t60\\t由于 maxFee 小于 baseFee，这笔交易无法进入当前区块，将继续排队\\n\\n如何看待 EIP-1559\\n\\nEIP-1559 历经了两年的讨论，至今仍然备受争议，对于 EIP-1559 的利弊，社区中有很多严肃深入的思考和讨论，感兴趣的同学可以查看：\\n\\n1. EIP-1559 提案：EIP-1559: Fee market change for ETH 1.0 chain\\n2. 中文资料汇总：链闻精选 | 读懂以太坊 EIP-1559 提案，它为何备受争议？\\n3. 英文资料汇总：EIP-1559 Resources\\n\\nEIP-1559 相关工具\\n\\n● [https://ethburned.info/这个页面统计了](https://ethburned.info/%E8%BF%99%E4%B8%AA%E9%A1%B5%E9%9D%A2%E7%BB%9F%E8%AE%A1%E4%BA%86) EIP-1559 启动后销毁的 ETH 数量。\\n● [https://www.gasnow.org/基于](https://www.gasnow.org/%E5%9F%BA%E4%BA%8E) EIP-1559 规则，GasNow 提供了对 baseFee、maxFee 及 maxPriorityFee 的设置建议。\",\"timestamp\":1636620631,\"title\":\"以太坊伦敦升级 | EIP-1559 是什么\"},\"digest\":\"cypgl9_4AYSstbpn1wZRKYrjPeblNdcNx-JT_A1oz6E\",\"authorship\":{\"contributor\":\"0x8a256b5C5b239dCc36d6D334449b4242C26f7Ad2\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"cbM1K14fcL6BcZtN1eENlXhkvUocA5GcLSAdTbC9NoM\\\",\\\"y\\\":\\\"7aQbVKQWxKsFc0IVgF3tZn9KI--8APNeZCb-EXRalsI\\\"}\",\"signature\":\"AuRdm7CfRoTXkiVGNACecmKlV895vAsfNQkyTgKOujXWRgEcXGM9mCoiGr5ODZEommO3L8H_K76sW_7D5hE9Dg\",\"signingKeySignature\":\"0xf1827d191b60db36535c21b65b978503f9d81ccd145d437901e7000a6835c85a7ac55121827aa7c3736626fd9f2f10f5c760e8410969c9b1f21969cd77c279891c\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"cbM1K14fcL6BcZtN1eENlXhkvUocA5GcLSAdTbC9NoM\\\",\\\"y\\\":\\\"7aQbVKQWxKsFc0IVgF3tZn9KI--8APNeZCb-EXRalsI\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"cypgl9_4AYSstbpn1wZRKYrjPeblNdcNx-JT_A1oz6E\"}"