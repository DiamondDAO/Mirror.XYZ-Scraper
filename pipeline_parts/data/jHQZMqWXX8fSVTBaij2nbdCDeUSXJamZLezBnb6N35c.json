"{\"content\":{\"body\":\"### Layer2 的前世今生\\n\\n区块链行业从比特币诞生至今，由于区块链去中心化、不可篡改、开放透明、匿名性等特征吸引了一大批有创造力的人才。特别是近几年区块链变成了技术和模式创新的高地，几乎每天都有新的想法萌芽。谈到区块链，除了比特币之外不得不提到的项目就是以太坊。公链在区块链世界犹如我们生活中的手机操作系统，目前手机操作系统份额基本被IOS和安卓占领，APP开发者只能在这两个平台上面开发APP。同样的，公链项目方也想成为区块链世界的操作系统平台。所以在2018年-2020年的这轮公链竞赛周期里，同期有EOS、NEO等新兴公链的出现。以太坊站在比特币巨人的肩膀之上，在2014年占有先发制人的优势引入了智能合约概念，加之强大的创新能力和安全性，使得以太坊在众多公链里脱颖而出，从此区块链世界有了各式各样的应用(DAPP)。 目前应用可以从业务上大致分为DeFi、NFT、游戏、DAO、Layer2等。\\n\\n然而，以太坊也有先天的不足之处。由于以太坊目前仍采用了POW共识机制，直接影响了以太坊的吞吐能力TPS(Transactions Per Second)。TPS数值代表公链每秒处理交易事务的数量，也是衡量一条公链的重要指标。目前以太坊理论TPS值只有25不到，即每秒最多只能处理25笔交易。相比EOS的TPS可以达到3000左右，这放到2021年以太坊的吞吐能力显然是太弱了。加之以太坊上如此多应用，我们都知道用户使用以太坊上的DAPP都需要消耗ETH作为矿工费。当用户想要自己的交易更快地被矿工记账时，只能提高给矿工的小费。比如近期用户为了Mint 热门的NFT从而提高了矿工费，造成越来越多的用户被迫带入内卷每个人都提高手续费，形成Fomo情绪，如下图以太坊网络Gas价格曾高达1000+ Gwei。\\n\\n![](https://images.mirror-media.xyz/publication-images/13VTMuLan4o_1K3_s-vNA.png?height=624&width=702)\\n\\n假如此时你需要转1 ETH给你的好友，你此时需要支付的矿工费可以简单的理解为 Gas \\\\* GasPrice = 21000 \\\\*1000\\\\* 10^9= 0.021 ETH。当你转账USDT时，需要花费的矿工费会更多，这转账手续费很明显是不合理的。以上公式中Gas大小可以理解为跟交易计算执行所销毁的，GasPrice是根据网络拥堵情况和用户决定的，越拥堵GasPrice会越高。故有人提出一个想法，即把大部分计算工作，从以太坊主链上分离出来，降低主链网络的负担，提高业务处理效率，从而实现扩容。并把比特币、以太坊这些公链统称为 Layer1网络，分担计算工作的网络称为 Layer2网络，至此今天的主角Layer2的概念就顺势诞生了。简单地讲，Layer2作用就是解决以太坊网络拥堵以及Gas费高昂的问题。\\n\\n### Layer2方案对比分析\\n\\n目前Layer2 有几种解决方案，主要包含状态通道、侧链、Plasma、Optimistic Rollup、Validium、zkRollup 六种方案。本文主要分析关注度较高并被长期看好的Plasma、Optimistic Rollup、zkRollup 这三种方案的原理以及其代表项目。\\n\\n![](https://images.mirror-media.xyz/publication-images/SiT04yMpYyrBijOcT40EE.png?height=224&width=500)\\n\\n#### Plasma方案工作原理\\n\\nPlasma 是以太坊社区中出现的第一个试图解决网络处理问题的方案，早在 2017 年被提出，也被寄予厚望。\\n\\n在介绍 Plasma 前需要先了解侧链的概念。由于区块链不可能三角导致以太坊拓展性及弱，开发者就想到了创建一个可连接到主网的独立区块链网络，也就是侧链，通过在侧链上高效处理交易来实现对主网的扩容。而侧链的潜在问题是安全性，作为一个独立的区块链，侧链需要有自己的矿工，建立足够的算力来保障安全，而足够的算力和不作恶的矿工，对于当前除比特币和以太坊之外的区块链来说，都是一个不小的门槛。\\n\\n不同于侧链，Plasma 将 Layer2 交易数据处理后提交到 Layer1，并且增加了欺诈性证明的退出机制，通过这种方式利用 Layer1 算力保障 Layer2 安全性。\\n\\n理论状态下，Plasma 可将以太坊的 TPS 提升至 1-9k。由此 Plasma 受到了广泛关注。但在随后的开发中，更多现实问题暴露出来：\\n\\n1、退出时间长：从Layer2提取资产到Layer1时，需要较长的挑战期\\n\\n2、需要定期上线：用户（或受委托方）必须定期上线，以实现对 Plasma 链的监控，否则出现黑客攻击事件时可能错过挑战期。\\n\\n3、批量退出对Layer1的压力：如果一个 Plasma 链上的大量用户在同一时间段内提取资产到Layer1,所有用户都要在挑战期内进行挑战以完成提款，这也就意味着会批量发布到Layer1上，产生踩踏效应，导致Layer1严重拥堵。\\n\\n4、数据可用性问题：理想状态下，Plasma 链的出块者会将特定的底层数据（Merkle 分支）发送给用户自己进行保管，也就是具备数据可用性。但万一操作者作恶，只发布 Merkle 根至Layer1，但拒绝发布底层的交易数据给用户（即存在数据不可用的可能性），这会使用户无法验证该 Plasma 链的正确性。\\n\\n5、Plasma 本质上是将计算和数据都转移到Layer1链下（自己的 Layer 2 网络中），只将链下的交易数据进行处理后的结果（Merkle 根）发布到Layer1。\\n\\n#### Polygon项目概述\\n\\nPolygon官网：<https://polygon.technology>\\n\\n尽管Plasma有以上的缺点，但值得注意的是，其代表项目Polygon除了开发Polygon Plasma网桥之外，对于那些需要一些灵活性和更快提款的DApps/用户，Polygon项目开发了Polygon POS网桥。Polygon PoS网桥由一组外部验证器保护。在一般的PoS系统中，安全性通常由验证者的资产担保和惩罚机制来保证。此外，网桥合约保留了管理权限，并通过代理由多重签名钱包控制。这个多重签名钱包从2/3多重签名开始，现在升级为5/8方案。在8 个签署人中，4位是Polygon联合创始人，另外4位是其他Polygon DeFi项目的主要成员。合约的所有者可以随时对合约进行升级和替换(没有延迟期)，这意味着所有者可以随时提取合约中的所有用户资产，这当然是一个潜在的安全风险。因此，现阶段通过Pos网桥转移到Polygon链上的资产并不是去信任的。Polygon目前高达65000的TPS，远远超越了 14TPS 的以太坊（将近 5000 倍的速度）。交易费用方面，Polygon 的交易费用约为$0.005727- $0.106735，也远远低于目前以太坊上令人望而却步的 gas 费。\\n\\n![](https://images.mirror-media.xyz/publication-images/lUITfBeDsQZ8atcm_asP_.png?height=730&width=2416)\\n\\nPolygon凭借优秀的TPS表现+低廉的交易手续费，吸引了大批的用户。截止到目前Polygon上的活跃地址数 66 万+，交易总数超过 3.4亿笔，TVL 约为 90 亿美元。\\n\\n![](https://images.mirror-media.xyz/publication-images/cBI-8ur9tBDhCdreRzBPC.png?height=742&width=2374)\\n\\n生态方面Polygon表现同样强劲，最大的NFT交易平台Opensea、TVL最高的借贷协议、著名的AMM去中心化交易所SushiSwap等应用均已接入Polygon。\\n\\n![](https://images.mirror-media.xyz/publication-images/Le9c08QINZIsMASFPCZ5K.png?height=1338&width=2504)\\n\\n#### Rollup工作原理\\n\\nRollup 是当前最受关注，也是最有可能真正落地的 Layer2 方案。上面提到以太坊网络每个区块中可包含的交易数量是有限的，而 Rollup 则是通过将数千笔交易打包压缩，然后将处理后简洁的数据同步到以太坊主网中实现 TPS 的提升，解决网络交易处理能力有限的问题。\\n\\n和 Plasma 的区别在于，Plasma 是将交易处理后的结果同步到 Layer1，我们无法直接通过它上传 Layer1 的数据了解到每一笔交易的信息，而 Rollup 压缩处理后同步到 Layer1 的交易数据中包含了每笔交易的基本信息。\\n\\n通过上面的描述也可以了解到，Rollup 方案对交易处理能力的提升是线性的，打包压缩的交易数量越多，打包后的数据也就越大。在实际测试中，Rollup 可将 TPS 提升 100 倍。在当前的以太坊网络下（即第一代以太坊），TPS 最高可达到 2k；和 Eth2.0的分片结合后，理论 TPS 可达到 20k+。根据如何确保压缩数据的正确性，Rollup 又可���为 zk Rollup 和 Optimistic Rollup。\\n\\n**zk Rollup方案工作原理**\\n\\nZK Rollup 通过零知识证明 zk-SNARKs 的密码学技术来确保安全性 ，ZK 是 zero knowledge （零知识）的缩写。零知识证明：证明者能够在不向验证者提供任何有用信息的情况下，使验证者相信某个论断是正确的。\\n\\nZK Rollup = 交易压缩 + 零知识证明（zk-SNARK）\\n\\nZK Rollup 核心思想是在链下达成交易共识，并通过零知识证明保证链下交易状态的安全性，同时压缩交易数据，最后将数据同步至主链。通过将每笔交易中的签名信息等进行零知识证明处理，来达到压缩交易数据的目的。目前的 ZK Rollup 方案可将当前以太坊网络的 TPS 提升 30 倍，达到每秒约 500 笔交易的处理能力。\\n\\n**zkSync项目概述**\\n\\nzkSync官网：<https://zksync.io/>\\n\\nzkSync由Matter Labs团队主导开发，目前zkSync整体TVL达到1.48亿美元，仅占全网Layer2锁仓量的0.43%。究其原因发现zkSync对智能合约创建零知识证明的过程较长，所以目前零知识证明算法对通用型的智能合约支持不友好，zk Rollup 方案更适用于普通转账交易等场景。Web3基础设施Gitcoin项目也从较早就支持zkSync的支付通道。但zk Rollup 方案无法运行DAPP等应用。Layer2探索仍处在一个早期阶段，我们也了解到Matter Labs团队正在开发兼容EVM智能合约的底层架构，相信在不久的将来EVM 兼容的智能合约将出现在 zkSync 上。\\n\\n![](https://images.mirror-media.xyz/publication-images/Z8GN-vKHNmUSDchXKoG95.png?height=1192&width=2030)\\n\\n值得注意的是在交易费用方面，zkSync 上ETH的交易费用仅为$0.17，同样的也远低于目前以太坊上令人望而却步的 gas 费。\\n\\n![](https://images.mirror-media.xyz/publication-images/X2u72vfzvimgRXTk8xLrq.png?height=912&width=1016)\\n\\n**Optimistic Rollup方案工作原理**\\n\\n由于 zk Rollup 存在无法良好支持智能合约，生成零知识证明耗时较长的问题，2019 年 6 月，Optimistic Rollup 方案被提出，这个方案中去除了零知识证明，增加了惩罚机制，来达到保障数据安全性（略低于 zk Rollup 方案）的同时又可以更方便地支持通用性智能合约的目的。\\n\\nOptimistic Rollup 方案采用了 OVM （Optimistic 虚拟机），OVM 是功能完备、与 EVM （以太坊虚拟机）基本兼容的环境。通过 OVM，将 DPP 移植到 Layer2 变得简单，而且也使得项目方无需部署各种 Layer2 扩容方案，而只需接入 OVM，就可以使用其中的各类 Layer2 结构。\\n\\n因此，目前 Optimistic Rollup 更适合于 DeFi 应用，此方案可将 TPS 提升至 100，通过 BLS 签名聚合技术可进一步提升至 500。\\n\\n**Optimism项目概述**\\n\\n官网：https://optimism.io/\\n\\nOptimism是在以太坊上建立即时交易和可扩展的智能合约的Layer2网络，并在Optimism 创建 OVM，旨在与以太坊 Layer1 配合使用，既保留了以太坊主网级别的安全还能大大降低gas费。投资机构也是加密行业顶尖投资机构Paradigm和A16z。\\n\\nOptimsim自上线以来总交易次数已经超过180+万次，用户地址数超过9万，用户交易手续费约为$2.2，TVL达到23.7亿美元，占全网Layer2锁仓量的6.9%。新增用户量近期剧增，推测与Optimism发推下周有大事件公告有关，用户猜测可能项目方会发行通证并且对早期用户空投。\\n\\n![](https://images.mirror-media.xyz/publication-images/1gxWRKIb3jnjnSCVGiB_o.png?height=410&width=1658)\\n\\n![](https://images.mirror-media.xyz/publication-images/XZDhG6sWFLRr6rKxRIj0I.png?height=410&width=1648)\\n\\n![](https://images.mirror-media.xyz/publication-images/fmR_zb1RUN9s6MmOTOpbq.png?height=410&width=1648)\\n\\n![](https://images.mirror-media.xyz/publication-images/wtNRAYQjI9ZrP2rxLr162.png?height=584&width=1624)\\n\\n生态应用方面进展较慢，仅有UniSwap和Synthetix接入。让我们一起期待下周的重磅消息究竟是什么。\\n\\n**Arbitrum项目概述**\\n\\n官网：<https://arbitrum.io/>\\n\\nArbitrum和Optimism都属于Optimistic Rollup，那么两者之间究竟有什么不同点呢？Optimism 和 Arbitrum 之间最大的不同点在于欺诈证明机制的实现，即，一笔交易执行完后，如果状态引起争议该如何解决？Optimism 采用单轮欺诈证明。也就是说，Layer 1 会在链上执行整个 Layer 2 交易，来验证状态根。这使得欺诈证明具有即时性，这是优点。Arbitrum 采用多轮欺诈证明。简单来说，就是通过二分查找，找到引起分歧的那个区块的第一个操作码。找到之后，只需在链上执行这个操作码。Optimism 的方法有一个很大的缺点。想象一下，如果出现硬分叉，导致以太坊共识规则改变，操作码被删除/重新定价或修改。这时，突然在 Layer 1 上重新执行过去的交易会得到截然不同的最终状态。我不知道 Optimism 团队会如何解决这个问题，但是我想真到了那一天他们会想出办法的。Arbitrum 完全控制 AVM 规范，因此不用担心这种问题。\\n\\nArbitrum的发展速度已经远超人们的预期,上线仅2周左右的时间，其TVL已经突破25亿美元，占全网Layer2锁仓量的73% ，远超其它Layer2协议，且还在快速增长。其TVL在未来一段时间里大概率会超越大多数非以太坊公链。\\n\\n用户增长曲线非常陡峭，目前已经超过11万个地址。\\n\\n![](https://images.mirror-media.xyz/publication-images/ykYp7U9e5p-o5Zqm5PMrb.png?height=1168&width=2736)\\n\\n日交易次数已经突破25万次，近期有所回落\\n\\n![](https://images.mirror-media.xyz/publication-images/PW9dmrHxTGqCk2mlAsz7T.png?height=1146&width=2692)\\n\\n生态方面，目前已经有Uniswap、Sushiswap、DoDo、Balancer、MCDEX、MetaMask、Chainlink等，未来会有越来越多的DAPP加入。包括各大交易所宣布支持Arbitrum网络的充提，将从最大程度增加了Arbitrum上资产的流动性。\\n\\n![](https://images.mirror-media.xyz/publication-images/Qo7q9D0z1RZU1HYd0blju.png?height=1496&width=2972)\\n\\n# 总结\\n\\nLayer2的发展仍处于一个早期阶段，本阶段会是一个不同方案割裂的阶段，以上分析的方案和项目均有不同维度的优缺点，相信随着时间的推移和市场的验证，Layer2会向融合的状态聚拢，继续为以太坊生态作出贡献。从目前Layer2的格局看，Rollup仍然是受主流追捧的对象，Rollup方案中短期看好Optimistic Rollup，长期看好zk Rollup。未来如何，请待时间证明。本文仅从项目原理和生态数据角度分析，不构成任何投资建议。\",\"timestamp\":1640595942,\"title\":\"Layer2 有哪些项目值得关注\"},\"digest\":\"HInFJHUMKbgk0h8t2_Ye_P79r-NfZPpVnUz5s1fnzH8\",\"authorship\":{\"contributor\":\"0x8C5da2937C664882111FCfe717ca7AF02A6e6440\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"49N7s1Asua_H37YEOakedL0eSZzQUSOMyC8lHyPV51Y\\\",\\\"y\\\":\\\"pBctOm9FvXT01C_5JOsspQsq90feb-WdcmFXpTx7eps\\\"}\",\"signature\":\"Ugftt5hj0sY_E9BvGub8EuKmjx7Dohmj4kqWNgpNY27B6OJPti13txaEue8f-V-w7x50Mx3sZXW72k6aGhyV9Q\",\"signingKeySignature\":\"0xaaa8d37139172f9b1784bdf4cf79e47a636e3f0a66924e316c28a6574f8aabce20dd29ba267b5f0653604cbef010a2ac6a1b8c9ad8ec7d0035a05374a6859dc71c\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"49N7s1Asua_H37YEOakedL0eSZzQUSOMyC8lHyPV51Y\\\",\\\"y\\\":\\\"pBctOm9FvXT01C_5JOsspQsq90feb-WdcmFXpTx7eps\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"HInFJHUMKbgk0h8t2_Ye_P79r-NfZPpVnUz5s1fnzH8\"}"