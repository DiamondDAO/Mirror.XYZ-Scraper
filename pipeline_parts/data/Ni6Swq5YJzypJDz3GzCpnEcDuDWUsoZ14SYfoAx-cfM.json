"{\"content\":{\"body\":\"原文标题：《An Empirical Study of DeFi Liquidations:Incentives, Risks, and Instabilities》 原文来源：Kaihua Qin、 Liyi Zhou、Pablo Gamito、Philipp Jovanovic、Arthur Gervais，帝国理工学院 原文编译：律动 0x49 金融投机者习惯于通过寻求杠杆的增加来增大其潜在的收益。债务是一种流行的杠杆形式。与此同时，DeFi 借贷市场正在蓬勃发展，其总锁仓价值（TVL）已经超过了 398 亿美元。然而，债务的出现将带来新的风险，即清算风险。在这一过程中，质押用户将以折扣价向清算人出售债务质押品。 目前，市场上少有关于清算机制定量的见解。本文将以占据以太坊 85% 借贷市场的 Aave、Compound、MakerDAO 和 dYdX 入手，探索以太坊借贷市场的广度。 本文系统化了流行的清算机制，并提供了一种首创的方法衡量这一机制的客观性。在研究后发现，现有的清算设计有效激励了清算人，但却出售了过多贴现质押品，而这一部分费用是由质押用户承担的。本文将衡量清算参与者所面临的各种风险，并量化现有借贷协议的不稳定性。 借贷机制与清算流程的系统化 出资人是一个拥有剩余资本的用户，他希望通过将资金借给第三方以赚取资本的利息。 借款人通过质押一定资产，向出资人借入资产。同时，借款人需要向出资人支付一定的利息费用。由于 DeFi 中并没有 KYC，因此 DeFi 里的借贷都需要超额抵押。 清算人则通过观察 blockchain 网络是否存在安全系数低于 1 的借贷，如低于 1，将介入并进行清算。通常来说，清算人都是机器人，系一套自动执行 blockchain 查询、价格观察、尝试清算的自动化工具。 当然，清算人之间同样存在竞争，抢先清算无处不在。需要注意，清算分为固定价差的原子清算和拍卖等形式的非原子清算。前者在一次 blockchain 交易中完成，后者需要清算人在多笔交易中与借贷池进行交互。两种清算的区别将在下文说明。\\n\\n![](https://oss-cdn1.bihu-static.com/image/20211029/13aec13f868d4739ac9d49ef83848175\\\\_GY3TQKRTGQ3Q.png)\\n\\n#### 固定价差清算\\n\\n固定价差清算允许多个清算人在一个时间段内出价，可清算的贷款可用一个预先确定的折扣即使参与清算。如，Aave 允许清算人以市价 15% 的折扣购买质押物，因此折扣值或清算价可预先得知。采用固定价差清算的模式可避免长时间的清算拍卖，省去了时间成本和交易费用。此外，清算人可使用闪电贷进行清算，降低了持有清算所需资产的货币风险，不过闪电贷的使用将会增加了清算人的成本。\\n\\n举例：\\n\\n假设目前 ETH 价格为 3,500 USD，清算比率为 80%。用户 A 质押 3 枚 ETH，质押物目前价值 10,500 USD，用户可借资产上限为 8,400 USD（10,500\\\\*80%）。如果 ETH 价格下跌至 3,300 USD，这意味着质押物目前价值 9,900 USD，此时 3 枚 ETH 的可借资产上限为 7,920 USD (9,900\\\\*80%)。系统安全系数此时已经低于 1，即 7,920/8,400 ≈ 0.94，因此质押物进入清算。\\n\\n清算人提交清算交易，用于偿还 50% 的债务，即 4,200 USD。作为回报，清算人可以以折扣价 3,000 USD/ETH (3,300/(1+10% 清算折扣)) 进行清算。本次清算，清算人获得了 420 美元净利润（（4,200/3,000）\\\\*3,300-4,200）。\\n\\n#### 拍卖等形式的非原子清算\\n\\n拍卖清算遵循以下几种方法：\\n\\n·贷款符合清算条件，即安全系数降至 1 以下；\\n\\n·清算人开始进行拍卖，这一过程可能持续数小时；\\n\\n·有兴趣的清算人开始报价，出价最高者获得质押物；\\n\\n·拍卖将根据拍卖合约中的规定结束。\\n\\n清算人在 MakerDAO 系统中寻找资不抵债的借贷，一旦寻找到可进行清算的交易，便可调用 bite 函数触发清算流程。清算流程是一个两段式拍卖的过程。（关于这一部分，建议有能力的用户直接阅读代码，[点击阅读](https://github.com/defiAnalysis/MakerDAO-DSS) DeFi 爱好者翻译的 MakerDAO DSS 代码，下文也将对该翻译进行引用。）\\n\\ntend：tend 是第一阶段竞拍，第一阶段拍卖为全部抵押物，如果竞拍时间到结束且价格还没到可以偿还完借贷金额加上稳定率费用，则价高者得胜，每次出价需要在上个出价人基础上最少加上一定比例 (具体值系统参数确定)。当这一竞拍阶段竞拍者出价刚好偿还完借贷额加稳定费用，则进行第二阶段拍卖。\\n\\ndent：竞拍者保持第一阶段最后出价，及可以还完全部借贷加稳定费用，降低抵押物数量，每次也是最低一定比例下降。\\n\\nTend 和 dent 的流程可见下图：\\n\\n![](https://oss-cdn1.bihu-static.com/image/20211029/5725c2b41c894512b8ba531bc6b69401\\\\_G42TEKRRHA4Q.png)\\n\\n拍卖时间终止后，调用 deal 函数完成竞拍，质押物将转移给获胜者。\\n\\n### 清算研究\\n\\n通过对 Ethereum 链上数据的抓取，获得了各协议通过清算出售的质押物价值：\\n\\n![](https://oss-cdn1.bihu-static.com/image/20211029/cc994497874f48cc8db079914615db95\\\\_G42DSKRUGUYA.png)\\n\\n从协议上线到 Ethereum 区块高度 12,344,944，一共进行了 28,138 次成功的清算。上图的的清算价值数据以清算结束时刻的质押物 USD 价格进行计算。Aave、Compound、dYdX、MakerDAO 4 个平台的总体清算质押物累计金额超过了 8.07 亿美元。\\n\\n2020 年 11 月，Compound 清算量的提高主要是 Compound 预言机喂价提供的 DAI 价格波动引起的。2021 年 2 月的显著上升主要原因则是由于加密资产价格的剧烈波动。\\n\\n#### 清算人损益\\n\\n28,138 次成功的清算的总利润为 6359 万美元。绘制各协议不同月份的清算利润获得下图：\\n\\n![](https://oss-cdn1.bihu-static.com/image/20211029/794eb389786d43e092587ad9ff48e431\\\\_GE2TIMJKGU3DE.png)\\n\\nMakerDAO 2020 年 3 月的清算利润为 1,313 万美元，为历史之最。主要原因是 3 月 12 日 ETH 价格暴跌，清算机器人没有快速响应，同时，网络拥堵导致清算人的交易没有被矿工打包入块。延迟导致有能力清算的用户以极低的成本手动清算并赢得了拍卖。\\n\\nCompound 分别在 2020 年 11 月和 2021 年 2 月产生了价值 838 万美元和 961 万美元的清算利润。前者的原因在于预言机喂价机制，后者似乎和预言机或清算机器人无关。\\n\\n如果每个 Ethereum 地址代表一个用户，那么一共有 2011 个清算人。平均而言，每个清算人的利润为 3.16 万美元。最活跃的清算人自己进行了 2,482 次清算，赚取了 741.75 万美元利润。\\n\\n还有一个有意思的发现，MakerDAO 中有 641 次清算产生了亏损，总损失约 467.44 万美元么。之所以产生损失，主要原因在于拍卖过程中，质押物价格变化导致。\\n\\n![](https://oss-cdn1.bihu-static.com/image/20211029/1ccec6d8a62f4e31bb0731b813162f23\\\\_G42DCKRTGA2Q.png)\\n\\n固定价差清算\\n\\n在 28,138 次成功的清算中，Aave V1、Aave V2、Compoiund 和 dYdX 分别进行了 3,809、1,039、6,766 和 9,762 笔固定价差清算。\\n\\n下图统计了固定价差清算的 gas 价格和平均 gas 价格。为了更直观观察，平均价格通过计算 6,000 个区块的移动平均 gas 费用得到平滑曲线（图中黑线）。\\n\\n![](https://oss-cdn1.bihu-static.com/image/20211029/68da3b324cea4900b243c327a1c60303\\\\_GE2TGMZKGQ3DG.png)\\n\\n事实上，该数据表明了清算过程充满了竞争性，73.97% 的清算人支付了高于平均水平的 gas 费用。\\n\\n拍卖清算\\n\\nMakerDAO 一共进行了 6,762 次拍卖清算，其中 3,377 次在 tend 阶段结束，剩余 3,385 次在 dent 阶段结束。参与清算的用户平均数只有 1.99。每次参与清算的用户数为 2.63±1.96，参与 tend 清算的用户数为 1.58±0.95，参与 dent 清算的用户数 1.06±1.62。\\n\\n如将 MakerDAO 清算拍卖持续时间定义为拍卖开始和最终完成之间的差值，将清算持续时间进行了可视化：\\n\\n![](https://oss-cdn1.bihu-static.com/image/20211029/6243f3bc223b4c5cb1a6944a25c6f538\\\\_G4ZTKKRUGM4A.png)\\n\\n有趣的是，在 2020 年 3 月 12 日后，MakerDAO 清算持续时间明显变长了。平均而言，清算持续时间在 2.06 ± 6.43 小时（平均值 ± 标准差）。有 4,173 次清算在 1 小时内完成。同时，很少有清算持续时间超过预期，可能的原因在于相关清算人没有完成拍卖，因此没有获得质押物。例如，最长一次清算持续了 346.67 小时，但是其最后一次出价时间为终止前的 344.6 小时。\\n\\n#### 风险\\n\\nAave 和 Compound 的清算机制赋予了清算人在可进行债务清算时清算最多 50% 质押物的权利。这一设计有利于清算人而非质押用户。因为债务问题可能通过出售低于 50% 的质押物便可解决。\\n\\n选择一个适当的清算系数是一件具有挑战性的事，因为 blockchain 的交易吞吐量有限，清算机制应该尽可能减少清算事件以及总体交易的笔数。\\n\\n拍卖机制不指定清算系数，因此提供了一种更细的方法来清算质押物。不过，拍卖清算人可能面临拍卖期间，质押物价格波动产生的损失。就如上文提到的，MakerDAO 清算历史上的 641 次亏损清算。参与 MakerDAO 清算的用户需要注意网络拥堵和价格波动等风险。\\n\\n综上，部分拍卖机制，如维克里拍卖（Vickrey auction）、逆向荷兰拍（Dutch reverse auctions）可能具有缓解过度清算的潜力。\\n\\n除了过度清算以外，坏账也是其中的一部分风险。在借贷中，划账又可分为两种，质押物资不抵债（坏账 I）和交易费用高于参与清算获利（坏账 II）。\\n\\n对目前的坏账数量进行测算，假设质押用户在还款时需要承担一定的随机成本，这一成本为 100 美元。那么截止 2021 年 4 月 30 日，坏账 I 和坏账 II 的数量分别为 351 和 3,525。需要注意，由于坏账的产生，Aave V2 的流动性减少了 8.74 万美元。而 dYdX 由于使用了外部保险基金，注销了坏账 I，因此不存在这一类型的坏账。\\n\\n![](https://oss-cdn1.bihu-static.com/image/20211029/ae678a7299e64935bd1b57e519ccf6d1\\\\_G4ZDGKRSGY2A.png)\\n\\n值得重视的是坏账 II，因为坏账 II 的积累可能导致产生更多的坏账 I。当清算交易费用为 100 美元是，Compound 上存在 350 个无利可图的清算机会，这部分质押物价值 12.5 万美元。\\n\\n不同清算成本，Aave V2、Compound 和 dYdX 无利可图的清算机会如下：\\n\\n![](https://oss-cdn1.bihu-static.com/image/20211029/07b369ad936a433291eb1471139818ea_G4ZTQKRRHE3A.png)\\n\\n当然，清算人还可借助闪电贷完成固定利差清算，具体步骤如下：\\n\\n1、借入 X token 偿还债务；\\n\\n2、使用闪电贷偿还质押人的债务，并获得质押物 Y；\\n\\n3、将部分质押物 Y 兑换成 X；\\n\\n4、偿还闪电贷 X 以及利息，剩余利润归清算人所有。\\n\\n如果闪电贷清算无利可图，那么闪电贷便不会成功进行。链上数据显示，一共有 623 笔闪电贷用于清算，累计借出金额高达 4.83 亿美元。并且，使用 dYdX 进行闪电贷的资金量更大，原因可能在于 dYdX 较低的闪电贷利息。\\n\\n![](https://oss-cdn1.bihu-static.com/image/20211029/30376d26e906417b955d08eafb7e19ff_G42DEKRTGU3Q.png)\\n\\n#### 不稳定性\\n\\n为了衡量借贷平台对不同 token 下跌的反应程度，本文量化了清算敏感度，即 Crypto 价格的下跌可能引发多少质押物的清算。\\n\\n研究发现，Aave、Compound、MakerDAO 和 dYdX 4 个平台对于 ETH 的下跌都很敏感。如发生 2020 年 3 月 12 日 ETH 下跌 43% 的情况，MakerDAO 将产生高达 10.7 亿美元的清算。\\n\\n有意思的是，尽管 Aave V2 和 Compound 采用类似的清算机制并且 TVL 也较为接近，但 Aave 在下跌过程呈现更加稳定的状态。通过进一步研究发现，Aave V2 的用户喜欢进行多 token 质押，因此，很难因为单一 token 价格下跌而产生大量清算。\\n\\n![](https://oss-cdn1.bihu-static.com/image/20211029/3613b29b640044f8bd05bdcbc5a042c4\\\\_GE2TKNZKGEYDAMQ.png)\\n\\n同时，通过质押稳定币贷出另一种稳定币的策略也减少了清算的发生。收集 DAI、USDC 和 USDT 3 种稳定币之间的链上价格关系，发现截止在 2020 年 5 月 1 日至 2021 年 4 月 30 日，3 种稳定币在 99.97% 的时间内价差都在 5% 内。不过在区块高度 10,578,280，USDC 和 DAI 的价差为 11.1%。\\n\\n### 清算过程的博弈对借贷角色的影响\\n\\n清算过程其实是一个零和游戏，清算人获利的背后是质押人的损失。因此，可以从利润上推断哪种机制对清算人或质押者更有利。\\n\\n为避免不同 Crypto 的价格波动影响，此处只研究质押 ETH 借出 DAI 的清算，这一借贷存在于 4 个平台，计算月度清算利润与成交量的比率，得到下图：\\n\\n![](https://oss-cdn1.bihu-static.com/image/20211029/a0be94a7a5c34ae7a8c4a081f133c015\\\\_GE2TGOBKGQ3TK.png)\\n\\n结果显示，dYdX 的值最高，意味着 dYdX 对清算人最有利，对质押者最不利。这一结果与 dYdX 未设置清算系数相吻合，因为这表明债务安全系数一旦降低到 1 以下，清算者便可介入进行清算。\\n\\n除了 2020 年 3 月，MakerDAO 的值一直低于 Compound。\\n\\n令人惊讶的是，虽然 Aave 采用和 Compound 相类似的清算机制，但 Aave 的计算值低于 Compound，尤其是 Aave V1。推断这是因为 Aave 上 DAI/ETH 清算事件的数量较少的原因。Aave 的案例较少，得出的数据可能无法产出代表性的结论。\\n\\n因此，综上可得出结论，拍卖机制比固定价差清算更有利于质押用户。\\n\",\"timestamp\":1636628034,\"title\":\"DeFi清算研究：激励、风险与不稳定性\"},\"digest\":\"IDVQ0EfDPZbgoM4bqA_qhKxs0GkHY9BPt2LWRq85L_k\",\"authorship\":{\"contributor\":\"0xdeF51d2E674aF1d4976C3bB0e37d5A206CBf85a3\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"RB71QK4InD0f84DSU3CGk3cDPNSv8UE5NnP7jmi02q4\\\",\\\"y\\\":\\\"fwwDQhZ0BF_kZeXDzi1OuOJclyjF7yWTPt3fZYZm9KA\\\"}\",\"signature\":\"tf52vz1E_ZFG7NSs02m8qqIDzqsJmZVjrtj8Hv4SgcdghFvktUBoFaOsy-0aTwl4cDPTSrN3HyJShx0zqmO_EA\",\"signingKeySignature\":\"0x919d752bcc4ab5a81ff90ec1b470ef0b54748eb536e18ac2c9b18ba9c81f97aa2b187e4c07c45bd797aa1298f6af0b73c66d9b4499c4e2bab33f6f9e2db0d4c91b\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"RB71QK4InD0f84DSU3CGk3cDPNSv8UE5NnP7jmi02q4\\\",\\\"y\\\":\\\"fwwDQhZ0BF_kZeXDzi1OuOJclyjF7yWTPt3fZYZm9KA\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"IDVQ0EfDPZbgoM4bqA_qhKxs0GkHY9BPt2LWRq85L_k\"}"