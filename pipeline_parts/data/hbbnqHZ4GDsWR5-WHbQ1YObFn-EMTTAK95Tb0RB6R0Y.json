"{\"content\":{\"body\":\"第五章：智能合约与前端/设计\\n亲爱的 Leservians，在本章中，我们深入研究了与 Leserve 相关的智能合约架构和前端/设计方面。我们相信阐明这些方面至关重要，因为它使社区能够了解我们协议的主干。共享这些信息使我们能够为我们所做的许多决定带来透明度、清晰度和合理性。\\n\\n\\n智能合约架构\\n智能合约架构是将 Leserve 与任何其他 Olympus 相关协议区分开来的关键要素之一。大多数受奥林巴斯启发的协议都在与 EVM（以太坊虚拟机）兼容的区块链上运行，因此利用与奥林巴斯完全相同的代码。然而，Terra 区块链与 EVM 不兼容，因此需要一种完全不同的方法和解决方案，因为代码不能简单地复制并在 Terra 的上下文中使用。\\nTerra 由 CosmWasm 和 Rust 提供支持，它们采用与 Solidity 和 EVM 驱动的解决方案截然不同的基础架构和逻辑。因此，Olympus 的每一行代码都必须在 CosmWasm 和 Rust 的上下文中完全重新构想和重写。我们没有将完全的逻辑和结构改造视为不利和劣势，而是将其视为改进奥林巴斯当前技术设计和架构的机会。因此，Leserve 被创建和开发为一种完全原生的储备货币，专门为 Terra 区块链设计和迎合。\\n\\n\\n核心合同\\nLeserve 合约生态系统由其核心合约代表和体现。这些持有资金并铸造我们的基本 LSRV 代币。核心合约还负责计算每项资产的正确无风险价值。\\n\\n\\nLSRV 代币\\nLSRV 代币是标准的 CW20 代币。只有国库合约拥有铸造代币的权利和能力。这有效地确保了每个 LSRV 令牌都至少得到 1 个 UST 的解释和支持。\\n\\n\\n国库\\n国库合约是 Leserve 的核心。它的主要目的是安全地存储资金并针对它铸造 LSRV。从技术上讲，财政部本身并不知道 Leserve 系统的其余部分。这种结构和方法确保可以以模块化方式扩展 Leserve 的用例，而无需更改或更改财政部代码。\\nLeserve 财政部支持以下用例：\\n•\\t存储三种资产类别：\\n•\\t储备马厩，例如 UST\\n•\\tLP代币\\n•\\t投资 / Luna 等波动性资产\\n•\\t使用或不使用 LSRV 铸币存入资金\\n•\\t提取资金和负债\\n•\\t为系统的其他部分提供资金，例如抵押和产生收益的策略\\n\\n\\n价值计算器\\n价值计算器是一个合约，负责计算协议遇到和交互的资产的无风险价值和 UST 估值。它为每个资产类别采用不同的价格来源方法：\\n•\\t假定稳定的值为 1 UST。\\n•\\tLP 代币价格是根据链上的流动性池数据计算的。\\n•\\tLuna 价格取自 Terra 区块链提供的价格预言机。\\n•\\t任何其他资产价格都将来自在 Terra 网络上推出的 ChainLink 预言机。\\n在计算 RFV（无风险价值）时，每个资产都可以设置一个风险比率。这个数字在 0 到 1 的范围内。0 代表完全没有风险的资产，而 1 代表极不稳定的资产，不能用于 LSRV 支持。\\n资产的最终 RFV 等于：\\nRFV = 资产价格 \\\\* (1-riskRatio)\\n使用风险比率来评估资产是 Leserve 对 DAO 剧本的核心创新之一。它使我们能够更有效地利用和利用易变资产，同时使 Luna 或以太坊能够直接支持 LSRV 代币。\\n\\n\\n保税合同\\n绑定合约为整个 Leserve 生态系统提供并促进绑定服务。Leserve 债券合约的设计方式确保合约可以被第三方重复使用。因此，对于 Leserve 来说，为 Terra 生态系统推出债券即服务产品应该是一件容易的事。\\nLeserve 提出的另一项引人注目的创新是，该协议仅包含一个 Bond 合约（多次部署）。价值计算器合约抽象了不同资产类别债券之间的所有差异。因此，该解决方案大大降低了协议的复杂性和冗余度。\\n此外，Leserve 债券允许多个债券到期期限。单个债券到期时间越长，激励越大。这确保了 Leserve 最伟大的信徒得到了有效的认可和适当的奖励。\\n债券支付质押的 LSRV。因此，折扣可能很低，最终用户很容易计算出债券的盈利程度以及他们在到期日可以获得多少。我们计划在 GUI（图形用户界面）中提供一个计算器，以增强和简化这方面的用户体验。\\n此外，我们还知道最近 Olympus 债券配置错误，导致 OHM 国库损失超过 145 万美元。我们正在寻找进一步加强协议的方法，并正在实施相关解决方案来解决类似的问题和漏洞。\\n\\n![](https://images.mirror-media.xyz/publication-images/reQ6yk8-Gve4ooB1JihEk.png?height=812&width=650)\\n\\n当债券价格高于最低债券价格时，Leserve 的合约不会重置最低债券价格。这可以作为此类漏洞利用的安全措施。\\n\\n\\n抵押合约\\nStaking 是奖励和激励 LSRV 持有者的主要机制。负责 Staking 的四个合约紧密遵循 Olympus 的架构。Staking 合约是 LSRV 持有者可以质押他们的代币以换取 sLSRV，这是一个定制的 CW20 代币合约。sLSRV 不断变基以保持其供应量等于 LSRV 的供应量。\\n我们正在考虑将 sLSRV 令牌仅用作内部机制，而不是将其暴露给最终用户。相反，当质押时，用户将直接获得 gLSRV 代币，这些代币代表 Leserve 包装的、质押的 LSRV 代币，该代币也可用于协议的治理相关方面（我们过去称之为 wsLSRV）。\\n我们相信这将产生额外的简单性和清晰度，因为用户不必广泛地包装和解开他们的代币，花时间了解各种代币之间的关系，并鼓励用户从一开始就直接参与协议的各个方面，并鼓励他们参与协议的各个方面。第一次互动。直接提供 gLSRV 代币还可能鼓励持有者参与 DAO 的治理，并确保它对加密空间的新手来说总体上更加平易近人和包容。\\n\\n\\n治理合同\\n治理合约实施 LeserveDAO 的链上治理模型，包括其理事会和大会。在撰写本文时，该合同主要处于概念阶段。我们的首要任务和重点是发布所需的合同。但是，Leserve 的 gLSRV 代币将在发布后立即可用。\\n不久之后，我们将启动声誉合约，允许 Leserve DAO 跟踪链上的声誉。CW20 合约的建立将确保声誉不可转让。声誉将绑定到获得它的地址。三种声誉类型（Leservanomics、Tech、Community）的跟踪将通过多次部署合约来完成。\\nLSRV 治理合约集将是最后一个发布。该合约将持有并包含宪法的哈希值，并将实施理事会、大会、提案、司法和否决的机制。\\n所有 Leserve DAO 合约都归 CW1 所有权代理所有。这允许在适当的时候轻松地逐步将智能合约移交给 DAO 治理。\\n\\n\\n创收合同\\nLeserve DAO 应该为其 gLSRV 持有者创造收入，而该组中的合约可以实现这一点。\\n资金分配合约管理各种策略之间的资金分配。根据风险/回报矩阵分配资金。风险/回报矩阵是 Leservanomics 委员会的主要风险管理工具。\\n国库资金被分配到各种协议策略。该策略获得的任何代币都将存入国库。与价值计算器有很好的相互作用。以 AnchorStrategy 为例。通过将 UST 存入 Anchor，Leserve 获得了 aTerra 代币。由于相关的智能合约和流动性风险，这些不能被视为和 UST 一样安全的资产。因此，将其风险比设置为高于 0，例如设置为 0.2。（风险比率将由 Leservanomics 委员会设定）。无法像普通 UST 那样支持相同数量的 LSRV 代币，但 Leserve 仍然可以支持 80%。这意味着我们可以用它支持 LSRV 代币，同时它会产生收入！\\n\\n\\n启动合约\\n我们正在编写一组 Launch 合同，以促进以下内容：\\n•\\taLSRV 代币的初始白名单销售，以创建初始资金供应并为下一个启动步骤提供流动性\\n•\\t投票促进 aLSRV 持有者是否部署。\\n•\\t根据启动投票结果重新声明 aLSRV/UST。\\n\\n![](https://images.mirror-media.xyz/publication-images/fSjZ3eRWQSDw6qtIbiCko.png?height=614&width=650)\\n\\n设计语言\\n已经建立了一套品牌和营销指南，以确保准确和一致地代表 Leserve 品牌。设计语言的开发旨在准确反映 Leserve 的价值观、使命和愿景，同时确保其保持最新的 UI/UX 标准。\\n<https://drive.google.com/file/d/1TOBC-4f3PA27aBH1-ZXwTCerPiTcM9_I/view?usp=sharing>\\n前端技术并托管在 IPFS 上\\n从 Leserve 成立之初，团队就意识到去中心化应用程序 (dApps) 的设计和技术复杂性一直在向更高的标准增加，尤其是在 DeFi 领域。因此，我们希望在 Leserve dApp 上提供独特的体验，同时维护 dApp 工程和软件生命周期的许多重要方面：\\n\\n 1. 零停机时间\\n 2. 强大的技术\\n 3. 敏捷风格的迭代改进\\n    每个做出的决定和选择背后都有各种理由和推理。\\n    零停机时间\\n    出于多种原因，IPFS 被认为是比 AWS、Azure 或 GCP 等久经考验的提供商更合适的服务提供商。主要的担忧之一一直是停机的可能性。任何集中式系统都容易出现停机，对于那些一直关注软件工程相关新闻的人来说，这种情况在过去一周在 AWS 上非常明显。AWS 的案例研究证实了许多理论，这些理论表明，即使是“大到不能倒”的庞然大物，也会出现严重的中断。这可能会对 Leserve 产生严重影响，因此我们认为不值得冒险。此外，中心化云提供商总是存在干扰我们协议的风险，因此选择他们的产品可能与 Leserve 所代表的不一致。\\n    这就是为什么我们相信 IPFS 是实现 Leserve 使命和愿景的理想解决方案和服务提供商。InterPlanetary File System 由其对等网络提供支持，用于存储和共享数据。它本质上是一个分布式文件系统，它将帮助 Leserve 使其每个组件更加分散。IPFS 可以预期更好的正常运行时间，同时也忠于 Leserve 的去中心化和透明度的哲学本质。\\n 4. \\n    强大的技术\\n    为了提供符合最先进应用程序期望的无错误功能，ReactJS 和 TypeScript 似乎是最合适的选择。我们确信阅读本文的 Web 开发人员会理解这种方法和选择，但是，我们希望迎合所有 leservians。因此，如果您知道接下来会发生什么，请随时继续下一部分。\\n    ReactJS 是一种框架，允许人们在考虑最佳实践和工程约定的情况下开发 Web 应用程序。React 的理念主要建立在基于组件的基础之上。这是什么意思？如果使用得当，开发人员可以利用 React 构建最快、最安全的 Web 应用程序，同时使代码相当容易阅读和理解。使用 React 可以显着提高开发速度，同时还提供高水平的维护。这对 Leserve 非常重要，因为它的代码库将是开源的。因此，允许其他人轻松阅读和理解其代码将鼓励其他开发人员贡献和维护 Leserve 的最高标准。拥有这个级别的代码库还使维护人员能够轻松发现错误并进行修改。\\n    此外，TypeScript 是 JavaScript 的超集，它为 Leserve 的代码库提供所谓的“类型”。它可以作为 Web 开发人员减少错误的锚点。但是，TypeScript 代码库要长得多，并且可能需要更多的时间来编写。尽管如此，我们还是决定从一开始就使用 TypeScript，因为许多从 JavaScript 开始的 dApp（包括 Olympus）最终决定将其整个代码库从 JavaScript 转换为 TypeScript。\\n 5. \\n    敏捷风格的迭代改进\\n    我们坚信迭代改进和敏捷宣言。因此，技术堆栈的选择应该反映这种方法。所选择的每项技术都已经存在了一段时间，并且拥有非常好的社区支持和文档。利用此类技术将使 Leserve 能够在将所有内容联系在一起的同时，逐步但非常快速地开发新的强大功能。\\n    这就是为什么我们选择 Tailwindcss 来设计样式，选择 ReactJS 来构建我们的 dApp，以及选择 NextJS 来进行服务器端渲染。首先，我们在这些技术方面拥有领域专业知识，我们有经验可以证明这一点。其次，所选择的工具还提供了非常高水平的开发人员体验，我们可以通过它们最大限度地提高生产力。\\n 6. \\n    安全\\n    协议的安全性受到非常重视，并且仍然是我们的核心优先事项和重点领域之一。这就是为什么从 Leserve 成立之日起就采取了以下措施：\\n    •\\t该团队正在使用基于 CW3/CW4 智能合约的多重签名钱包。善意提供给我们的 Apollo DAO Safe 实现将被使用。\\n    •\\t每个核心团队成员都使用硬件钱包来管理多重签名。\\n    •\\t代码审查对代码的每一部分进行\\n    •\\t每个团队成员在批准部署/升级事务之前比较应该部署的预期代码哈希\\n    •\\t代码将由外部公司审核：\\n    发布\\n    之前 协议重大升级之前\\n    至少每年一次\\n    •\\tLeserve Contracts 实现了一个特殊的“可冻结”特性，如果出现任何相当大的安全威胁，它允许协议被冻结。\\n    •\\t我们所有的依赖项都是来自 CW-plus 库或 rust 库的预审计智能合约代码，它们是通过cargo-crev进行社区审计的\\n    •\\t所有链上代码和 GUI 都将开源。社区可以验证部署在链上的内容与 Github 上的内容一致\\n    •\\t我们有一套单元测试和集成测试来测试所有合约集，包括边缘情况，如整数溢出和舍入错误。\\n    确保安全不受损害至关重要。然而，在某些时候，困境变成了“良好的安全性”与“优秀的安全性”。鉴于我们发布的时间敏感性和越来越大的压力，我们倾向于在合理的时间内发布具有“良好安全性”的产品，并在它成长并证明可行后，升级到“卓越的安全性”：\\n    正在考虑在某个点引入两阶段升级。这将允许即时冻结合约的绑定/抵押功能，以防止潜在的滥用并保护资金。升级将包含 1-3 天的时间锁定，其中首先必须发布代码的哈希值，然后在 1-3 天后以提交-显示类型的架构发布代码本身。如果他们假设升级是为了安全补丁/无害功能而部署的，这将确保并给人们时间来潜在地提取他们的资金。\\n 7.  审计 我们意识到由第三方审核我们的代码的重要性，并相信这是在 DeFi 世界中成功、安全和强大的协议的重要组成部分。我们也认识到为此类事务选择合适的合作伙伴的重要性。这就是为什么我们要确保所选择的审计师值得信赖、信誉良好、建立并与 Leserve 的愿景、价值观和社区保持一致。 Leserve 旨在选择一个合作伙伴，该合作伙伴了解熟练评估我们的代码和解决方案的重要性，同时使我们能够以既定的速度运营和进行。我们目前正在进行彻底的评估过程，并确定与不同审计师的适合性和一致性。 此外，我们正在考虑让社区能够表明其在选择审计师方面的立场和偏好，因为我们希望确保在这一与信任相关的形成性决策中保持一致和相互认可。另一方面，我们正在评估此类指示的可行程度以及如何以不损害或延迟审计过程的方式执行它。 工装 鉴于 Terra 链的新颖性，与已建立的 EVM 兼容链相比，目前 Terra/Cosmos 生态系统中缺乏工具。 我们感受到 Terra 社区的欢迎和授权，并意识到 Ethers.js 等产品真正改变了以太坊生态系统中工程师的生产力。这就是为什么我们希望以一种希望鼓励和促进 Terra 链进一步发展和增长的方式回馈。在 Leserve 推出后，我们将开源我们内部开发的 TypeScript 工具，用于 Terra/CosmWasm 生态系统中的智能合约开发。 我们的工具提供以下功能： •\\t合约部署、实例化、升级和执行的有用抽象 •\\t关于如何通过代理调用合约或通过多重签名钱包提交 TX 的透明方式 •\\t与硬件钱包集成 •\\t允许将合约分组为合约集，以正确的顺序部署它们，设置依赖项并查询它们以执行一致性检查 •\\t部署到多种环境，包括测试网、主网和本地 terra •\\t从 Rust Msg 模式生成合同类型 •\\t— •\\t感谢您抽出宝贵时间了解 Leserve 的最新动态。我们很高兴揭开即将到来的章节，并慢慢开始向 Leserve 新时代的过渡。 \\n 8. \\n 9. 在接下来的章节中，我们将研究： \\n10. \\n11. 六、社区与成长\\n12.  •\\t市场策略 \\n13. •\\tLeserve 的社会身份和总体理念 \\n14. 七. 启动策略 \\n15. •\\t白名单，层级，启动顺序Whitelisting, tiers, launch sequence\\n16.  •\\t如何维护社区和反机器人How we plan to fight for the community and tackle frontrunners and bots \\n17. \\n18. 在此之前，稍安勿躁 To stay updated, make sure you are following our Discord and Twitter., Until then, (🌖,🌖)\",\"timestamp\":1639977193,\"title\":\"LeserveDao 第五章：智能合约与前端/设计\"},\"digest\":\"PPOhFyzKhpDepLYtY4DlE8iVqcFFVctsADzs2pWUzkk\",\"authorship\":{\"contributor\":\"0xceEbc6d157f0281757d0c97F8978Cdf60B86DFB7\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"R24Iijrs7ldnfmBcSZTGxLUpfCBPJuUkXD8Zk4LfZOY\\\",\\\"y\\\":\\\"1XO3mvA2b6PVa_euI1Hj8Mr0AitVZofkZS1ELR6NSPI\\\"}\",\"signature\":\"Kbs4pa4q6y7bMd8CjsvuN20pYMP3TsdzPZWIiUsqUo15YkuOkkufQRC2dEe1CovYOBNS7GAlgWFA8Y6NQ0UPEQ\",\"signingKeySignature\":\"0x531f5a10d6df56666eafae7274eb8b8af6ba1fb6d1f58f085b1550436fd13d49319e4e9cea2c0ee29c93a4a4da90cad5b4ee7b26cf3aebff0320d9018c7518521b\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"R24Iijrs7ldnfmBcSZTGxLUpfCBPJuUkXD8Zk4LfZOY\\\",\\\"y\\\":\\\"1XO3mvA2b6PVa_euI1Hj8Mr0AitVZofkZS1ELR6NSPI\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"PPOhFyzKhpDepLYtY4DlE8iVqcFFVctsADzs2pWUzkk\"}"