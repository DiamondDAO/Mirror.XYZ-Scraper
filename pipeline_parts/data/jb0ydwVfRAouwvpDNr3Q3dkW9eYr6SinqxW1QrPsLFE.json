"{\"content\":{\"body\":\"![](https://pic4.zhimg.com/v2-56eb7a99e2708b9c784611d989083523\\\\_r.jpg)\\n\\n看完本期的文章，各位同学就可以跟我一样，精准把握市场节奏，抄底抄在“脚后跟”，逃顶逃在“脑袋顶”，再也不用做一个躺平的韭菜，从此走上财富自由之路。\\n\\n![](https://pic3.zhimg.com/v2-a80bfe44fe98d6af4c1a194f6a64dee2\\\\_b.jpg)\\n\\n**哎呀，想啥美事呢，还是洗洗睡了吧。**好了，不闲扯了，开始进入正题。\\n\\n细心的同学会发现，这个“逃顶抄底”的指标是加了引号了。也就是说，这个指标用法得当，对我们判断市场顶部和底部是有一定指导意义的。这个指标就是 **新高新低指数**。\\n\\n### **一、什么是新高新低指数**\\n\\n**新高新低指数**（后称“NHL指标”）在股票交易中是非常常见的一个指标，我这里把它移植到了数字货币市场。先来看公式：\\n\\n![](https://pic1.zhimg.com/v2-398215664f9892e5fd508978a4667bd4\\\\_b.jpg)\\n\\n其中`突破N日新高的币的数量`代表多头领导者，`突破前N日新低的币的数量`代表空头领导者。\\n\\n以日线图为例，N可为7、30、90、365，分别对应突破周、月、季度、年度新高或新低。\\n\\nNHL指标取值从 -∞ 到 +∞，围绕0上下波动：\\n\\n*   如果创出新高的币数大于创出新低的币数，NHL指标大于0；\\n*   如果创出新高的币数小于创出新低的币数，NHL指标小于0；\\n\\n**背后的逻辑：**\\n\\n*   只有强势币才会突破之前的新高，**强势币的数量越多，说明市场整体越强**；\\n*   **只有弱势币才会突破之前的新低，弱势币的数量越多，说明市场整体越弱**。\\n\\n因此，NHL指标是一个**衡量多空力量的指标**，数值越大，多方力量就越强，数值越小（为负），空方力量就越弱。另外，**N越大，对应方向的强度就越大。**突破年度新高的币肯定要比突破月度新高的币要强势。\\n\\n### **二、NHL指标的代码实现**\\n\\n完整代码包括3部分，数据获取、指标计算和作图。\\n\\n*   数据获取：获取Binance上线的全部USDT交易对，约220个；\\n*   指标计算：核心代码；\\n*   作图：pyecharts作图。\\n\\n由于篇幅原因，我只把最核心的代码放出来，也就是指标计算部分。**如果有小伙伴想要完整代码可以关注公众号，点 ` 关于我  `索取。**\\n\\n接下来是指标计算的代码（不包括数据整理）：\\n\\n     # ==首先，对每个币计算前N日新高和新低\\n     data['new_high'] = data['high'].rolling(n).max().shift()\\n     data['new_low'] = data['low'].rolling(n).min().shift()\\n\\n     # ==接下来，计算指标\\n     # 将上一步所有的data合并成all_data，并按照candle_begin_time排序\\n     all_data['新高'] = np.where(all_data['close'] >= all_data['new_high'], 1, 0) # 币圈噪声大，用收盘价\\n     all_data['新低'] = np.where(all_data['close'] <= all_data['new_low'], 1, 0)\\n\\n     rtn1 = all_data.groupby('candle_begin_time')['新高'].sum()\\n     rtn2 = all_data.groupby('candle_begin_time')['新低'].sum()\\n     size_df = all_data.groupby('candle_begin_time').size()\\n\\n     rtn = pd.concat([pd.DataFrame(rtn1), pd.DataFrame(rtn2), pd.DataFrame(size_df, columns=['size'])], axis=1)\\n     rtn['new_HL'] = rtn['新高'] - rtn['新低']\\n     rtn['new_HL_ratio'] = rtn['new_HL'] / rtn['size']\\n\\n     # 指标二次平滑\\n     rtn['new_HL_ratio_ma'] = rtn['new_HL_ratio'].rolling(m).mean()\\n     rtn.reset_index(inplace=True)\\n\\n*注意：最后两行是对原指标的二次平滑。因为binance上线的币的数量相对股票市场还是很小，造成指标波动较大，平滑处理后可以剔除很多噪声。*\\n\\n### **三、逃顶抄底？**\\n\\n本节我们来看看NHL的“逃顶抄底”效果如何。以下以BTC周线为例，NHL指标N取12，大概1个季度。\\n\\n*注：我比较偏爱周线，因为周线可以反映出**主要的市场趋势和重要的反转，有助于判断市场的大方向，缺点就是交易机会很少。***\\n\\n### **（一）312暴跌的表现**\\n\\n![](https://pic2.zhimg.com/v2-4e86347783dcce5fc1ca440b269f3421\\\\_b.jpg)\\n\\n没错，指标失效了。那跟长长的阴线就是币圈著名的312事件造成的。通过这个例子想说明三件事：\\n\\n### **1. NHL指标不会100%有效：**\\n\\n各位小伙伴应该都记得在2020年初新冠疫情爆发带来的全球流动性危机，使得资本市场横尸遍野，即使有避险属性的黄金也不能幸免。**类似312事件任何指标都很难有效，所以完全依赖技术指标，很难在长期取得成功。**\\n\\n### **2. NHL指标不够精准：**\\n\\n不要期望抄在底部或者逃到顶部。图中绿色圈部分，其实已经多次出现了背离的信号，但价格过了6周之后才开始反弹。\\n\\n### **3. 交易考验的是综合素质：**\\n\\n我们拉长时间线再看，虽然经历了312的暴跌，即使根据HNL指标开仓，我们的成本也在7000刀附近，依旧是个很好的抄底决策。能否在312时顶住暴跌甚至抄底考验的是**之前的积累研究、实时的判断和心态。**\\n\\n### **（二）519暴跌的表现**\\n\\n![](https://pic3.zhimg.com/v2-80e3c3f5c846dc4da3b254bd8ab566f2\\\\_b.jpg)\\n\\nNHL在519暴跌的表现很好，能够识别出顶部。同样，绿色圈部分依旧连续出现了多次背离后，才开始下跌的。\\n\\n### **四、总结**\\n\\n虽然本文只讨论了NHL在周线级别中有限案例的表现，但一一列举有效与失效的情况效率太低，不如各位小伙伴自己对照K线一根根看过去更有意义。在日线及以上级别，可以在**大部分时间识别出市场的“顶部”和“底部”**，缺点是NHL**不是一个精准的入场出场指标，不适合用来择时**。基于这个特点，NHL有两个很好的应用场景：\\n\\n*   囤币：囤币对价格不够敏感，可以在**底背离出现后分批进场**；\\n*   资金管理：把NHL当成一个**判断市场大势的宏观指标**，并**根据不同的行情给不同的策略分配资金**。\\n\\nNHL更适合用来判断市场大势，所以用在主流币（如BTC、ETH）上效果会更好，而市值越小的山寨币越容易走出独立行情，效果不会太好。\\n\\n最后要提示下风险。**由于使用的数字货币的历史数据较短，NHL能否在下次顶点或底部出现时发挥作用是存在不确定性的。**但我还是认为这是一个有价值的指标，我会持续关注，随着更多数据和币的加入，其稳定性会越来越好的。\\n\\n***END***\\n\\n**====量化往期推荐====**\\n\\n[更加优雅的因子挖掘技术之自动化特征工程](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247483975%26idx%3D1%26sn%3De54a2cbce87b9a07cf41243a90080cf3%26chksm%3Dcf3044f2f847cde4c1bbabdaacd3ff358c781f0be8e54f09a156ca8d87f717f875fe00452e79%26scene%3D21%23wechat_redirect)\\n\\n[机器学习真的能预测价格吗？](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247483990%26idx%3D1%26sn%3D473d614fa98b35aafd6609fb2d358443%26chksm%3Dcf3044e3f847cdf51ba62a962212a37788f3a82fe5de5a8335146771baa53dd221f2539e17a2%26scene%3D21%23wechat_redirect)\\n\\n[因子投资“巫术”之遗传规划](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247483843%26idx%3D1%26sn%3D1302d20ebef569353a1d8552a2761719%26chksm%3Dcf304776f847ce60cf44158defb05a4ad8230ada04ffd04510c095d7d597a880e2fecd3a3c03%26scene%3D21%23wechat_redirect)\\n\\n[因子投资“巫术进阶”之遗传规划](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247483992%26idx%3D1%26sn%3D4cd94a52ffc093a78884eefd1d018112%26chksm%3Dcf3044edf847cdfbfde38e8e74ff16a02175523cff8c500537abc365339fda5dfd2b6fd67ff2%26scene%3D21%23wechat_redirect)\\n\\n[最通俗易懂的BERT原理与代码实现](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247484064%26idx%3D1%26sn%3D66dd2f2d78733c119b0109d21cdc3519%26chksm%3Dcf304415f847cd03fd230bda4fa606bd830a3481dd2bfc3f234bdafae387ff91265a9a9698fb%26scene%3D21%23wechat_redirect)\\n\\n**====区块链系列推荐====**\\n\\n[区块链从入门到入魔1：波卡（Polkadot）](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247484072%26idx%3D1%26sn%3D2524746ae4df284194966cc8d0a088db%26chksm%3Dcf30441df847cd0b257ea13e18a6c9dc70a9d35d9c902ea566533cea8185cfcae8af4ed0fec0%26scene%3D21%23wechat_redirect)\\n\\n[区块链从入门到入魔2：再述波卡（Polkadot）](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247484084%26idx%3D1%26sn%3Daadd5051a1bcf8848ab20497afe6f878%26chksm%3Dcf304401f847cd17201843c6ce29f0d5b5d24d35237b4c1ed6bd2d402164fd3bc6f4e13d69f1%26scene%3D21%23wechat_redirect)\\n\\n[区块链从入门到入魔3：波卡生态（Polkadot Eco）](https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F\\\\_\\\\_biz%3DMzg3NjUxNjMxNA%3D%3D%26mid%3D2247484101%26idx%3D1%26sn%3D63be6da7bd27546041ed040ab1cdf78d%26chksm%3Dcf304470f847cd66083aa2dd5e0ecb08b9dc979dfa22f8b61e60c36f54308d67781c6dcddf10%26scene%3D21%23wechat_redirect)\\n\",\"timestamp\":1634698578,\"title\":\"一个“逃顶抄底”的指标\"},\"digest\":\"Ei9QU7dMv2yYcu2AhH0rnXYuFw6Q7Ccw8iIqQOmQzUg\",\"authorship\":{\"contributor\":\"0x10F751A20f61a1eA33Ebb91411Fae3F8Ff0E0ecf\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"QSYfzr_1RYLzL5qac7JqKH7FNPImhDdwfaLhdpPFa80\\\",\\\"y\\\":\\\"qHhpvdCm2kPLYaj0LEd90eHsWdc_Dek4yCWHIPncCQU\\\"}\",\"signature\":\"VaTU3h78JOYWX-68GMQRZG__ellIhCSlN-go10125Qj4nN0qiXCOQuDLUFqGCg_JbygUeCRVRGHLSBSeOc3GGg\",\"signingKeySignature\":\"0x622e3a56a1a4e4267587476ea4cadff66c2badc81808226ec3ab6bd59505a2de6d9e80a8f09062b51f79528b2ad79cd90dd0852f258c754b7473da909914e9b800\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"QSYfzr_1RYLzL5qac7JqKH7FNPImhDdwfaLhdpPFa80\\\",\\\"y\\\":\\\"qHhpvdCm2kPLYaj0LEd90eHsWdc_Dek4yCWHIPncCQU\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"Ei9QU7dMv2yYcu2AhH0rnXYuFw6Q7Ccw8iIqQOmQzUg\"}"