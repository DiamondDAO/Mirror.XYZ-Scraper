"{\"content\":{\"body\":\"本文针对 Metric、Logging、Tracing、Profiling 分别谈谈技术选型、架构、核心原理以及高可用的内容。\\n\\n聊聊技术选型，我们主要会从可扩展性、可运维性、功能性和成本等几个方案考量。\\n\\n先聊 Metric，在 「聊聊可观测性2 - 数据模型」一文中有说对于 Metric，我们选择的是 Cortex 这个方案，这里解释为什么我们选型了 Cortex。\\n\\n其实对于 Metric，业界已经有很多开源方案了，比如 Zabbix、OpenFalcon、InfluxDB，这三个我们都没选，这里简单列举一些他们的缺点。\\n\\nZabbix 是一个古老的监控方案，在物理机时代就有，它的缺点至少有三个：\\n\\n1. 数据放在关系型数据库中（比如 MySQL），随着数据的增加，很难实现线性扩展，可扩展性有问题，而且关系型数据库，维护成本也高\\n2. 数据模型不强大，不支持 label，没法按多维度进行聚合统计和告警配置\\n3. 使用 C 语言开发，维护和二次开发成本高\\n\\nOpenFalcon 是小米开源的一款监控软件，是早期百度内部监控方案的开源实现，它也是诞生于物理机时代，它的缺点：\\n\\n1. 组件众多，安装复杂\\n2. 只支持有限的聚合函数\\n3. 非云原生，监控 k8s 集群有难度\\n4. 社区不活跃，版本不再维护\\n\\n后面 OpenFalcon 逐渐演变成 夜莺，并且推出企业版，对外售卖，夜莺简化了架构和安装流程，也支持了 k8s 监控，不过功能还是有缺陷，社区活跃度长期来说也有隐忧，故而也不选择。\\n\\nInfluxDB 是一款使用 Golang 开发的监控软件（Prometheus 也是），InfluxDB 不仅支持 Metric，还支持 Event，但是它的缺点有：\\n\\n1. InfluxDB 没有开源集群解决方案，集群管理方案需要收费\\n2. 相对 Prometheus，它有两个缺点：\\n   * 压缩比率低， Prometheus 平均一个数据点可以压缩到 1.37 字节，更加节省空间\\n   * 查询语言没有 Prometheus 的 PromQL 强大，PromQL 支持 topk、quantile 分布统计、95值、线性回归预测等\",\"timestamp\":1641827563,\"title\":\"聊聊可观测性3 - 后端架构\"},\"digest\":\"fLOkM42RDqm7-HWudtNXRBLKHBBFd65wuglP3CeYP4s\",\"authorship\":{\"contributor\":\"0xFd007bb46C47D8600C139E34Df9DfceC86F0B319\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"XB_bivAgA23-VQVMmuF0YC-iaofTDXnsNByUi4krxJA\\\",\\\"y\\\":\\\"iZsJ--B7EAa1HF0VegzuHvSMiAmqLqnn5MSBI_jR1Lo\\\"}\",\"signature\":\"g6jmCHNXQxAd05KOXkfCwMS24nK_6tVQSXyLz_mv2NQaA8EQ1RrKNyhF2RxjeoL-auI8Wcz1xQ70jvEAsUM-xg\",\"signingKeySignature\":\"0x50909b2c1669797c58b4ebe19ccca1a1e13f5c27741474d52b088011703540bb3ee304124f88f6e3b3e5daef08f63e78b2bcf4b4b1a1922aa9f416ecf341c2661b\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"XB_bivAgA23-VQVMmuF0YC-iaofTDXnsNByUi4krxJA\\\",\\\"y\\\":\\\"iZsJ--B7EAa1HF0VegzuHvSMiAmqLqnn5MSBI_jR1Lo\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"fLOkM42RDqm7-HWudtNXRBLKHBBFd65wuglP3CeYP4s\"}"