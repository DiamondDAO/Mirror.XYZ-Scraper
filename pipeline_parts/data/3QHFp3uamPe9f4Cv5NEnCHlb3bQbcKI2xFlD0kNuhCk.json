"{\"content\":{\"body\":\"Ribbon has grown the adoption of on-chain option markets almost entirely by themselves, using the assumption that **set-and-forget** strategies which rely on sustainable yield (theta) will capture more users than the prospect of active participation in these option markets.\\n\\n**Perpetual-izing** time-based option strategies has made the Theta vaults a competitive place for capital, even when compared against massive apy (misleading...) yield farms.\\n\\nThis ethos and strategy is certainly the best way to grow adoption of crypto structured products, so how can we make it even better?\\n\\n## Build Vaults for More Tokens and Scale TVL using RMM protocol\\n\\nRight now, Ribbon matches vault depositors to call option buyers. Therefore:\\n\\n**More Deposits = More Problems**\\n\\nThe vault can only support the capacity of buyers, so as vault deposits grow, it gets more difficult to maximize utilization unless buyer capacity grows with it.\\n\\nA **$1b Ribbon Theta Vault** is possible using **Primitive RMM** pools.\\n\\nThis is because of a fundamental property of RMM pools, the same with any AMM:\\n\\n**More Deposits = More Yield**\\n\\nAs the pool grows in size the arbitrage opportunities grow along with it, meaning the fee income to keep the pool rebalanced also grows.\\n\\nThe sell options to buyer model is also limited by buyer's capacity for different tokens! RMM protocol makes Theta Vaults for any token possible since pools can be created for any token pair.\\n\\n**Theta Vaults** built using **RMM** can scale to massive TVL and more markets, all while relying on decentralized architecture.\\n\\n# Proposing Theta Vault on Primitive RMM Pools\\n\\nA Theta Vault that deposits to selected RMM-01 pools will give Ribbon users access to **higher yields** and structured products for **more tokens**.\\n\\nHere is how in three steps.\\n\\n## 1. Replace Process, Scale TVL\\n\\nRight now, the process for Ribbon's Theta Vault strategy is **3 steps**.\\n\\n![](https://i.imgur.com/slcEC5l.png)\\n\\n#### Note: old diagram, but same process that is now decentralized through auctions\\n\\n### Replace process by depositing to RMM\\n\\nUsing Primitive's RMM protocol, a constant function market maker, this can be **reduced** to **1 step**:\\n\\n1. Theta Vault mints RMM-01 LP tokens\\n   a. The manager selects an RMM LPT to mint based on the parameters strike price, expiry, implied volatility, and swap fee.\\n   b. Vault uses deposited funds to allocate liquidity into the Primitive RMM pool\\n   c. Vault holds onto RMM LP tokens\\n\\nThe net result of this process is that the Vaults should **receive swap fees over time, expected to be equal to the option premium**. This will mean the Vault's balance will expand over time as swap fees of RMM are generated and compounded into the LP token.\\n\\n### How does it work?\\n\\nRMM protocol is a two-token [Constant Function Market Maker](https://web.stanford.edu/\\\\~guillean/papers/constant_function_amms.pdf). This means the two tokens of the pool can be swapped, generating trading fees for liquidity providers. Therefore, Ribbon Theta Vault depositors would be the liquidity providers.\\n\\n**More liquidity in RMM = More Trading Fees**\\n\\nAs a pool's liquidity grows, large trades have lower price impact, therefore capturing more trading flow and thus trading fees.\\n\\n### Where does theta come from in this CFMM?\\n\\nThe trading function of RMM is designed to **capture theta through swap fees**. Read the whitepaper to learn more: [whitepaper](https://github.com/primitivefinance/rmm-research).\\n\\n## 2. Optimize Parameter Selection\\n\\nTheta vaults follow the strategy of selling one-week call options that are deep out of the money (OTM). Here is a concrete example for a prospective RMM pool as a place to put Theta vault deposits:\\n\\n![Example](https://images.mirror-media.xyz/publication-images/AKP5LgJ3V_120dXMuXFpn.png?height=79&width=311)\\n\\nThe current price of ETH is about **$4000**. With these parameters, this particular RMM LPT is currently valued at \\\\~0.913 ETH \\\\* 4000 + 275 = $3,927. In one week (expiration), there are two different payoff scenarios for Theta Vault depositors:\\n\\n1. LPT is redeemable for $10,000 if the expired ITM.\\n2. LPT is redeemable for 1 ETH if expired OTM.\\n\\nUsing RMM protocol, the IV and swap fee parameters can also be managed by the Theta Vault. This has the potential to generate higher yields than selling to buyers in an auction setting, because the **market** of buyers in RMM protocol is any spot trader or arbitrageur.\\n\\nBoth the chosen IV and swap fee parameters affect the probability and degree of arbitrage happening, thus impacting fee revenue for LPs. If you'd like to read more on how swap fees of RMM can be optimized check out this [tweet by experience](https://twitter.com/trustlessexp/status/1453829029988118529).\\n\\nSince liquidity is provided to a static Implied Volatility, it alters the Ribbon Theta Vault model from price rebalancing to volatility rebalancing. This will require the vault manager to view where realized volatility is and adjust the vault's deposits closer to it. Optimizing this will be optimizing yield for depositors, as it improves the chances for fees to be generated.\\n\\nOne concern is the need to rebalance between the underlying and cash asset. We'll need to find a solution for that.\\n\\nThe RMM pool's payoffs can be modeled using [rmms-py](https://github.com/primitivefinance/rmms-py).\\n\\n## 3. Scale Theta Vaults to more Tokens\\n\\nAny token pair can be deployed permissionless from the Primitive Factory contract, allowing any pools on that pair to be created.\\n\\nThe consequence of using RMM protocol to deploy pools for any token pair is that **users can access theta products for any token**.\\n\\nRMM protocol works by incentivizing arbitrageurs to rebalance positions such that by expiration the liquidity pool token (LPT) is redeemable for `1` underlying token or `strike` price of stable tokens.\\n\\nTheta Vaults manage all user deposits which means whatever RMM pool the vault chooses, that pool will become instantly liquid. This is important, as it will create enough profit opportunities to incentivize the needed arbitrageurs and thus yield for depositors.\\n\\nAs described in the first action point, more vault deposits will attract more outside trading flow (from not only arbitrage), therefore increasing trading fee revenue to vault depositors.\\n\\nThis is because liquidity in RMM protocol creates its own counter-party, but on-chain.\\n\\n![](https://i.imgur.com/1ovLTrp.png)\\n\\n# Risks\\n\\nUsing the RMM protocol does not come riskless.\\n\\n### Improper Pool Fee Selection\\n\\nA pool's swap fee affects an arbitrageur's window of profit. An optimal fee can be chosen, as modeled in the rmms-py repository.\\n\\n### Arbitrage does not occur\\n\\nWithout arbitrage at the least, or any swapping, fees will not be generated. This means no revenue is earned for liquidity providers (vault depositors).\\n\\n### Protocol has a smart contract exploit\\n\\nThe RMM protocol is [audited](https://github.com/primitivefinance/rmm-core/tree/main/audits) by four professional audit firms, has extensive testing, and an active [$1m bug bounty](https://immunefi.com/bounty/primitive/). There is no guarantee of being bug free, as such there is a risk of total loss for user deposits. In this scenario, there is a $10m coverage pool provided by Sherlock which will be claimable by all RMM protocol users on pro-rata basis.\\n\\n# Closing Thoughts\\n\\nRibbon is innovating on the way users interact with complicated financial instruments, and more tools should be made available to vault managers to do this. Using RMM protocol, Vaults can be built on a scalable foundation to bring these novel crypto structured products to **any** token and of **unlimited** capacity.\\n\\nLet's scale.\\n\\n## For Developers\\n\\n### Tokenization is up to you\\n\\nThe RMM core contract does not tokenize liquidity. This allows any higher level smart contract (i.e. Theta Vault) to implement tokenized liquidity in any way.\\n\\n### Internal Balances reduce gas expense\\n\\nMost transactions that interact in financial protocols generate gas expense from simply transferring tokens. For every token pair contract of RMM, called \\\"PrimitiveEngine\\\", an internal balance can be stored. This balance can be debited against whenever an action by the balance holder is taken, e.g. allocating liquidity or swapping. This reduces the gas expense by \\\\~70k, (two token transfers).\\n\\n### Use the RMM Swap for Ribbon ecosystem\\n\\nIf Ribbon users need to swap between tokens, you can direct them to use the pools which Ribbon Theta Vaults are depositors to.\\n\\n### Creating Pools requires Spot Price\\n\\nPools must be created with an argument to initialize the underlying, \\\"risky\\\", token reserves. The risky reserves of a pool should always match the covered call delta, per unit of liquidity. Therefore, when creating a new pool the vault manager would need to compute the delta of the covered call, equal to 1 - delta of call, which requires the current spot price of the asset.\\n\\nThere are a couple solutions to this: use an RMM TWAP oracle from one of the other pools, use an external TWAP oracle, or have the vault keeper manually enter it on their own. Keep in mind, with an incorrectly set risky token reserve, the pool might be mis-priced, causing losses to depositors.\\n\\n### Positions must be rebalanced after expiry\\n\\nWhen a pool (e.g. for an ETH-USDC pair) expires OTM, there will be a balance only denominated in ETH. To roll this position to a new expiry, or strike, there will be a need for some of that position to be converted to USDC, in order to allocate liquidity to the pool. This ETH to USDC swap can happen on another DEX, or in another RMM pool of the same pair.\",\"timestamp\":1641438277,\"title\":\"$1b Ribbon Theta Vault\"},\"digest\":\"TEBqxbYcoK_5kD8k_fmXuIeKEgfjmdm0LLcm_yqwqt8\",\"authorship\":{\"contributor\":\"0x152Ac2bC1821C5C9ecA56D1F35D8b0D8b61187F5\",\"signingKey\":\"{\\\"alg\\\":\\\"ES256\\\",\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"lzFtxFcLhshI55Vfuvi6vj25KXzpa-NoWJQ74VmwCeE\\\",\\\"y\\\":\\\"ZCTuimCmavH3Fo1i9pnZTKoB1Ov_QztQkD9VgmaeCLE\\\"}\",\"signature\":\"rJvru1CxKtRhIWHhedpuu8cNzaZ1GHtmomtUAGZRmQ-pRH4dnfbA5TypSgeYrpni3eaSdN-y4qCk7Zf9vTWoLA\",\"signingKeySignature\":\"0x774407723907f83dc60e0de20fe18911534e241902cc53d289a32dc2cd3a631d696e06602585021fbe1240991dc44bb2e3f15bc66628cd8c6a649806fe7ff3da1b\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"alg\\\":\\\"ES256\\\",\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"lzFtxFcLhshI55Vfuvi6vj25KXzpa-NoWJQ74VmwCeE\\\",\\\"y\\\":\\\"ZCTuimCmavH3Fo1i9pnZTKoB1Ov_QztQkD9VgmaeCLE\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"TEBqxbYcoK_5kD8k_fmXuIeKEgfjmdm0LLcm_yqwqt8\"}"