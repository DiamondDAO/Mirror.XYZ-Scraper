"{\"content\":{\"body\":\"> 在上一期中，我们为大家介绍了 DEX。这一期我们为大家剖析链下撮合交易，P2P的 CowSwap\\n\\n*[CowSwap](https://link.zhihu.com/?target=https%3A//cowswap.exchange/%23/)* 是 *[Gnosis](https://link.zhihu.com/?target=https%3A//gnosis.io/)* 在正式推出 GPV2（Gnosis Protocol V2) 前的一次尝试。未来这些新功能也会集成到 *[Balancer](https://link.zhihu.com/?target=https%3A//balancer.finance/)* 中。 CowSwap 使用链下撮合交易的方式。在不采用流动性提供者的情况下 CowSwap 为用户提供低手续费的代币兑换服务。\\n\\n### **⚙️ 使用流程**\\n\\n使用 CowSwap 进行代币兑换的流程与其他 DEX 差别不大。选好交易对后，点击 Approve Allowance，允许合约使用你选定的代币。这一步所有 DEX 都有，需要上链，并收取一定的Gas Fee。令CowSwap独特的是交易的最后一步。Approve Allowance 成功上链以后，点击 Swap 只需要进行签名，不需要上链，也就是说不像其他 DEX 一样需要 Gas Fee。\\n\\n需要注意的时目前CowSwap 是 Alpha 阶段，CowSwap 提供了 **90%** 的 Gas Fee 补贴和 **0** 协议费用。\\n\\n![](https://pic2.zhimg.com/v2-175b72371a32fb8ae3713afcfa93fb99\\\\_b.jpg)\\n\\nhttps\\\\://www\\\\.youtube.com/watch?v=2btaQ9IMtwA\\n\\n### **原理**\\n\\n![](https://pic3.zhimg.com/v2-8b760bc505687fa5eca724173ca0e002\\\\_b.jpg)\\n\\n与我们之前介绍的 Uniswap 等 DEX 不同，CowSwap 不采用 AMM（Auto Market Maker）。基于 GPV2 的 CowSwap 更像是采用 Orderbook 的路线。\\n\\n为了节省 Gas Fee，交易的撮合在线下完成。如果交易不能成功结算，CowSwap 会调用 Uniswap 等 DEX 进行交易。用户只要提供一份签名，多个 Solver 便会在链下为用户寻找最好的结算方式，并通过 CowSwap API 进行提交。\\n\\nGPV2 会奖励提供最佳结算方式的 Solver。通过 CowSwap 的验证后，用户的交易便会进行结算。由于是链下撮合交易，**失败的交易并不需要用户支付 Gas Fee**。\\n\\n除了低 Gas Fee，撮合交易，P2P 的另一个好处就是对于 MEV（矿工通过对交易排序来获取额外利益） 有更强的抵御能力。与传统 DEX 通过滑点防止 MEV 攻击不同，CowSwap 的点对点交易具有很强的顺序性。这样矿工就很难通过操纵交易打包顺序来提取例利润。\\n\\nP.S. 关于 MEV 可以阅读*[这篇文章](https://link.zhihu.com/?target=https%3A//pdaian.com/blog/mev-wat-do/)*\\n\\n### **去中心化**\\n\\n区块链的确不是万能的。它的低效，高昂的手续费被人诟病。因此链上和链下结合是一个非常好的选项，但保证链下运算的去中心化的非常麻烦。GPV2 计划从中心化一步步转为去中心化。\\n\\nSolver 负责在链下寻找最佳的结算方式。因为 GPV2 担心 Solver 会互相串通，不提供最佳的而是对 Solver 自己最有利的结算方式。GPV2 计划先对 Solver 采用白名单机制，白名单的审核权利将交给社区。GPV2 计划在未来放开对 Solver 身份的限制。任何用户只要质押指定数量的 GNO 便可以成为Solver。\\n\\n对于链下 Orderbook API，GPV2 将实现一个去中心化的 P2P 网络。为了严格的去中心化，链下的设计变得繁琐了起来。\\n\\n或许在未来我们可以看到链上和链下结合的跨链交易所。链下交易的撮合可以用户节省在多条链上链的费用。\\n\\n### **相关阅读**\\n\\n*[GPV2 road to decentralization](https://link.zhihu.com/?target=https%3A//forum.gnosis.io/t/gpv2-road-to-decentralization/1245)*\\n\\n*[Introducing Gnosis Protocol V2 and Balancer-Gnosis-Protocol](https://link.zhihu.com/?target=https%3A//blog.gnosis.pm/introducing-gnosis-protocol-v2-and-balancer-gnosis-protocol-f693b2938ae4)*\\n\",\"timestamp\":1633782061,\"title\":\"低手续费代币兑换服务\"},\"digest\":\"hwrZo-FxtV5uG0VID2UR4Z9TDFdn9NugNiOo9PAs4tU\",\"authorship\":{\"contributor\":\"0x7B076d7BcdE88Ec322B2D01AA1ADc1997b7724f6\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"-uhmdAZYxFgq_x4xq-zXdui7hRToWKgI3gCLaeRwzfE\\\",\\\"y\\\":\\\"e_jae50XeRHkDjBd1dCU7xTq7o4HjO4Idn3X9qLgXmA\\\"}\",\"signature\":\"A96MX-3pQ3SjeBMRHFPRa2yI44qGgg4zhlLcl8uOBM4YaxNtMrz4F4xncEiwZ2BajrTj-wHxSzq2Mh-C7jhlbA\",\"signingKeySignature\":\"0x0475273f3894cbe534b5ebf3dc9005f7b109c905b95b05fd0afb3d0dd6c056984938a186d9c56832d588e27230d06074bb752d52c6fbbffe3ddc0a71e38362d11c\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"-uhmdAZYxFgq_x4xq-zXdui7hRToWKgI3gCLaeRwzfE\\\",\\\"y\\\":\\\"e_jae50XeRHkDjBd1dCU7xTq7o4HjO4Idn3X9qLgXmA\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"hwrZo-FxtV5uG0VID2UR4Z9TDFdn9NugNiOo9PAs4tU\"}"