"{\"content\":{\"body\":\"ruffle是目前最流行的以太坊开发框架，采用JavaScript编写，支持智能合约的编译、部署和测试。\\n\\n一、安装Truffle\\n\\n1. 首先安装Truffle依赖的NodeJS：\\n\\ncurl -sL <https://deb.nodesource.com/setup_9.x> | sudo -E bash -\\n\\nsudo apt-get install -y nodejs\\n\\nsudo apt-get install npm\\n\\n```\\n配置npm源为国内源（可选，可加快下载速度）：\\n```\\n\\nsudo npm config set registry <http://registry.npm.taobao.org>\\n\\n1. 安装Truffle\\n\\nsudo npm install -g truffle\\n\\n二、创建工程\\n\\n如果想创建一个空工程，可以用下面的命令：\\n\\ntruffle init\\n\\n在早期版本的truffle中，刚刚创建的工程中还会包含metacoin的示例代码。新版本truffle引入了box的概念，所有的示例代码都以box的形式提供。因此我们不需要用truffle init命令，用下面的命令就可以直接下载metacoin的示例代码：\\n\\ntruffle unbox metacoin\\n\\n代码结构如下图所示：\\n\\n主要分为3个部分：\\n\\n●  contracts目录中包含Solidity合约代码，其中Migrations.sol是必须的，其他就是你自己写的合约代码了。\\n\\n●  migrations目录中包含合约部署脚本，其中1_initial_migration.js就是用来部署Migrations.sol的，其他的脚本会按照顺序依次执行。\\n\\n●  test目录中就是测试代码了。\\n\\n三、安装以太坊客户端\\n\\n智能合约必须要部署到链上进行测试。可以选择部署到一些公共的测试链比如Rinkeby或者Ropsten上，缺点是部署和测试时间比较长，而且需要花费一定的时间赚取假代币防止out of gas。\\n\\n还有一种方式就是部署到私链上，Truffle官方推荐使用以下两种客户端：\\n\\n●  Ganache\\n\\n●  truffle develop\\n\\n1. Ganache\\n\\nGanache这个名字比较陌生，但是它的前身testRPC却是大名鼎鼎，网上的很多老文章里都是用testRPC。Ganache是奶油巧克力的意思，据说是很久之前有个学徒做巧克力的放多了牛奶，师傅正要骂他，结果一尝发现味道还真不错，于是一种新的巧克力就诞生了\\\\~ Truffle是松露巧克力，一般是以Ganache为核，然后上面撒上可可粉，所以这两个产品的名字还是很贴切的。\\n\\nGanache现在有两个版本，一个是带图形界面的版本，下载地址：\\n\\n<https://github.com/trufflesuite/ganache/releases>\\n\\n这些可执行文件的后缀都比较奇葩，参见下面的对应关系：\\n\\n●  Windows: Ganache-\\\\*.appx\\n\\n●  Mac: Ganache-\\\\*.dmg\\n\\n●  Linux: Ganache-\\\\*.AppImage\\n\\n还有一个就是命令行版本了，下载方法：\\n\\nsudo npm install -g ganache-cli\\n\\n具体的命令行参数配置参见github：\\n\\n<https://github.com/trufflesuite/ganache-cli>\\n\\n本文采用带图形界面的Ganache版本。\\n\\n1. truffle develop\\n\\n这个是truffle内置的客户端，跟命令行版本的Ganache基本类似。唯一要注意的是在truffle develop里执行truffle命令的时候需要省略前面的“truffle”，比如“truffle compile”只需要敲“compile”就可以了。\\n\\n四、编译和部署合约\\n\\nGanache默认运行在7545端口，可以在界面右上方的“设置”里进行更改。运行后默认创建10个账号，每个账号里有100ETH的余额。\\n\\n要部署到链上，需要把IP、端口、网络ID告诉truffle。修改truffle.js：\\n\\nmodule.exports = {\\n\\n```\\nnetworks: {\\n\\n    development: {\\n\\n        host: 'localhost',\\n\\n        port: '7545',\\n\\n        network_id: '*' // Match any network id\\n\\n    }\\n\\n}\\n```\\n\\n};\\n\\n然用下面两条命令编译和部署：\\n\\ntruffle compile\\n\\ntruffle migrate\\n\\n五、测试合约\\n\\nmetacoin的示例代码里已经把测试代码写好了，直接用下面的命令运行就可以了：\\n\\ntruffle test\\n\\n去Ganache上看一下运行结果：\\n\\n●  Accounts标签：第一个账户里ETH略有减少，因为交易消耗了gas\\n\\n●  Blocks标签：Ganache是自动挖矿，生成了6个新区块，每个区块里有一个交易\\n\\n●  Transactions标签：有6笔新交易，可以点开看交易详情\\n\\n●  Logs标签：显示交易和挖矿日志\",\"timestamp\":1641729625,\"title\":\"以太坊开发（一）——Truffle和Ganache\"},\"digest\":\"hyvrmv9gw6K0XalXHZ8i0tSVTSNIzTk3XkMkGPfclbs\",\"authorship\":{\"contributor\":\"0x3CdD11377392664bEC71186e30c8E105ec54DAB7\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"nEhsFBBsEppcWR3KfdD_H-UZH8Xilwqv7nOQmY-gBvs\\\",\\\"y\\\":\\\"Ua7-c3s9LJfShrVdB2pkSRmJnqqkrxHAGtBh9slFsEk\\\"}\",\"signature\":\"YtDqzy9pKiY1lBC8sCCURbaPHY59gwhArJNDuVxQ5PhTxnZ2YQIq5yr4OspcKurDhZ63F-uKwptuFnLSrQyToA\",\"signingKeySignature\":\"0x94dde04b37a55efbf0c539e2c1d935347fd4c4efbb1cc9d6e8921be127dd50c31efaa38756c4f1c2fa338c562bd53fd5ff55882b48501cdcfd739aac0d2d7f1e1c\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"nEhsFBBsEppcWR3KfdD_H-UZH8Xilwqv7nOQmY-gBvs\\\",\\\"y\\\":\\\"Ua7-c3s9LJfShrVdB2pkSRmJnqqkrxHAGtBh9slFsEk\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"hyvrmv9gw6K0XalXHZ8i0tSVTSNIzTk3XkMkGPfclbs\"}"