"{\"content\":{\"body\":\"> 2021 年 9 月 10 日 20:00，由 Winkrypto、区块先生以及链闻主办的「ChainBreaker Podcast」播客活动第八期拉开帷幕。本期直播链闻研究总监潘致雄连线了区块先生 Mr. Block Chris、Winkrypto Max 围绕《聊聊 Layer 2》这一热点话题展开深度讨论。\\n\\n![](https://images.mirror-media.xyz/publication-images/yqA7j9z_D3x2y-YGYegzw.jpg?height=1001&width=2000)\\n\\n**以下为本次直播活动的观点摘要。**\\n\\n**背景介绍**\\n\\n最近几周，我们见证了各种公链的崛起，但我们也不能忽略比特币、以太坊等传统公链的发展，毕竟，他们的去中心化与安全性都得到长时间的验证，虽然扩展性略微不足。[Layer 2](https://www.chainnews.com/topics/755609188353.htm) 是针对扩展性不足的一个非常好的解决方案。Layer 2 目前有哪些分类？他们各自有什么优缺点？[以太坊 2.0](https://www.chainnews.com/topics/815677663891.htm) 与 Layer 2 相比哪个更好？Layer 2 网络会不会发行原生代币？\\n\\n**链闻 潘致雄**\\n\\n**扩容解决方案**就是为了解决高 Gas 低延迟的交易，或者能让整个网络能支撑更多的交易量。\\n\\n广义来讲，有三种扩容解决方案：**以太坊 2.0**、**Layer 2**、**侧链**。**Layer 2** 是一种需要嫁接在以太坊本身的一种技术。**侧链**相当于通过一些桥接的方式，把以太坊上的一些资产挪到别的链，然后在别的链做一些业务，能以很低的成本实现，然后再回到以太坊 Layer 1 上。\\n\\n以太坊 2.0 目前进入第一个阶段，年初的时候已经部署了以太坊 2.0 第一个信标链网络，用户已经可以在里面跑 PoS 网络了，但 2.0 的最终执行层（执行智能合约）还没有这么快。根据以太坊开发者的进度来看，以太坊 2.0 的共识层和 1.0 的执行层可能会有一个 Merge，大合并。在这次合并以后，整个以太坊网络就变成了 PoS，这件事最快也要今年年底才能发生，因为这种新兴的技术需要非常多的开发、研究、审计工作。但共识的改变却没有解决扩容的问题，以太坊 2.0 的扩容需要再下一个阶段，也就是分片阶段才能够最终实现。以太坊的分片从原来的执行分片变成了数据分片，也就是说，原来以太坊每一条分片都是独立运行各自的智能合约，各自的网络，然后通过信标链把这些网络混合在一起进行异步的调用，但以太坊 2.0 更改了路线图，变成了数据分片，以太坊 2.0 的每一条分片会变成存储数据的一个层，然后这个层上就可以存各种各样的交易，同时在信标链上去做所有的执行。这个过程可能需要两年或者三年的时间。\\n\\n短期想要解决以太坊的扩容问题只能依赖 Layer 2 或者侧链。按照 Layer 2 出现的时间点，可以分为三类：**状态通道（State Channel）**、**Plasma**、**[Rollup](https://www.chainnews.com/topics/809932649575.htm)**。**状态通道**就是把所有交易放到链下，因为很多的交易数据不需要放到链上进行验证，所以保证了非常快的速度。后来状态通道演变成了 **Plasma**，Plasma 相对状态通道有一些更新，Plasma 可以做智能合约和一些更复杂的业务，状态通道所有的交易几乎都是 Off-chain 的状态，而 Plasma 会定期将一个 Root 的哈希值放到链上来做检验，然后各种人就可以参与进来。Plasma 这个技术生不逢时，出现的太早了，当时没有这个需求，并且 Plasma 的安全性没有完全依赖以太坊，因为 Plasma 很多的交易数据也是在链下的，所以 Plasma 也没受到大家的认可。\\n\\n现在我们聊到的 Layer 2，狭义上讲，就是以 **Rollup** 为主的扩容方案。Rollup 从技术上来讲，与状态通道和 Plasma 不同的就是它会将 Layer 2 网络的交易全部通过一种压缩数据的方式存到 Layer 1 上，当然这是一种无损压缩。比如说 Layer 1 上的一笔交易可能需要 100 个字节， Rollup 可以将一笔交易的很多细节进行精简，通过 10 个字节或者几个字节，把一笔交易展示出来。通过这种方式，Rollup 就可以在不减少安全性的前提下，尽可能压缩每一笔交易的字节数和验证成本。通过这样的方式，Rollup 对网络进行了扩容，大多数 Rollup 方案理论上的上限值是 100 倍，相对来讲，以太坊 2.0 早期的分片也就计划了 64 个（也就是 64 倍）。所以说，Rollup 的扩容效果比以太坊 2.0 还要更夸张一点。\\n\\nRollup 可以分为两类，一类是 **Optimistic Rollup**，另一类是 **ZK Rollup**。Optimistic Rollup 也称乐观的 Rollup，ZK Rollup 就是零知识证明支持的 Rollup。\\n\\n简单提一下**侧链**，现在最大的两个侧链就是 xDai 和 [Polygon](https://www.chainnews.com/topics/067810228444.htm)。**Polygon** 是一个全栈的扩容解决方案，但是目前最核心的产品就是 Polygon 的侧链，可以与以太坊进行 100% 的兼容，开发者可以从以太坊迁到 Polygon 上，并且成本也非常的低。**xDai** 是一个非常早期的网络，一个非常有意思的点就是，从以太坊跨链过去要通过 DAI，DAI 锚定了一美元的价格，所以用户在网络中每一笔交易都是转化成美元进行计算。同时他们还发行了一种治理代币叫做 STAKE，治理代币就是用来变成节点来验证网络的这样一种角色。目前来看，Polygon 是侧链里面最强的。\\n\\n我建议大家都去试一试 Optimism 和 [Arbitrum](https://www.chainnews.com/topics/643543366121.htm)，他们其实已经主网上线了，大家可以去试一下转账或者上面的一些应用。Optimism 已经可以使用 Uniswap V3 和 Synthetix 生态的一些应用了。Arbitrum 上能用的更多，包括 Uniswap V3、Perpetual V3 等协议都会逐渐部署到 Arbitrum 上，以及 MCDEX V3 版本也已经在 Arbitrum 上部署了。建议大家去试一试是因为在 Layer 1 上使用这些协议可能会花费几百刀，但是在 Layer 2 上可能就只花费几刀或者最多十几刀，同时安全性也不会降低。\\n\\n关于 **Layer 2 Token** 这件事，我个人觉得他们迟早会发行 Native Token。包括 Optimism 和 Offchain Labs 这两个依赖 Optimism Rollup 技术的以及未来这些依赖 ZK Rollup 技术的 Layer 2，在这些 Layer 2 和 Layer 1 之间还是需要有一些验证节点和排序节点来处理一些业务。举个例子，比如说 Layer 2 有一些交易发生了，可能有 10 个人 10 笔交易发生了，肯定需要一个 Sequencer （排序者）将这 10 笔交易按照某一顺序来进行一些排序，然后还会有一些验证节点来做一些验证，然后会有一些运营商将这些节点的数据变成 Layer 2 上的数据再打包存到 Layer 1 上，流程就差不多是以上这个样子。那么，就会牵扯到谁来做 Sequencer，谁来做 Validator，谁来做打包的人把 Layer 2 的数据放到 Layer 1 上。因为有这些角色的存在，所以这些项目未来可能会发行一个 Token 来协调谁来担任什么样的角色，我觉得未来可能会有这样一个去中心化的机制，这个机制也称为小共识，Layer 2 的共识。共识最自然的用什么呢？可能就是这些项目的原生代币。当然这些项目也可以使用以太坊来做共识代币，但从长远来看，如果一个项目能够体现出自己的价值，这个价值还是需要独立于以太坊。所以我觉得，他们迟早会发行 Native Token，无论这个 Token 是起到共识作用还是治理作用。\\n\\n关于 Optimism、Arbitrum、zkSync 在**用户体验**方面的差别。从用户角度来说，Optimism 和 Arbitrum 是类似的，都需要添加 RPC，无论是用户自己添加还是应用帮用户自动一键添加。zkSync1.0 的体验相对前两种更好，因为它只需要 Layer 1 的 MetaMask 进行一个签名就好了。对于用户而言，他们不需要添加 RPC，就可以正常地使用 zkSync，但是用之前每一笔交易都会需要用 Layer 1 上的账户进行一次签名，这个签名是自动弹窗的，类似于签署一个交易，但没有上链。这个过程只是为了用用户的公钥来对某一笔交易进行一次签名，而且不需要消耗 Gas。拿到签名之后就可以在 zkSync1.0 的网络进行转账，因为你给它授权，授权这件事是你做的，所以从现在来看的话， zkSync 的体验其实相对还好一些，但是 zkSync 如果升级到 2.0，我不确定他们会不会继续这么做，但我觉得很有可能就会变成 Arbitrum 和 Optimism 一样的体验。\\n\\n关于各种 Layer 2 的一些**缺点**，**Optimistic Rollup**，例如 Optimism 和 Arbitrum，他们最大的一个问题就是 Operator 存在作恶的空间，虽然作恶之后会受到惩罚，但这也不代表不会作恶。如果这个 Operator 作为一个节点去质押了 100 个 ETH 为网络提供服务，如果其提交了错误的数据，就会受到 100 ETH 的惩罚，这至少会对网络带来一些时间上的成本。Optimistic Rollup 本身就是乐观的 Rollup。现在节点都是在 Arbitrum 自己手上，他们肯定不会做这样一件事情，但是未来会不会发生这样的事情还是很难打保票。如果 Fraud Prove 这件事发生了，对于整个网络来讲也是一场灾难。现在用户如果在 Optimistic Rollup 提现的话，会有 7 天的挑战期，这个挑战期就是为了 Fraud Prove 能够生效。怎么理解？就是如果用户提现了之后，也就是从将资产从 Layer 2 转移到 Layer 1，需要等待 7 天的时间，7 天没有任何的问题之后，这个用户才能从 Layer 2 将资产转移到 Layer 1 上，7 天的时间对于用户来说非常痛苦。其实也有一些桥接的方案，但是为了整个网络的安全性来讲，大资金还是愿意等 7 天的时间来确保安全性。灾难是什么意思？如果网络的 Operator 做了一次恶，发生了一次交易需要回滚的话，整个网络可能都需要全部回滚，这个对整个网络而言算是比较困难的一件事情，整个网络相当于被冻结不能使用了，等到网络恢复到准确的状态才能继续下去，这是 Optimistic Rollup 的缺点。\\n\\n**ZK Rollup** 的优点就是安全性极高，因为它是通过密码学保证的，也没有人能够作恶，但是其难点就是 ZK 技术的难度非常高。其实区块链、Crypto 已经在不断地探索甚至突破零知识证明 ZK 技术的边界，但是这件事情需要非常大的工程量和非常强的研究能力。在 ZK 上做 Layer 1 的兼容是非常困难的。\\n\\n一直有人会觉得有了以太坊 2.0 以后可能就不会再需要 Layer 2 了，但这个观点在去年年末之后已经完全改变了。Layer 2 甚至是 Rollup 技术，本身就是以太坊 2.0 的一部分，以太坊 2.0 的扩容，就是靠分片乘以 Layer 2 的扩容效果来实现上千倍或者更高数量级的扩容。\\n\\n**区块先生 Chris**\\n\\n大部分人都觉得从 Layer 1 跳到 Layer 2 是一件很容易的事，但事实却是没有大家想象中的那么容易。我们通常在 Layer 1 可执行的 Code 在 Layer 2 上面不能 100% 执行，就算是 99%，差 1% 都会使得整个运行变得极为困难。如何很快速又很安全地验证也是 Layer 2 的一个问题。\\n\\n今年对于 Layer 2 来讲，天时地利人和都有了。其实 Layer 2 早在 15 年或者 16 年都已经开始被讨论，但是那个时候以太坊并没有太多的东西需要运行。2020 年的 DeFi Summer 改变了这个状况，越来越多的 DeFi 项目出现，越来越多的项目，如 dYdX，需要以成本较低的方式进行快速的交易。在去中心化的世界，不要说高频交易，就连简单的快速交易都是一个非常困难的事情，所以这些 DeFi 的需求会使得大家愿意付很多的 Grants 来资助 Layer 2 的开发，缩短整个开发过程。除了 DeFi，还有 GameFi，游戏对 Layer 2 的需求可能比交易对 Layer 2 的需求还要大，这种需求也推动了 Layer 2 的发展。\\n\\n\\n***\\n\\n### 关于 ChainBreaker\\n\\n由 [@mrblocktw](https://twitter.com/mrblocktw)、 [@nake13](https://twitter.com/nake13)、[@momoxi17](https://twitter.com/MoMoxi17) 主办的 ChainBreaker 播客，每周五晚上8点直播。\\n\\nChainBreak 播客主要和大家分享加密领域的热点话题，加密技术的发展探讨，以及加密世界的八卦等。\\n\\n锁定频道和往期回顾：\\n\\n[https://linktr.ee/chainbreakerp](https://linktr.ee/chainbreakerp)\\n\\n\",\"timestamp\":1638351999,\"title\":\"聊聊 Layer 2 | ChainBreaker  播客第八期精彩回顾\"},\"digest\":\"AJaL-w59zc8ILq1-pR2oxNreyWQOBsJFqi0R9I6eD10\",\"authorship\":{\"contributor\":\"0xd9c770AB8AC08D9cAe3f176b931147fa15C0dd34\",\"signingKey\":\"{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"4oiVinq00d_JiNHpkUXpNS1Uubx5EC920f5MH2f7w9M\\\",\\\"y\\\":\\\"FxwG9IIkEX6m_YJqh3mDagPKuU1vuUUHF48o6zuSheY\\\"}\",\"signature\":\"P9gmvEAzA3vZmhVoGt27PE42RcBofhJK07Dyhe2T9wsYXlIVlWdXVCmWwjcHT-Z-Yi7togndviMQNXNLAs3yjQ\",\"signingKeySignature\":\"0xe360263b6a00c9a6e7a0e3f81784a07152345536d191d2f6e9ee6e1e9350b984380c3b499dc6db8b9db838ab01349a7ec51b08e8412502b0138d67926f6405991b\",\"signingKeyMessage\":\"I authorize publishing on mirror.xyz from this device using:\\n{\\\"crv\\\":\\\"P-256\\\",\\\"ext\\\":true,\\\"key_ops\\\":[\\\"verify\\\"],\\\"kty\\\":\\\"EC\\\",\\\"x\\\":\\\"4oiVinq00d_JiNHpkUXpNS1Uubx5EC920f5MH2f7w9M\\\",\\\"y\\\":\\\"FxwG9IIkEX6m_YJqh3mDagPKuU1vuUUHF48o6zuSheY\\\"}\",\"algorithm\":{\"name\":\"ECDSA\",\"hash\":\"SHA-256\"}},\"nft\":{},\"version\":\"12-21-2020\",\"originalDigest\":\"grPXN7JO8fOofCi12qk53CSMgyC23X0KtJz99XN1Avo\"}"